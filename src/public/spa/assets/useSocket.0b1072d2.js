import{ai as o,aj as c,ak as a,al as i,am as r}from"./index.ea04af02.js";const f="/client";let e=null;function s(t){e=c(f,{transports:["websocket"],upgrade:!1,auth:{token:t!=null?t:o.getItem("token")},rejectUnauthorized:!1}),e.on("connect",()=>{}),e.on("connect_error",n=>{console.error(`socket.io connect_error due to ${n}`),n==="invalid_token"&&d(o.getItem("token"))}),e.on("disconnect",()=>{}),e.on("qsys:device",n=>{a(n)}),e.on("barix:devices",n=>{}),e.on("qsys:page:message",n=>{i(n)}),e.on("setup:status",n=>{r(n)})}const d=t=>{e&&e.connected&&e.close(),s(t)},u=(t,n)=>{e||s(),e.connected||e.connect(),e.emit(t,n)},k=()=>{let t=o.getItem("token");if(!e&&t)return s(t);if(e&&!e.connected&&t)return e.connect()};export{u as a,d as b,k as f,e as s};
