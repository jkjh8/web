import{aF as I,r as w,c as re,b as le,aM as de,a_ as $,C as _,D as M,E as l,j as e,S as O,U as T,G as f,W as V,H as S,M as x,F as ce,aY as ue,I as s,Z as W,bn as A,_ as L,K as y,bP as fe,aV as me,aG as K,O as b,V as j,N as H,br as pe,A as ae,aS as q,o as ve,f as P,aP as X,aW as _e,aX as ge}from"./index.306154ca.js";import{Q as te,a as R,b as E}from"./QTd.eaab301b.js";import{Q as ye}from"./QExpansionItem.759d9a44.js";import{f as we,Q as he,a as ke,b as N,c as Y}from"./useFiles.326b5bda.js";import{Q as J}from"./QTr.191e4813.js";import{u as oe}from"./usePlayer.abca4a42.js";import{Q as be}from"./QSelect.0739299d.js";import{Q as Ve}from"./QTooltip.243cc7ea.js";import{u as se}from"./useNotify.a7b62442.js";import{_ as Se}from"./plugin-vue_export-helper.21dcd24c.js";const xe={class:"row no-wrap items-center q-gutter-x-md"},Ce=f("div",{class:"dialog-name"},"\uBC29\uC1A1\uAD6C\uAC04\uC120\uD0DD",-1),Qe={class:"dialog-caption"},De={class:"q-pa-sm"},$e={class:"q-px-sm"},el={__name:"DialogSelectBrocastZones",props:["selected"],emits:[...I.emits],setup(c,{emit:z}){const{dialogRef:p,onDialogCancel:C,onDialogOK:Q}=I(),h=c,u=w({}),m=w([]),o=re(()=>{let t=0;for(let n in u.value)t+=u.value[n].length;return t}),D=(t,n)=>{t?u.value[n.deviceId]=[...n.ZoneStatus]:u.value[n.deviceId]=[]},r=(t,n,i)=>{t&&t.length?t.length===n.ZoneStatus.length?m.value[i]=!0:m.value[i]=null:m.value[i]=!1},a=()=>{let t=[];for(let n in u.value)u.value[n].length&&t.push({deviceId:n,ipaddress:$.value[$.value.findIndex(i=>i.deviceId===n)].ipaddress,value:u.value[n]});Q(t)};return le(async()=>{await de();for(let t=0;t<$.value.length;t++){let{deviceId:n}=$.value[t],i=h.selected.findIndex(g=>g.deviceId===n);i!==-1?(u.value[n]=[...h.selected[i].value],u.value[n].length===$.value[t].ZoneStatus.length?m.value[t]=!0:m.value[t]=null):(u.value[n]=[],m.value[t]=!1),m.value}}),(t,n)=>(_(),M(j,{ref_key:"dialogRef",ref:p,persistent:""},{default:l(()=>[e(O,{style:{"max-width":"900px",width:"80%","min-width":"500px","border-radius":"6px"}},{default:l(()=>[e(T,null,{default:l(()=>[f("div",xe,[e(V,{name:"location_on",color:"primary",size:"1.5rem"}),f("div",null,[Ce,f("div",Qe,S(o.value)+"\uAC1C \uBC29\uC1A1\uAD6C\uAC04 \uC120\uD0DD ",1)])])]),_:1}),e(T,null,{default:l(()=>[(_(!0),x(ce,null,ue(s($),(i,g)=>(_(),x("div",{key:g,class:"q-px-md"},[e(ye,{class:"q-pa-xs col-xs-6 col-sm-3 col-md-2 bg-grey-1"},{header:l(()=>[e(W,{avatar:""},{default:l(()=>[e(A,{modelValue:m.value[g],"onUpdate:modelValue":[d=>m.value[g]=d,d=>D(d,i,g)]},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(W,null,{default:l(()=>[e(L,null,{default:l(()=>[y(S(i.name),1)]),_:2},1024),e(L,{caption:""},{default:l(()=>[y(S(i.ipaddress),1)]),_:2},1024)]),_:2},1024)]),default:l(()=>[e(te,{rows:i.ZoneStatus,columns:[],"row-key":"Zone",selection:"multiple",selected:u.value[i.deviceId],"onUpdate:selected":[d=>u.value[i.deviceId]=d,d=>r(d,i,g)],grid:"",pagination:{rowsPerPage:0},"hide-header":"","hide-bottom":""},{item:l(d=>[f("div",{class:"q-pa-xs col-xs-6 col-sm-3 col-md-2 grid-style-transition",style:fe(d.selected?"transform: scale(0.95);":"")},[f("div",{class:me(["border",d.selected?t.$q.dark.isActive?"bg-grey-10":"bg-grey-3":""])},[f("div",De,[e(A,{dense:"",modelValue:d.selected,"onUpdate:modelValue":F=>d.selected=F,label:d.row.name?`${d.row.Zone}. ${d.row.name}`:`${d.row.Zone}. No Name`},null,8,["modelValue","onUpdate:modelValue","label"])])],2)],4)]),_:2},1032,["rows","selected","onUpdate:selected"])]),_:2},1024)]))),128))]),_:1}),e(K,{align:"right"},{default:l(()=>[f("div",$e,[e(b,{round:"",flat:"",color:"red-10",icon:"cancel",onClick:s(C)},null,8,["onClick"]),e(b,{round:"",flat:"","no-caps":"",color:"primary",icon:"check_circle",onClick:a})])]),_:1})]),_:1})]),_:1},512))}},Ie={class:"row no-wrap items-center q-gutter-x-md"},Te=f("div",null,[f("div",{class:"dialog-name"},"\uD30C\uC77C\uC120\uD0DD")],-1),qe={key:0},Ue=["onClick"],ze={key:2},ll={__name:"DialogSelectFile",props:["file"],emits:[...I.emits],setup(c,{emit:z}){const{dialogRef:p,onDialogCancel:C,onDialogOK:Q}=I(),h=c,{fnPlayStart:u}=oe(),m=w(25),o=w([]);return le(async()=>{await we(),h.file&&(o.value[0]=h.file)}),(D,r)=>(_(),M(j,{ref_key:"dialogRef",ref:p,persistent:""},{default:l(()=>[e(O,{class:"q-dialog-plugin",style:{"border-radius":"8px",width:"90%","max-width":"800px"}},{default:l(()=>[e(T,null,{default:l(()=>[f("div",Ie,[e(V,{name:"save",color:"primary",size:"1.5rem"}),Te])]),_:1}),e(T,null,{default:l(()=>[e(he,{modelValue:m.value,"onUpdate:modelValue":r[2]||(r[2]=a=>m.value=a)},{before:l(()=>[e(ke,{nodes:s(N).folders,selected:s(N).selectedFolder,"onUpdate:selected":[r[0]||(r[0]=a=>s(N).selectedFolder=a),s(Y)],"node-key":"path","no-selection-unset":"","selected-color":"primary"},null,8,["nodes","selected","onUpdate:selected"])]),after:l(()=>[e(te,{columns:[{name:"name",label:"NAME",field:"name",align:"left",sortable:!0},{name:"size",label:"SIZE",field:"size",sortable:!0}],rows:s(N).files,flat:"","row-key":"name",selection:"single",selected:o.value,"onUpdate:selected":r[1]||(r[1]=a=>o.value=a),pagination:{rowsPerPage:0},"hide-bottom":""},{header:l(a=>[e(J,{props:a},{default:l(()=>[e(R,{style:{width:"2rem"}}),e(R,{key:"name",props:a},{default:l(()=>[y(" NAME ")]),_:2},1032,["props"]),e(R,{key:"size",props:a,style:{width:"2.5rem"}},{default:l(()=>[y(" SIZE ")]),_:2},1032,["props"])]),_:2},1032,["props"])]),body:l(a=>[e(J,{props:a},{default:l(()=>[e(E,null,{default:l(()=>[a.row.type!=="folder"?(_(),M(A,{key:0,modelValue:a.selected,"onUpdate:modelValue":t=>a.selected=t},null,8,["modelValue","onUpdate:modelValue"])):H("",!0)]),_:2},1024),e(E,{key:"name",props:a},{default:l(()=>[a.row.type==="folder"?(_(),x("span",qe,[e(V,{name:"folder_open",color:"primary",size:"sm"})])):H("",!0),a.row.type==="folder"?(_(),x("span",{key:1,class:"q-ml-xs cursor-pointer",onClick:t=>s(Y)(a.row.fullpath)},S(a.row.name),9,Ue)):(_(),x("span",ze,[y(S(a.row.name)+" ",1),e(b,{flat:"",round:"",color:"primary",icon:"play_arrow",onClick:t=>s(u)(a.row)},null,8,["onClick"])]))]),_:2},1032,["props"]),e(E,{key:"size",props:a,style:{width:"2.5rem"}},{default:l(()=>[y(S(a.row.type!=="folder"?s(pe).humanStorageSize(a.row.size):""),1)]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","selected"])]),_:1},8,["modelValue"])]),_:1}),e(K,{align:"right"},{default:l(()=>[e(b,{round:"",flat:"",color:"red-10",icon:"cancel",onClick:s(C)},null,8,["onClick"]),e(b,{round:"",flat:"","no-caps":"",color:"primary",icon:"check_circle",onClick:r[3]||(r[3]=a=>s(Q)(o.value))})]),_:1})]),_:1})]),_:1},512))}},U=w(null),ee=w([]),Z=w(""),G=w(200),B=w(""),Fe=()=>{const c=ae(),{fnNotiWarn:z,fnNotiError:p}=se();return{fnMakeTts:async()=>{if(!Z.value)return p("\uC120\uD0DD\uB41C \uC74C\uC131\uC774 \uC5C6\uC2B5\uB2C8\uB2E4");if(!B.value)return p("\uBCC0\uD658\uD560 \uD14D\uC2A4\uD2B8\uAC00 \uC5C6\uC2B5\uB2C8\uB2E4");try{c.loading.show();const{data:o}=await q.put("/broadcast/tts",{voice:Z.value,rate:G.value,text:B.value});U.value=o.value.file}catch(o){p("TTS \uBCC0\uD658 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4",o.message)}finally{c.loading.hide()}},fnDeleteFile:async()=>{if(!U.value)return z("\uC0AD\uC81C\uD560 \uD30C\uC77C\uC774 \uC5C6\uC2B5\uB2C8\uB2E4");try{c.loading.show(),await q.delete("/broadcast/tts",{data:{file:U.value}}),U.value=null}catch(o){p("TTS \uD30C\uC77C \uC0AD\uC81C \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4",o.message)}finally{c.loading.hide()}},fnGetDefaultVoice:async()=>{try{const{data:o}=await q.get("/broadcast/tts/voice");o&&(Z.value=o.voice)}catch(o){console.log(o),p("\uAE30\uBCF8 \uC74C\uC131\uC744 \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4")}},fnSetDefaultVoice:async o=>{try{c.loading.show(),await q.put("/broadcast/tts/voice",{newVoice:o})}catch{p("\uAE30\uBCF8 \uC74C\uC131\uC744 \uC124\uC815\uD558\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4")}finally{c.loading.hide()}},fnGetVoices:async()=>{try{c.loading.show();const{data:o}=await q.get("/broadcast/tts");ee.value=o.value.voices,G.value=o.value.rate,console.log(o)}catch(o){console.log(o),p("\uC74C\uC131 \uBAA9\uB85D\uC744 \uBD88\uB7EC\uC624\uB294 \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4")}finally{c.loading.hide()}},voices:ee,voice:Z,ttsRate:G,ttsText:B,currentFile:U}};const Ne=c=>(_e("data-v-5df3393a"),c=c(),ge(),c),Ze={class:"row no-wrap items-center q-gutter-x-md"},Me=Ne(()=>f("div",{class:"card-name"},"\uBA54\uC2DC\uC9C0",-1)),Pe={class:"q-gutter-y-sm"},Re={class:"row justify-between q-px-sm"},Ee={key:0,class:"row no-wrap justify-between items-center q-gutter-x-sm"},Ge={key:1,class:"text-red-10 row items-center"},Be={__name:"DialogTts",props:["file"],emits:[...I.emits],setup(c,{emit:z}){const{dialogRef:p,onDialogCancel:C,onDialogOK:Q}=I(),{fnPlayStart:h}=oe(),{fnGetVoices:u,fnGetDefaultVoice:m,fnMakeTts:o,fnDeleteFile:D,currentFile:r,voices:a,voice:t,ttsRate:n,ttsText:i}=Fe(),{fnNotiError:g}=se(),d=c,F=ae(),ne=async()=>{r.value&&await D(r.value),await o()};return ve(async()=>{try{F.loading.show(),await u(),await m(),d.file&&await D(d.file)}catch{g("TTS \uC870\uD68C \uC624\uB958","\uC7A0\uC2DC\uD6C4\uC5D0 \uB2E4\uC2DC \uC2DC\uB3C4\uD574 \uC8FC\uC138\uC694.")}finally{F.loading.hide()}}),(ie,v)=>(_(),M(j,{ref_key:"dialogRef",ref:p,persistent:""},{default:l(()=>[e(O,{class:"q-dialog-plugin bg-trans"},{default:l(()=>[e(T,null,{default:l(()=>[f("div",Ze,[e(V,{name:"volume_up",color:"primary",size:"sm"}),Me])]),_:1}),e(T,null,{default:l(()=>[f("div",Pe,[e(be,{options:s(a),modelValue:s(t),"onUpdate:modelValue":v[0]||(v[0]=k=>P(t)?t.value=k:null),"map-options":"","emit-value":"","option-value":"id","option-label":"name",filled:"",dense:"",label:"\uC74C\uC131"},null,8,["options","modelValue"]),e(X,{modelValue:s(n),"onUpdate:modelValue":v[1]||(v[1]=k=>P(n)?n.value=k:null),type:"number",filled:"",dense:"",label:"\uC74C\uC131\uC18D\uB3C4"},null,8,["modelValue"]),e(X,{modelValue:s(i),"onUpdate:modelValue":v[2]||(v[2]=k=>P(i)?i.value=k:null),filled:"",type:"textarea",placeholder:"\uBA54\uC2DC\uC9C0\uB97C \uC785\uB825\uD558\uC138\uC694.",label:"\uBA54\uC2DC\uC9C0"},null,8,["modelValue"]),f("div",Re,[s(r)?(_(),x("div",Ee,[f("div",null,[e(V,{class:"cursor-pointer",name:"play_arrow",color:"primary",size:"sm",onClick:v[3]||(v[3]=k=>s(h)(s(r)))}),y(" "+S(s(r).base),1)]),e(V,{class:"cursor-pointer q-mr-sm",name:"cancel",color:"red-10",size:"sm",onClick:v[4]||(v[4]=k=>s(D)(s(r)))})])):(_(),x("div",Ge,[e(V,{name:"warning"}),y(" \uD569\uC131\uB41C \uD30C\uC77C\uC774 \uC5C6\uC2B5\uB2C8\uB2E4. ")])),e(b,{round:"",unelevated:"",color:"primary",icon:"mic",size:"sm",onClick:ne},{default:l(()=>[e(Ve,null,{default:l(()=>[y("\uC74C\uC131\uD569\uC131")]),_:1})]),_:1})])])]),_:1}),e(K,{align:"right"},{default:l(()=>[e(b,{round:"",flat:"",color:"red-10",icon:"cancel",onClick:s(C)},null,8,["onClick"]),e(b,{disable:!s(r),round:"",flat:"","no-caps":"",color:"primary",icon:"check_circle",onClick:v[5]||(v[5]=k=>s(Q)(s(r)))},null,8,["disable"])]),_:1})]),_:1})]),_:1},512))}};var al=Se(Be,[["__scopeId","data-v-5df3393a"]]);export{al as D,el as _,ll as a,Fe as u};
