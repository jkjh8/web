import{v as F,r as V,o as M,z as p,A as h,B as a,j as e,P as E,R as Z,C as t,Q as f,J as c,aH as G,aI as j,M as v,aJ as H,aF as J,I as N,D as B,O as K,U as T,aK as W,aL as L,aM as X,aN as Y,G as y,aO as P,H as $,F as A,aP as ee,N as D,aQ as te,E as k,V as ae,W as ne}from"./index.186a5e78.js";import{Q as oe,a as se,b as x,c as b}from"./QSelect.eefc60fe.js";import{Q as le}from"./QExpansionItem.3f0fca0f.js";import{u as ie}from"./use-dialog-plugin-component.830234ac.js";import{f as O,b as I}from"./useBarix.42c53ed4.js";import{_ as re}from"./plugin-vue_export-helper.21dcd24c.js";const de={class:"row no-wrap items-center q-gutter-x-md"},ue=t("div",{class:"dialog-name"},"\uBC29\uC1A1\uC9C0\uC5ED\uC124\uC815",-1),ce={class:"dialog-caption"},me={__name:"setSigleChannel",props:["device","zone"],setup(u){const{dialogRef:_,onDialogCancel:q,onDialogOK:Q}=ie(),d=u,w=F(),g=V([]),n=V(null),m=V(0),l=(s,r,o)=>{r(()=>{g.value=I.value.filter(C=>C.name.indexOf(s)>-1)})},S=async s=>{let r="";if(s!==null){const o=await T.get("/devices/qsys/existszone",{params:{id:s}});if(r=I.value[I.value.findIndex(C=>C._id===s)].ipaddress,o.data&&o.data.value&&o.data.value.length)return o.data.value[0].ZoneStatus.findIndex(U=>U.destination===s)===d.zone.Zone-1?void 0:(n.value=null,w.notify({type:"negative",icon:"warning",position:"top",message:"\uB2E4\uB978 \uBC29\uC1A1 \uAD6C\uAC04\uC5D0\uC11C \uC774\uBBF8 \uC0AC\uC6A9\uC911\uC785\uB2C8\uB2E4."}))}await W({deviceId:d.device.deviceId,zone:d.zone.Zone,destination:s,ipaddress:r}),await L()},i=s=>{X({deviceId:d.device.deviceId,zone:d.zone.Zone,volume:s})},z=s=>{Y({deviceId:d.device.deviceId,zone:d.zone.Zone,mute:s})};return M(async()=>{await O(),g.value=I.value,m.value=d.zone.gain,d.zone.destination&&d.zone.destination._id&&(n.value=d.zone.destination._id)}),(s,r)=>(p(),h(K,{ref_key:"dialogRef",ref:_},{default:a(()=>[e(E,{class:"q-dialog-plugin",style:{"border-radius":"8px"}},{default:a(()=>[e(Z,null,{default:a(()=>{var o;return[t("div",de,[e(f,{name:"location_on",color:"primary",size:"1.5rem"}),t("div",null,[ue,t("div",ce,c(`${u.device.name} ${u.zone.Zone}. ${(o=u.zone.name)!=null?o:"No name"} \uCC44\uB110 `),1)])])]}),_:1}),e(Z,null,{default:a(()=>[e(oe,{filled:"",dense:"",clearable:"",modelValue:n.value,"onUpdate:modelValue":[r[0]||(r[0]=o=>n.value=o),S],options:g.value,label:"\uB124\uD2B8\uC6CC\uD06C \uC218\uC2E0\uAE30 \uC120\uD0DD","option-value":"_id","option-label":"name","hide-selected":"","use-input":"","fill-input":"","input-debounce":"0","emit-value":"","map-options":"",onFilter:l},{option:a(o=>[e(se,G(j(o.itemProps)),{default:a(()=>[e(x,{avatar:""},{default:a(()=>[e(f,{name:"storage"})]),_:1}),e(x,null,{default:a(()=>[e(b,null,{default:a(()=>[v(c(o.opt.name),1)]),_:2},1024),e(b,{caption:""},{default:a(()=>[v(c(o.opt.ipaddress),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options"])]),_:1}),e(Z,null,{default:a(()=>[t("div",null,[e(H,{modelValue:m.value,"onUpdate:modelValue":[r[2]||(r[2]=o=>m.value=o),i],filled:"",dense:"",label:"\uBCFC\uB968",type:"number"},{append:a(()=>[e(f,{class:"cursor-pointer",name:u.zone.mute?"volume_off":"volume_up",color:u.zone.mute?"red-10":"primary",onClick:r[1]||(r[1]=o=>z(!u.zone.mute))},null,8,["name","color"])]),_:1},8,["modelValue"])])]),_:1}),e(J,{align:"right"},{default:a(()=>[e(N,{round:"",flat:"",color:"red-10",icon:"cancel",onClick:B(q)},null,8,["onClick"]),e(N,{round:"",flat:"","no-caps":"",color:"primary",icon:"check_circle",onClick:r[3]||(r[3]=o=>B(Q)(s.inputText))})]),_:1})]),_:1})]),_:1},512))}};const R=u=>(ae("data-v-614e24b2"),u=u(),ne(),u),pe={class:"row no-wrap justify-start items-center q-gutter-x-sm header-font"},fe=R(()=>t("span",null,"\uC9C0\uC5ED \uBC29\uC1A1\uC911",-1)),ve={class:"row q-pa-md q-gutter-sm"},_e={class:"floating-position q-gutter-x-xs row no-wrap items-center"},ge={class:"floating-font"},ye={class:""},he={key:0},xe={class:"column items-end text-caption"},we={class:"row q-gutter-x-xs"},Ce={key:1},ke={class:"column items-end text-caption"},Ie=R(()=>t("div",null,"Local",-1)),be={class:"row q-gutter-x-xs"},qe={__name:"broadcastStatus",setup(u){const _=F(),q=n=>{let m=0;for(let l=0;l<n.length;l++)n[l].Active&&(m+=1);return m},Q=n=>{switch(n){case 1:case 2:return"bg-red text-white";case 3:case 4:return"bg-yellow";case 5:return"bg-green-4 text-white";default:return""}},d=n=>n&&n.status?n.streamurl?"green":"yellow":"red",w=n=>{if(k.value.isAdmin)return!0;if(k.value.zones&&k.value.zones.length){for(let m of k.value.zones)if(m===n)return!0}return!1},g=(n,m)=>{_.dialog({component:me,componentProps:{device:n,zone:m}})};return M(async()=>{_.loading.show(),await L(),await O(),_.loading.hide()}),(n,m)=>(p(!0),y(A,null,P(B(te),(l,S)=>(p(),h(le,{key:S,"header-class":"bg-grey-1"},{header:a(()=>[e(x,{avatar:""},{default:a(()=>[e(f,{color:l.connected?"primary":"ref-10",name:"location_on"},null,8,["color"])]),_:2},1024),e(x,null,{default:a(()=>[e(b,null,{default:a(()=>[t("div",null,[v(c(l.name)+" ",1),w(l.deviceId)?(p(),h(f,{key:0,class:"q-ml-sm cursor-pointer",color:"grey",name:"settings"})):$("",!0)])]),_:2},1024),e(b,{caption:""},{default:a(()=>[v(c(l.ipaddress),1)]),_:2},1024)]),_:2},1024),e(x,{side:""},{default:a(()=>[t("div",pe,[v(c(q(l.ZoneStatus))+" ",1),fe])]),_:2},1024)]),default:a(()=>[t("div",ve,[(p(!0),y(A,null,P(l.ZoneStatus,(i,z)=>{var s;return p(),y("div",{key:z},[t("div",{class:ee(["borderd q-pt-md q-px-sm q-pb-sm q-gutter-sx",i.Active?Q(i.Priority):""]),style:{position:"relative"}},[t("div",_e,[t("span",ge,c(i.gain),1),i.mute?(p(),h(f,{key:0,name:"volume_off",color:"red-10"})):$("",!0),w(l.deviceId)?(p(),h(f,{key:1,class:"cursor-pointer",name:"settings",color:"primary",onClick:r=>g(l,i)},null,8,["onClick"])):$("",!0)]),t("div",ye,[t("span",null,c(i.Zone)+". ",1),t("span",null,c((s=i.name)!=null?s:"No Name"),1)]),i.destination?(p(),y("div",he,[t("div",null,[e(D,{class:"q-my-sm"})]),t("div",xe,[t("div",we,[v(c(i.destination.name)+" ",1),e(f,{name:"circle",color:d(i.destination)},null,8,["color"])]),t("div",null,c(i.destination.ipaddress),1)])])):(p(),y("div",Ce,[t("div",null,[e(D,{class:"q-my-sm"})]),t("div",ke,[Ie,t("div",be,"Channel "+c(i.Zone),1)])]))],2)])}),128))])]),_:2},1024))),128))}};var Ne=re(qe,[["__scopeId","data-v-614e24b2"]]);export{Ne as B};
