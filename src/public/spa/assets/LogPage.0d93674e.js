import{Q as _}from"./QTooltip.2350c7ec.js";import{v as B,u as N,r as Q,o as S,y as r,z as v,A as t,j as a,O as T,P as z,B as k,R as C,H as n,C as i,L as D,D as c,J as d,K as y,bt as $,bo as q,N as P}from"./index.953e4a1c.js";import{Q as j,a as u}from"./QTable.d809d4ef.js";import{Q as V}from"./QTr.cbf4c56a.js";import{Q as Y}from"./QPage.23229818.js";import{u as H}from"./useFiles.16586c32.js";import"./QCircularProgress.a25f8684.js";const M={class:"row items-center q-gutter-x-sm"},A=k("span",null,"\uD604\uB300 \uD3F4\uB354:",-1),L={key:0},R=["onClick"],E={key:2},G={key:0},w="D:\\Data\\log",ee={__name:"LogPage",setup(I){const{fnDownloadFile:x}=H(),g=B(),F=N(),m=Q([]),f=Q([]),b=async s=>{try{g.loading.show();const{data:o}=await P.get("/files",{params:{folder:s}}),e=o.files.filter(l=>l.type==="folder"),p=o.files.filter(l=>l.type!=="folder");if(m.value=[...e,...p],s!==w){f.value=s.split("\\");const l=f.value;l.pop(),m.value.unshift({name:"..",base:"..",fullpath:l.join("\\"),type:"folder"})}}catch{}finally{g.loading.hide()}},h=s=>{b(s)};return S(()=>{b(w)}),(s,o)=>(r(),v(Y,{padding:""},{default:t(()=>[a(T,{flat:"",class:"q-pa-md q-my-md"},{default:t(()=>[a(z,{class:"row justify-between"},{default:t(()=>[k("div",M,[a(C,{class:"cursor-pointer",name:"home",size:"sm",color:"primary",onClick:o[0]||(o[0]=e=>h(w))},{default:t(()=>[a(_,null,{default:t(()=>[n("\uD648")]),_:1})]),_:1}),A,k("span",null,i(f.value.join("/")),1)]),a(D,{icon:"arrow_back",round:"",flat:"",size:"sm",color:"primary",onClick:o[1]||(o[1]=e=>c(F).push("/super"))},{default:t(()=>[a(_,null,{default:t(()=>[n("\uB3CC\uC544\uAC00\uAE30 ")]),_:1})]),_:1})]),_:1}),a(z,null,{default:t(()=>[a(j,{columns:[{name:"name",label:"Name",field:"name",align:"left",sortable:!0},{name:"ctime",label:"Time",field:"ctime",align:"center",sortable:!0},{name:"size",label:"Size",field:"size",align:"center",sortable:!0},{name:"actions",label:"Actions",align:"center"}],rows:m.value,pagination:{rowsPerPage:10}},{body:t(e=>[a(V,{props:e},{default:t(()=>[a(u,{key:"name",props:e},{default:t(()=>[e.row.type==="folder"?(r(),d("span",L,[a(C,{name:"folder_open",color:"primary",size:"20px"})])):y("",!0),e.row.type==="folder"?(r(),d("span",{key:1,class:"q-ml-xs cursor-pointer",onClick:p=>h(e.row.fullpath)},i(e.row.base),9,R)):(r(),d("span",E,i(e.row.base),1))]),_:2},1032,["props"]),a(u,{style:{width:"3rem"}},{default:t(()=>[n(i(c($).formatDate(e.row.ctime,"YYYY-MM-DD HH:mm:ss")),1)]),_:2},1024),a(u,{key:"size",props:e,style:{width:"3rem"}},{default:t(()=>[n(i(e.row.type!=="folder"?c(q).humanStorageSize(e.row.size):""),1)]),_:2},1032,["props"]),a(u,{key:"actions",props:e,style:{width:"3.5rem"}},{default:t(()=>[e.row.name!==".."?(r(),d("div",G,[e.row.type!=="folder"?(r(),v(D,{key:0,round:"",flat:"",icon:"download",color:"primary",size:"sm",onClick:p=>c(x)(e.row)},{default:t(()=>[a(_,null,{default:t(()=>[n("\uB2E4\uC6B4\uB85C\uB4DC")]),_:1})]),_:2},1032,["onClick"])):y("",!0)])):y("",!0)]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows"])]),_:1})]),_:1})]),_:1}))}};export{ee as default};
