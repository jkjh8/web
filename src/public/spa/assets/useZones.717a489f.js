import{ay as q,k as Y,c as L,b as J,aP as ye,b0 as V,y as w,z as N,A as l,j as e,N as Z,O as $,B as s,P as y,C as F,I as T,F as we,a$ as he,D as r,V as X,bp as j,W as ee,G as f,c1 as ke,aY as be,az as R,K as x,R as O,r as P,H as xe,J as K,bt as Ce,v as se,o as ne,aS as G,aU as le,f as B,aZ as $e,a_ as Se,bw as ae}from"./index.17e721b0.js";import{Q as ie,b as M,a as E}from"./QTable.32483141.js";import{Q as Ve}from"./QExpansionItem.e8bd9b9d.js";import{Q as U}from"./QTooltip.88a93751.js";import{u as re,f as Q,b as W,a as Qe,Q as de,c as oe}from"./useFiles.5620be00.js";import{Q as te}from"./QTr.f15a7489.js";import{u as ce}from"./usePlayer.d801ce40.js";import{Q as qe}from"./QBanner.3e5ecdb2.js";import{Q as Ie}from"./QSelect.2196a31a.js";import{r as ze}from"./useRules.779a940e.js";import{u as ue}from"./useNotify.f37af5e0.js";import{_ as De}from"./DialogConfirm.35f64ac2.js";import{u as Ue}from"./useTts.37257a21.js";import{_ as Fe}from"./plugin-vue_export-helper.21dcd24c.js";const Te={class:"row no-wrap items-center q-gutter-x-md"},Ne=s("div",{class:"dialog-name"},"\uBC29\uC1A1\uAD6C\uAC04\uC120\uD0DD",-1),Pe={class:"dialog-caption"},Ze={class:"q-pa-sm"},Re={class:"q-px-sm"},xl={__name:"DialogSelectBrocastZones",props:["selected"],emits:[...q.emits],setup(p,{emit:I}){const{dialogRef:_,onDialogCancel:C,onDialogOK:h}=q(),v=p,u=Y({}),m=Y([]),z=L(()=>{let t=0;for(let i in u)t+=u[i].length;return t}),b=(t,i)=>{t?u[i.deviceId]=[...i.ZoneStatus]:u[i.deviceId]=[]},g=(t,i,d)=>{t&&t.length?t.length===i.ZoneStatus.length?m[d]=!0:m[d]=null:m[d]=!1},c=()=>{let t=[];for(let i in u)if(u[i].length){const d=V.value.findIndex(n=>n.deviceId===i);t.push({deviceId:i,name:V.value[d].name,ipaddress:V.value[d].ipaddress,amx:V.value[d].amx,value:u[i]})}h(t)};return J(async()=>{await ye();for(let t=0;t<V.value.length;t++){let{deviceId:i}=V.value[t],d=v.selected.findIndex(n=>n.deviceId===i);d!==-1?(u[i]=[...v.selected[d].value],u[i].length===V.value[t].ZoneStatus.length?m[t]=!0:m[t]=null):(u[i]=[],m[t]=!1)}}),(t,i)=>(w(),N(O,{ref_key:"dialogRef",ref:_,persistent:""},{default:l(()=>[e(Z,{style:{"max-width":"900px",width:"80%","min-width":"500px","border-radius":"6px"}},{default:l(()=>[e($,null,{default:l(()=>[s("div",Te,[e(y,{name:"location_on",color:"primary",size:"1.5rem"}),s("div",null,[Ne,s("div",Pe,F(z.value)+"\uAC1C \uBC29\uC1A1\uAD6C\uAC04 \uC120\uD0DD ",1)])])]),_:1}),e($,null,{default:l(()=>[(w(!0),T(we,null,he(r(V),(d,n)=>(w(),T("div",{key:n,class:"q-px-md"},[e(Ve,{class:"q-pa-xs col-xs-6 col-sm-3 col-md-2 bg-grey-1"},{header:l(()=>[e(X,{avatar:""},{default:l(()=>[e(j,{modelValue:m[n],"onUpdate:modelValue":[o=>m[n]=o,o=>b(o,d,n)]},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(X,null,{default:l(()=>[e(ee,null,{default:l(()=>[f(F(d.name),1)]),_:2},1024),e(ee,{caption:""},{default:l(()=>[f(F(d.ipaddress),1)]),_:2},1024)]),_:2},1024)]),default:l(()=>[e(ie,{rows:d.ZoneStatus,columns:[],"row-key":"Zone",selection:"multiple",selected:u[d.deviceId],"onUpdate:selected":[o=>u[d.deviceId]=o,o=>g(o,d,n)],grid:"",pagination:{rowsPerPage:0},"hide-header":"","hide-bottom":""},{item:l(o=>[s("div",{class:"q-pa-xs col-xs-6 col-sm-3 col-md-2 grid-style-transition",style:ke(o.selected?"transform: scale(0.95);":"")},[s("div",{class:be(["border",o.selected?t.$q.dark.isActive?"bg-grey-10":"bg-grey-3":""])},[s("div",Ze,[e(j,{dense:"",modelValue:o.selected,"onUpdate:modelValue":a=>o.selected=a,label:o.row.name?`${o.row.Zone}. ${o.row.name}`:`${o.row.Zone}. No Name`},null,8,["modelValue","onUpdate:modelValue","label"])])],2)],4)]),_:2},1032,["rows","selected","onUpdate:selected"])]),_:2},1024)]))),128))]),_:1}),e(R,{align:"right"},{default:l(()=>[s("div",Re,[e(x,{round:"",flat:"",color:"red-10",icon:"cancel",onClick:r(C)},null,8,["onClick"]),e(x,{round:"",flat:"","no-caps":"",color:"primary",icon:"check_circle",onClick:c})])]),_:1})]),_:1})]),_:1},512))}},Oe={class:"row no-wrap justify-between items-center"},Ae={class:"row no-wrap items-center q-gutter-x-md"},Be=s("div",null,[s("div",{class:"dialog-name"},"\uD30C\uC77C\uC120\uD0DD")],-1),Me={key:0},Ee=["onClick"],je={key:2},Cl={__name:"DialogSelectFile",props:["file"],emits:[...q.emits],setup(p,{emit:I}){const{dialogRef:_,onDialogCancel:C,onDialogOK:h}=q(),v=p,{fnMakeFolder:u,fnUploadFile:m}=re(),{fnPlayStart:z,fnPlayerStopClose:b}=ce(),g=P(25),c=P([]),t=L(()=>{var n;return((n=Q.selectedFolder)==null?void 0:n.includes("/global"))&&!xe.value.isAdmin}),i=()=>{b(),h(c.value)},d=()=>{b(),C()};return J(async()=>{await W(),v.file&&(c.value[0]=v.file)}),(n,o)=>(w(),N(O,{ref_key:"dialogRef",ref:_,persistent:""},{default:l(()=>[e(Z,{class:"q-dialog-plugin",style:{"border-radius":"8px",width:"90%","max-width":"800px"}},{default:l(()=>[e($,null,{default:l(()=>[s("div",Oe,[s("div",Ae,[e(y,{name:"save",color:"primary",size:"1.5rem"}),Be]),s("div",null,[e(x,{disable:t.value,round:"",flat:"",icon:"create_new_folder",color:"primary",size:"12px",onClick:o[0]||(o[0]=a=>r(u)(r(Q).selectedFolder))},{default:l(()=>[e(U,null,{default:l(()=>[f("\uC0C8\uD3F4\uB354")]),_:1})]),_:1},8,["disable"]),e(x,{disable:t.value,round:"",flat:"",icon:"upload",color:"primary",size:"12px",onClick:r(m)},{default:l(()=>[e(U,null,{default:l(()=>[f("\uD30C\uC77C \uC5C5\uB85C\uB4DC")]),_:1})]),_:1},8,["disable","onClick"])])])]),_:1}),e($,null,{default:l(()=>[e(Qe,{modelValue:g.value,"onUpdate:modelValue":o[3]||(o[3]=a=>g.value=a)},{before:l(()=>[e(de,{nodes:r(Q).folders,selected:r(Q).selectedFolder,"onUpdate:selected":[o[1]||(o[1]=a=>r(Q).selectedFolder=a),r(oe)],"node-key":"path","no-selection-unset":"","selected-color":"primary"},null,8,["nodes","selected","onUpdate:selected"])]),after:l(()=>[e(ie,{columns:[{name:"name",label:"NAME",field:"name",align:"left",sortable:!0},{name:"size",label:"SIZE",field:"size",sortable:!0}],rows:r(Q).files,flat:"","row-key":"name",selection:"single",selected:c.value,"onUpdate:selected":o[2]||(o[2]=a=>c.value=a),pagination:{rowsPerPage:0},"hide-bottom":""},{header:l(a=>[e(te,{props:a},{default:l(()=>[e(M,{style:{width:"2rem"}}),e(M,{key:"name",props:a},{default:l(()=>[f(" NAME ")]),_:2},1032,["props"]),e(M,{key:"size",props:a,style:{width:"2.5rem"}},{default:l(()=>[f(" SIZE ")]),_:2},1032,["props"])]),_:2},1032,["props"])]),body:l(a=>[e(te,{props:a},{default:l(()=>[e(E,null,{default:l(()=>[a.row.type!=="folder"?(w(),N(j,{key:0,modelValue:a.selected,"onUpdate:modelValue":D=>a.selected=D},null,8,["modelValue","onUpdate:modelValue"])):K("",!0)]),_:2},1024),e(E,{key:"name",props:a},{default:l(()=>[a.row.type==="folder"?(w(),T("span",Me,[e(y,{name:"folder_open",color:"primary",size:"sm"})])):K("",!0),a.row.type==="folder"?(w(),T("span",{key:1,class:"q-ml-xs cursor-pointer",onClick:D=>r(oe)(a.row.fullpath)},F(a.row.name),9,Ee)):(w(),T("span",je,[f(F(a.row.name)+" ",1),e(x,{flat:"",round:"",color:"primary",icon:"play_arrow",onClick:D=>r(z)(a.row)},null,8,["onClick"])]))]),_:2},1032,["props"]),e(E,{key:"size",props:a,style:{width:"2.5rem"}},{default:l(()=>[f(F(a.row.type!=="folder"?r(Ce).humanStorageSize(a.row.size):""),1)]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","selected"])]),_:1},8,["modelValue"])]),_:1}),e(R,{align:"right"},{default:l(()=>[e(x,{round:"",flat:"",color:"red-10",icon:"cancel",onClick:d}),e(x,{round:"",flat:"","no-caps":"",color:"primary",icon:"check_circle",onClick:i})]),_:1})]),_:1})]),_:1},512))}},Ke={class:"row no-wrap justify-between items-center"},Ge={class:"row no-wrap items-center q-gutter-x-md"},Le=s("div",null,[s("div",{class:"dialog-name"},"\uD30C\uC77C\uC120\uD0DD")],-1),Je={class:"q-px-md"},We={class:"row no-wrap justify-between"},He={class:"row no-wrap"},Ye=s("div",{class:"q-ml-sm"},"\uD3F4\uB354 \uC120\uD0DD",-1),Xe={class:"q-px-md"},el={__name:"DialogTtsFileSave",props:["file"],emits:[...q.emits],setup(p,{emit:I}){const{dialogRef:_,onDialogCancel:C,onDialogOK:h}=q(),{fnNotiWarn:v,fnNotiError:u}=ue(),m=p,{fnMakeFolder:z}=re(),b=se(),g=L(()=>Q.folders.length>1?[Q.folders[1]]:[]),c=P([]),t=P(""),i=async()=>{try{await le.put("/files/copy",{original:m.file.fullpath,folder:c.value,name:t.value})}catch(n){console.error(n)}},d=async()=>{if(!t.value)return v("\uD30C\uC77C\uC774\uB984\uC744 \uC785\uB825\uD558\uC138\uC694.");if(!c.value)return v("\uD3F4\uB354\uB97C \uC120\uD0DD\uD558\uC138\uC694.");b.loading.show();try{const{data:n}=await le.get("/files/exist",{params:{data:JSON.stringify({folder:c.value,name:t.value})}});n.result&&n.exist&&(b.loading.hide(),b.dialog({component:De,componentProps:{title:"\uD30C\uC77C\uC774\uB984 \uC911\uBCF5",message:"\uB3D9\uC77C\uD55C \uC774\uB984\uC758 \uD30C\uC77C\uC774 \uC874\uC7AC\uD569\uB2C8\uB2E4. \uB36E\uC5B4\uC4F0\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?"}}).onOk(async()=>{await i(),h()})),n.result&&!n.exist&&(await i(),h()),n.result||u("\uD30C\uC77C \uBCF5\uC0AC \uC624\uB958","\uD30C\uC77C \uBCF5\uC0AC \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4.")}catch(n){console.error(n)}finally{b.loading.hide()}};return J(async()=>{await W()}),ne(()=>{console.log(g.value),g.value[0]&&(c.value=g.value[0].path),t.value=m.file.base}),(n,o)=>(w(),N(O,{ref_key:"dialogRef",ref:_},{default:l(()=>[e(Z,{class:"q-dialog-plugin",style:{"border-radius":"8px"}},{default:l(()=>[e($,null,{default:l(()=>[s("div",Ke,[s("div",Ge,[e(y,{name:"save",color:"primary",size:"1.5rem"}),Le])])]),_:1}),e($,null,{default:l(()=>[s("div",Je,[s("div",We,[s("div",He,[e(y,{name:"folder",color:"primary",size:"1.4rem"}),Ye]),s("div",null,[e(y,{class:"cursor-pointer",name:"create_new_folder",color:"primary",size:"1.4rem",onClick:o[0]||(o[0]=a=>r(z)(c.value))},{default:l(()=>[e(U,null,{default:l(()=>[f("\uC0C8\uD3F4\uB354")]),_:1})]),_:1})])]),e(de,{class:"bg-grey-3",nodes:g.value,selected:c.value,"onUpdate:selected":o[1]||(o[1]=a=>c.value=a),"node-key":"path","no-selection-unset":"","default-expand-all":"","selected-color":"primary"},null,8,["nodes","selected"])])]),_:1}),e($,null,{default:l(()=>[s("div",Xe,[e(G,{filled:"",dense:"",modelValue:t.value,"onUpdate:modelValue":o[2]||(o[2]=a=>t.value=a),label:"\uD30C\uC77C\uC774\uB984",rules:[r(ze)]},null,8,["modelValue","rules"])])]),_:1}),e(R,{align:"right"},{default:l(()=>[e(x,{round:"",flat:"",color:"red-10",icon:"cancel",onClick:r(C)},null,8,["onClick"]),e(x,{round:"",flat:"","no-caps":"",color:"primary",icon:"check_circle",onClick:d})]),_:1})]),_:1})]),_:1},512))}};const me=p=>($e("data-v-5059494e"),p=p(),Se(),p),ll={class:"row no-wrap items-center q-gutter-x-md"},al=me(()=>s("div",{class:"card-name"},"\uC74C\uC131\uD569\uC131",-1)),ol=me(()=>s("span",{class:"self-end"}," \uBA54\uC2DC\uC9C0\uAC00 \uBCC0\uACBD \uB418\uC5C8\uC2B5\uB2C8\uB2E4. \uC74C\uC131\uD569\uC131\uC744 \uC2E4\uD589\uD574 \uC8FC\uC138\uC694. ",-1)),tl={class:"q-gutter-y-sm"},sl={class:"row justify-between q-px-sm"},nl={key:0,class:"row no-wrap justify-between items-center q-gutter-x-sm"},il={key:1,class:"text-red-10 row items-center"},rl={__name:"DialogTts",props:["file"],emits:[...q.emits],setup(p,{emit:I}){const{dialogRef:_,onDialogCancel:C,onDialogOK:h}=q(),{fnPlayStart:v,fnPlayerStopClose:u}=ce(),{fnGetVoices:m,fnGetDefaultVoice:z,fnMakeTts:b,fnDeleteFile:g,currentFile:c,voices:t,voice:i,ttsRate:d,ttsText:n}=Ue(),{fnNotiError:o}=ue(),a=p,D=se(),A=P(!1),H=P(!1),fe=async()=>{modal.value=!1,c.value&&await g(c.value),await b(),A.value=!1,H.value=!0},pe=()=>{D.dialog({component:el,componentProps:{file:c.value}})},_e=()=>{u(),h(c.value)},ve=()=>{u(),C()};return ne(async()=>{try{D.loading.show(),await m(),await z(),await W(),a.file&&await g(a.file),c.value=null}catch{o("TTS \uC870\uD68C \uC624\uB958","\uC7A0\uC2DC\uD6C4\uC5D0 \uB2E4\uC2DC \uC2DC\uB3C4\uD574 \uC8FC\uC138\uC694.")}finally{D.loading.hide()}}),(ge,k)=>(w(),N(O,{ref_key:"dialogRef",ref:_,persistent:""},{default:l(()=>[e(Z,{class:"q-dialog-plugin bg-trans wide"},{default:l(()=>[e($,null,{default:l(()=>[s("div",ll,[e(y,{name:"volume_up",color:"primary",size:"sm"}),al])]),_:1}),H.value===!0&&A.value===!0?(w(),N(qe,{key:0,"inline-actions":"",class:"text-white bg-orange row items-center q-gutter-x-sm"},{default:l(()=>[e(y,{name:"warning",size:"xs"}),ol]),_:1})):K("",!0),e($,null,{default:l(()=>[s("div",tl,[e(Ie,{options:r(t),modelValue:r(i),"onUpdate:modelValue":k[0]||(k[0]=S=>B(i)?i.value=S:null),"map-options":"","emit-value":"","option-value":"id","option-label":"name",filled:"",dense:"",label:"\uC74C\uC131"},null,8,["options","modelValue"]),e(G,{modelValue:r(d),"onUpdate:modelValue":k[1]||(k[1]=S=>B(d)?d.value=S:null),type:"number",filled:"",dense:"",label:"\uC74C\uC131\uC18D\uB3C4"},null,8,["modelValue"]),e(G,{modelValue:r(n),"onUpdate:modelValue":[k[2]||(k[2]=S=>B(n)?n.value=S:null),k[3]||(k[3]=S=>A.value=!0)],filled:"",type:"textarea",placeholder:"\uBA54\uC2DC\uC9C0\uB97C \uC785\uB825\uD558\uC138\uC694.",label:"\uBA54\uC2DC\uC9C0"},null,8,["modelValue"]),s("div",sl,[r(c)?(w(),T("div",nl,[s("div",null,[e(y,{class:"cursor-pointer",name:"play_arrow",color:"primary",size:"sm",onClick:k[4]||(k[4]=S=>r(v)(r(c)))},{default:l(()=>[e(U,null,{default:l(()=>[f("\uBBF8\uB9AC\uB4E3\uAE30")]),_:1})]),_:1}),f(" "+F(r(c).base),1)]),e(y,{class:"cursor-pointer q-mr-sm",name:"cancel",color:"red-10",size:"sm",onClick:k[5]||(k[5]=S=>r(g)(r(c)))},{default:l(()=>[e(U,null,{default:l(()=>[f("\uC0AD\uC81C")]),_:1})]),_:1}),e(y,{class:"cursor-pointer",name:"save",color:"primary",size:"sm",onClick:pe},{default:l(()=>[e(U,null,{default:l(()=>[f("\uC800\uC7A5")]),_:1})]),_:1})])):(w(),T("div",il,[e(y,{name:"warning"}),f(" \uD569\uC131\uB41C \uD30C\uC77C\uC774 \uC5C6\uC2B5\uB2C8\uB2E4. ")])),e(y,{class:"cursor-pointer",color:"primary",name:"mic",size:"sm",onClick:fe},{default:l(()=>[e(U,null,{default:l(()=>[f("\uC74C\uC131\uD569\uC131")]),_:1})]),_:1})])])]),_:1}),e(R,{align:"right"},{default:l(()=>[e(x,{round:"",flat:"",color:"red-10",icon:"cancel",onClick:ve}),e(x,{disable:!r(c),round:"",flat:"","no-caps":"",color:"primary",icon:"check_circle",onClick:_e},null,8,["disable"])]),_:1})]),_:1})]),_:1},512))}};var $l=Fe(rl,[["__scopeId","data-v-5059494e"]]);const Sl=p=>{let I=[];for(let _ of p){let C=ae.value.findIndex(h=>h.deviceId===_.deviceId);if(C!==-1){const{ZoneStatus:h,name:v}=ae.value[C];if(_.value&&_.value.length)if(_.value.length===h.length)I.push(`${v} - ALL`);else{let u=_.value.map(m=>m.name||m.Zone);I.push(`${v} - ${u.join(", ")}`)}}}return I};export{$l as D,xl as _,Cl as a,Sl as f};
