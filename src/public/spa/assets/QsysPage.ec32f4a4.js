import{ay as B,y as b,z as Z,A as a,j as e,N as M,O as E,P as w,B as t,C as i,S as W,U as p,V as _,W as s,G as l,D as y,bw as U,bE as F,az as T,K as k,R as j,aP as G,r as P,o as K,aT as X,I as O,F as H,b3 as J,aU as L,aR as ee,aS as ae,aX as C,b1 as te,b2 as le,v as ne,aQ as V,bz as oe,aZ as se}from"./index.15dfea7e.js";import{Q as S}from"./QTooltip.67e545dc.js";import{Q as ie}from"./QBadge.cc0549d5.js";import{Q as de,a as N}from"./QTable.f6f1e157.js";import{Q as ce}from"./QPage.038a82c4.js";import{_ as re}from"./DialogConfirm.88475932.js";import{_ as ue,a as fe}from"./editDevice.3c919ec2.js";import{Q as me}from"./QSelect.fadc99c9.js";import{Q as _e}from"./QForm.1a5aa1c9.js";import{_ as pe}from"./plugin-vue_export-helper.21dcd24c.js";import"./position-engine.b1da28a3.js";import"./useRules.471ccca6.js";import"./QMenu.e2c685de.js";const ve=[{name:"name",label:"\uC774\uB984",align:"center",field:"name",sortable:!0},{name:"deviceId",label:"Device ID",align:"center",field:"deviceId",sortable:!0},{name:"ipaddress",label:"IP Address",align:"center",field:"ipaddress",sortable:!0},{name:"amx",label:"\uD1B5\uD569\uC81C\uC5B4 \uC8FC\uC7A5\uCE58",align:"center",field:"amx",sortable:!0},{name:"actions",label:"\uAE30\uB2A5",align:"center"}],ge=t("div",{class:"dialog-name"},"Q-SYS INFO",-1),he={class:"caption font-sans"},ye={class:"q-px-md"},be=["href"],we=["href"],xe={class:"q-pl-sm text-black"},ke={__name:"infoQsys",props:["device"],emits:[...B.emits],setup(n,{emit:c}){const{dialogRef:$,onDialogOK:x,onDialogCancel:Q}=B();return(A,q)=>(b(),Z(j,{ref_key:"dialogRef",ref:$},{default:a(()=>[e(M,{class:"q-dialog-plugin bg-trans",style:{"border-radius":"8px"}},{default:a(()=>[e(E,{class:"row no-wrap q-gutter-sm items-center"},{default:a(()=>[e(w,{style:{"margin-top":"10px"},name:"img:qsys.svg",size:"1.5rem"}),t("div",null,[ge,t("div",he,i(n.device.deviceId),1)])]),_:1}),e(E,null,{default:a(()=>[t("div",ye,[e(W,{dense:""},{default:a(()=>[e(p,{dense:""},{default:a(()=>[e(_,null,{default:a(()=>[e(s,null,{default:a(()=>[l("\uC7A5\uCE58 \uC774\uB984")]),_:1}),e(s,{caption:""},{default:a(()=>[l(i(n.device.name),1)]),_:1})]),_:1})]),_:1}),e(p,{dense:""},{default:a(()=>[e(_,null,{default:a(()=>[e(s,null,{default:a(()=>[l("IP Address")]),_:1}),e(s,{caption:""},{default:a(()=>[t("a",{href:`http://${n.device.ipaddress}`,target:"_blank"},[l(i(n.device.ipaddress)+" ",1),e(w,{class:"cursor-pointer",name:"launch",color:"primary"})],8,be)]),_:1})]),_:1})]),_:1}),e(p,{dense:""},{default:a(()=>[e(_,null,{default:a(()=>[e(s,null,{default:a(()=>[l("\uD1B5\uD569\uC81C\uC5B4 \uC8FC\uC7A5\uCE58")]),_:1}),n.device.amx?(b(),Z(s,{key:1,caption:""},{default:a(()=>[t("a",{href:`http://${n.device.amx}`,target:"_blank"},[l(i(n.device.amx)+" ",1),e(w,{class:"cursor-pointer",name:"launch",color:"primary"})],8,we)]),_:1})):(b(),Z(s,{key:0,caption:""},{default:a(()=>[l("\uD1B5\uD569\uC81C\uC5B4 \uC8FC\uC7A5\uCE58 \uC5C6\uC74C")]),_:1}))]),_:1})]),_:1}),e(p,{dense:""},{default:a(()=>[e(_,null,{default:a(()=>[e(s,null,{default:a(()=>[l("\uC5F0\uACB0 \uC0C1\uD0DC")]),_:1}),e(s,{caption:""},{default:a(()=>[l(i(n.device.connected),1)]),_:1})]),_:1})]),_:1}),e(p,{dense:""},{default:a(()=>[e(_,null,{default:a(()=>[e(s,null,{default:a(()=>[l("\uCF54\uC5B4 \uD50C\uB7AB\uD3FC")]),_:1}),e(s,{caption:""},{default:a(()=>[l(i(n.device.EngineStatus.Platform),1)]),_:1})]),_:1})]),_:1}),e(p,{dense:""},{default:a(()=>[e(_,null,{default:a(()=>[e(s,null,{default:a(()=>[l("\uCF54\uC5B4 \uC0C1\uD0DC")]),_:1}),e(s,{caption:""},{default:a(()=>[l(i(n.device.EngineStatus.State),1)]),_:1})]),_:1})]),_:1}),e(p,{dense:""},{default:a(()=>[e(_,null,{default:a(()=>[e(s,null,{default:a(()=>[l("PA \uC2E4\uC2DC\uAC04 \uB370\uC774\uD130 \uC5F0\uB3D9")]),_:1}),e(s,{caption:""},{default:a(()=>[l(i(n.device.ZoneStatusConfigure),1)]),_:1})]),_:1})]),_:1}),e(p,{dense:""},{default:a(()=>[e(_,null,{default:a(()=>[e(s,null,{default:a(()=>[l("\uC800\uC7A5\uC18C \uC815\uBCF4(\uB0A8\uC740\uB7C9/\uC804\uCCB4)")]),_:1}),e(s,{caption:""},{default:a(()=>[l(i(y(U).humanStorageSize(n.device.storage.free))+" / "+i(y(U).humanStorageSize(n.device.storage.total))+" ",1),t("span",xe,i(Math.round(n.device.storage.free/n.device.storage.total*100))+"% \uC5EC\uC720 ",1)]),_:1})]),_:1})]),_:1}),e(p,{dense:""},{default:a(()=>[e(_,null,{default:a(()=>[e(s,null,{default:a(()=>[l("\uB9C8\uC9C0\uB9C9 \uC5C5\uB370\uC774\uD2B8")]),_:1}),e(s,{caption:""},{default:a(()=>[l(i(y(F).formatDate(n.device.updatedAt,"YYYY-MM-DD hh:mm:ss A")),1)]),_:1})]),_:1})]),_:1}),e(p,{dense:""},{default:a(()=>[e(_,null,{default:a(()=>[e(s,null,{default:a(()=>[l("\uC7A5\uCE58 \uB4F1\uB85D \uC2DC\uAC04")]),_:1}),e(s,{caption:""},{default:a(()=>[l(i(y(F).formatDate(n.device.createdAt,"YYYY-MM-DD hh:mm:ss A")),1)]),_:1})]),_:1})]),_:1})]),_:1})])]),_:1}),e(T,{align:"right"},{default:a(()=>[e(k,{round:"",flat:"","no-caps":"",color:"primary",icon:"check_circle",onClick:y(x)},null,8,["onClick"])]),_:1})]),_:1})]),_:1},512))}};const Y=n=>(te("data-v-40ad7f71"),n=n(),le(),n),$e={class:"row no-wrap justify-between items-center q-pa-xs"},Qe={class:"dialog-name row no-wrap items-center q-gutter-x-sm"},Ie=Y(()=>t("div",null,"\uBC29\uC1A1\uAD6C\uAC04 \uC218\uC815",-1)),Se={class:"text-caption"},Ce=Y(()=>t("span",{class:"text-caption"},"\uB3D9\uC77C\uC9C0\uC5ED\uB9CC \uD45C\uC2DC",-1)),qe={class:"table-header-line"},De=Y(()=>t("thead",null,[t("tr",null,[t("th",{style:{width:"50px"}},"\uC9C0\uC5ED"),t("th",{style:{width:"260px"}},"\uC774\uB984"),t("th",{style:{width:"260px"}},"\uB124\uD2B8\uC6CC\uD06C \uC218\uC2E0\uAE30 \uC120\uD0DD")])],-1)),ze={style:{"text-align":"center",width:"50px"}},Ve={style:{width:"260px"}},Pe={style:{width:"260px"}},Ze={__name:"editZoneSettings",props:["device"],emits:[...B.emits],setup(n,{emit:c}){const $=n,{dialogRef:x,onDialogCancel:Q,onDialogOK:A}=B(),{fnNotiWarn:q,fnNotiError:R}=G(),g=P([]),D=P([]),z=P([]),d=P(!1),v=(r,u,f)=>{u(()=>{D.value=z.value.filter(h=>h.name.indexOf(r)>-1)})},o=async r=>{const{data:u}=await C.get(r?`/devices/barix/ip?ip=${r}`:"/devices/barix");return u.devices},I=async(r,u)=>{if(r===null)return g.value[u].destination="";const f=g.value.findIndex(m=>m.destination===r);if(u!==-1&&u!==f)return g.value[u].destination="",q("\uC774\uBBF8 \uC120\uD0DD\uB41C \uB124\uD2B8\uC6CC\uD06C \uC218\uC2E0\uAE30\uC785\uB2C8\uB2E4.");const h=await C.get("/devices/qsys/existszones",{params:{id:r,deviceId:$.device.deviceId}});if(h.data&&h.data.value&&h.data.value.length)return h.data.value.findIndex(m=>m.deviceId===$.device.deviceId),g.value[u].destination="",q("\uC774\uBBF8 \uC120\uD0DD\uB41C \uB124\uD2B8\uC6CC\uD06C \uC218\uC2E0\uAE30\uC785\uB2C8\uB2E4.")};return K(async()=>{g.value=[...$.device.ZoneStatus.map(r=>({name:r.name?r.name:"",Zone:r.Zone,destination:r.destination&&r.destination._id?r.destination._id:""}))],z.value=await o(),D.value=z.value}),(r,u)=>(b(),Z(j,{ref_key:"dialogRef",ref:x,persistent:""},{default:a(()=>[e(M,{class:"q-dialog-plugin bg-trans",style:{"border-radius":"8px","max-width":"1000px",width:"650px"}},{default:a(()=>[e(E,null,{default:a(()=>[t("div",$e,[t("div",Qe,[e(w,{name:"add_circle",color:"primary",size:"sm"}),t("div",null,[Ie,t("div",Se,i(n.device.name)+" "+i(n.device.ipaddress),1)])]),t("div",null,[Ce,e(X,{modelValue:d.value,"onUpdate:modelValue":u[0]||(u[0]=f=>d.value=f),size:"xs"},null,8,["modelValue"])])])]),_:1}),e(_e,{onSubmit:u[1]||(u[1]=f=>y(A)(g.value))},{default:a(()=>[e(E,{class:"row justify-center"},{default:a(()=>[t("table",qe,[De,t("tbody",null,[(b(!0),O(H,null,J(g.value,(f,h)=>(b(),O("tr",{key:h},[t("td",ze,i(f.Zone),1),t("td",Ve,[e(L,{filled:"",dense:"",modelValue:f.name,"onUpdate:modelValue":m=>f.name=m,label:`\uCC44\uB110 ${f.Zone}`},null,8,["modelValue","onUpdate:modelValue","label"])]),t("td",Pe,[e(me,{filled:"",dense:"",clearable:"",modelValue:f.destination,"onUpdate:modelValue":[m=>f.destination=m,m=>I(m,h)],options:D.value,label:`\uCC44\uB110 ${f.Zone} \uB124\uD2B8\uC6CC\uD06C \uC218\uC2E0\uAE30 \uC120\uD0DD`,"option-value":"_id","option-label":"name","hide-selected":"","use-input":"","fill-input":"","input-debounce":"0","emit-value":"","map-options":"",onFilter:v},{prepend:a(()=>[e(w,{name:"place"})]),option:a(m=>[e(p,ee(ae(m.itemProps)),{default:a(()=>[e(_,{avatar:""},{default:a(()=>[e(w,{name:"storage"})]),_:1}),e(_,null,{default:a(()=>[e(s,null,{default:a(()=>[l(i(m.opt.name),1)]),_:2},1024),e(s,{caption:""},{default:a(()=>[l(i(m.opt.ipaddress),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:2},1032,["modelValue","onUpdate:modelValue","options","label"])])]))),128))])])]),_:1}),e(T,{align:"right"},{default:a(()=>[e(k,{round:"",flat:"",color:"red-10",icon:"cancel",onClick:y(Q)},null,8,["onClick"]),e(k,{round:"",flat:"","no-caps":"",color:"primary",icon:"check_circle",type:"submit"})]),_:1})]),_:1})]),_:1})]),_:1},512))}};var Ae=pe(Ze,[["__scopeId","data-v-40ad7f71"]]);const Ne={class:"borderd"},Be={class:"q-px-lg q-py-sm row no-wrap justify-between items-center bg-grey-2"},Ee={class:"row no-wrap items-center q-gutter-x-sm"},Oe=t("div",{class:"font-main"},"\uC5C5\uBB34\uBC29\uC1A1 \uC8FC\uC7A5\uCE58",-1),Ye=["href"],Re=["href"],Ue={key:1,class:"text-caption text-grey"},ta={__name:"QsysPage",setup(n){const c=ne(),{fnNotiInfo:$,fnNotiError:x}=G(),Q=P(""),A=()=>{c.dialog({component:ue,componentProps:{title:"\uC5C5\uBB34\uBC29\uC1A1\uC8FC\uC7A5\uCE58 \uCD94\uAC00",type:"qsys"}}).onOk(async d=>{try{c.loading.show(),await C.post("/devices/qsys",{...d})}catch{x({message:"\uC5C5\uBB34\uBC29\uC1A1 \uC8FC\uC7A5\uCE58 \uCD94\uAC00 \uC624\uB958",caption:"\uC7A0\uC2DC\uD6C4\uC5D0 \uB2E4\uC2DC \uC2DC\uB3C4\uD574 \uC8FC\uC138\uC694."})}finally{await V(),c.loading.hide()}})},q=d=>{c.dialog({component:ke,componentProps:{device:d}})},R=d=>{c.dialog({component:fe,componentProps:{title:"\uC5C5\uBB34\uBC29\uC1A1\uC8FC\uC7A5\uCE58 \uC218\uC815",type:"qsys",device:d}}).onOk(async v=>{try{c.loading.show(),await C.put("/devices/qsys/edit",{...v})}catch{x({message:"\uC5C5\uBB34\uBC29\uC1A1 \uC8FC\uC7A5\uCE58 \uC218\uC815 \uC624\uB958",caption:"\uC7A0\uC2DC\uD6C4\uC5D0 \uB2E4\uC2DC \uC2DC\uB3C4\uD574 \uC8FC\uC138\uC694."})}finally{V(),c.loading.hide()}})},g=d=>{c.dialog({component:Ae,componentProps:{device:d}}).onOk(async v=>{try{c.loading.show(),await C.put("/devices/qsys/updatenames",{deviceId:d.deviceId,arr:v})}catch{x({message:"\uBC29\uC1A1\uAD6C\uAC04 \uC218\uC815 \uC624\uB958",caption:"\uC7A0\uC2DC\uD6C4\uC5D0 \uB2E4\uC2DC \uC2DC\uB3C4\uD574 \uC8FC\uC138\uC694."})}finally{V(),c.loading.hide()}})},D=d=>{$(`${d.name}\uC758 \uC804\uCCB4 \uC124\uC815 \uAC12 \uAC31\uC2E0\uC744 \uC2DC\uC791\uD569\uB2C8\uB2E4.`,"\uC7A0\uC2DC\uB9CC \uAE30\uB2E4\uB824\uC8FC\uC138\uC694."),se("zone:set:device",{...d})},z=d=>{c.dialog({component:re,componentProps:{icon:"delete",iconColor:"red-10",title:"\uC5C5\uBB34\uBC29\uC1A1 \uC8FC\uC7A5\uCE58 \uC0AD\uC81C",message:`${d.name} ${d.ipaddress}`}}).onOk(async()=>{try{c.loading.show(),await C.delete("/devices/qsys",{data:{...d}}),c.loading.hide()}catch{x({message:"\uC5C5\uBB34\uBC29\uC1A1 \uC8FC\uC7A5\uCE58 \uC0AD\uC81C \uC624\uB958",caption:"\uC7A0\uC2DC\uD6C4\uC5D0 \uB2E4\uC2DC \uC2DC\uB3C4\uD574 \uC8FC\uC138\uC694."})}finally{await V(),c.loading.hide()}})};return K(async()=>{try{c.loading.show(),await V()}catch{}finally{c.loading.hide()}}),(d,v)=>(b(),Z(ce,{class:"page"},{default:a(()=>[t("div",Ne,[t("div",Be,[t("div",Ee,[e(w,{name:"img:qsys.svg",color:"primary",size:"sm"}),Oe,t("div",null,[e(w,{class:"cursor-pointer",name:"add_circle",size:"sm",color:"primary",onClick:A},{default:a(()=>[e(S,null,{default:a(()=>[l("\uC7A5\uCE58 \uCD94\uAC00")]),_:1})]),_:1})])]),e(L,{modelValue:Q.value,"onUpdate:modelValue":v[0]||(v[0]=o=>Q.value=o),borderless:"",dense:"",debounce:"300",placeholder:"Search",clearable:""},{append:a(()=>[e(w,{class:"cursor-pointer",name:"search"})]),_:1},8,["modelValue"])]),e(de,{columns:y(ve),rows:y(oe),filter:Q.value},{"body-cell-name":a(o=>[e(N,{props:o},{default:a(()=>[t("div",null,[e(ie,{rounded:"",color:o.row.connected?"primary":"red-10"},null,8,["color"]),l(" "+i(o.value),1)])]),_:2},1032,["props"])]),"body-cell-ipaddress":a(o=>[e(N,{props:o},{default:a(()=>[t("a",{href:`http://${o.value}`,target:"_blank"},i(o.value),9,Ye)]),_:2},1032,["props"])]),"body-cell-amx":a(o=>[e(N,{props:o},{default:a(()=>[o.row.amx?(b(),O("a",{key:0,href:`http://${o.value}`,target:"_blank"},i(o.value),9,Re)):(b(),O("div",Ue," \uD1B5\uD569\uC81C\uC5B4 \uC8FC\uC7A5\uCE58 \uC5C6\uC74C "))]),_:2},1032,["props"])]),"body-cell-actions":a(o=>[e(N,{props:o},{default:a(()=>[t("div",null,[e(k,{round:"",flat:"",color:"primary",icon:"info",size:"sm",onClick:I=>q(o.row)},{default:a(()=>[e(S,null,{default:a(()=>[l("\uC0C1\uC138\uC815\uBCF4")]),_:1})]),_:2},1032,["onClick"]),e(k,{round:"",flat:"",color:"primary",icon:"edit",size:"sm",onClick:I=>R(o.row)},{default:a(()=>[e(S,null,{default:a(()=>[l("\uC218\uC815")]),_:1})]),_:2},1032,["onClick"]),e(k,{round:"",flat:"",color:"blue",icon:"edit_note",size:"sm",onClick:I=>g(o.row)},{default:a(()=>[e(S,null,{default:a(()=>[l("\uBC29\uC1A1\uAD6C\uAC04\uC218\uC815")]),_:1})]),_:2},1032,["onClick"]),e(k,{round:"",flat:"",color:"primary",icon:"refresh",size:"sm",onClick:I=>D(o.row)},{default:a(()=>[e(S,null,{default:a(()=>[l("\uC7AC\uC124\uC815")]),_:1})]),_:2},1032,["onClick"]),e(k,{round:"",flat:"",color:"red-10",icon:"delete",size:"sm",onClick:I=>z(o.row)},{default:a(()=>[e(S,null,{default:a(()=>[l("\uC0AD\uC81C")]),_:1})]),_:2},1032,["onClick"])])]),_:2},1032,["props"])]),_:1},8,["columns","rows","filter"])])]),_:1}))}};export{ta as default};
