import{aB as J,aG as Z,r as C,o as R,u,v as $,x as o,j as n,K as W,L as b,y as a,R as m,C as v,z as r,aH as X,aI as Y,aJ as ee,aK as w,aL as q,aM as ne,A as z,aN as te,aO as ae,aC as oe,I as V,M as se,J as B,aP as Q,aQ as ie,aR as U,E as y,G as L,aS as D,H as P,S as M,U as F,aT as A,aU as le,F as N,aV as de,D as I}from"./index.01937250.js";import{Q as re}from"./QExpansionItem.080cbdf0.js";import{Q as ce}from"./QTooltip.ded1ba0a.js";import{Q as ue}from"./QSelect.313a862b.js";import{_ as me}from"./editSingleName.57fbb34b.js";import{f as G,b as S,u as ve}from"./useBarix.16e9b3e7.js";import{_ as O}from"./plugin-vue_export-helper.21dcd24c.js";const fe={class:"row no-wrap justify-between items-center"},pe={class:"row no-wrap items-center q-gutter-x-md"},_e=a("div",{class:"dialog-name"},"\uBC29\uC1A1\uC9C0\uC5ED\uC124\uC815",-1),ge={class:"dialog-caption row no-wrap items-center cursor-pointer"},ze={__name:"setSigleChannel",props:["device","zone"],setup(e){const{dialogRef:g,onDialogCancel:h,onDialogOK:x}=J(),t=e,l=Z(),s=C([]),f=C(null),p=C(0),_=C(""),j=(c,d,i)=>{d(()=>{s.value=S.value.filter(k=>k.name.indexOf(c)>-1)})},E=async()=>{l.dialog({component:me,componentProps:{title:"\uC9C0\uC5ED \uC774\uB984 \uBCC0\uACBD",caption:`${t.device.name} \uC9C0\uC5ED\uC758 ${_.value} \uC9C0\uC5ED \uC774\uB984\uC744 \uBCC0\uACBD\uD569\uB2C8\uB2E4.`,name:_}}).onOk(async c=>{try{l.loading.show(),await B.put("/devices/qsys/modifiedzonename",{deviceId:t.device.deviceId,zone:t.zone.Zone,name:c}),_.value=c,await Q()}catch(d){console.error(d),l.notify({type:"negative",icon:"warning",message:"\uC9C0\uC5ED \uC774\uB984 \uBCC0\uACBD\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.",capion:"\uC7A0\uC2DC\uD6C4\uC5D0 \uB2E4\uC2DC \uC2DC\uB3C4\uD574\uC8FC\uC138\uC694.",position:"top"})}finally{l.loading.hide()}})},K=async c=>{let d="";if(c!==null){const i=await B.get("/devices/qsys/existszone",{params:{id:c}});if(d=S.value[S.value.findIndex(k=>k._id===c)].ipaddress,i.data&&i.data.value&&i.data.value.length)return i.data.value[0].ZoneStatus.findIndex(H=>H.destination===c)===t.zone.Zone-1?void 0:(f.value=null,l.notify({type:"negative",icon:"warning",position:"top",message:"\uB2E4\uB978 \uBC29\uC1A1 \uAD6C\uAC04\uC5D0\uC11C \uC774\uBBF8 \uC0AC\uC6A9\uC911\uC785\uB2C8\uB2E4."}))}await ie({deviceId:t.device.deviceId,zone:t.zone.Zone,destination:c,ipaddress:d}),await Q()},T=()=>{U.emit("zone:set:channel",{deviceId:t.device.deviceId,...t.zone,gain:p.value})};return R(async()=>{await G(),console.log(t.zone),s.value=S.value,p.value=t.zone.gain,_.value=t.zone.name,t.zone.destination&&t.zone.destination._id&&(f.value=t.zone.destination._id)}),(c,d)=>(u(),$(se,{ref_key:"dialogRef",ref:g},{default:o(()=>[n(W,{class:"q-dialog-plugin",style:{"border-radius":"8px"}},{default:o(()=>[n(b,null,{default:o(()=>{var i;return[a("div",fe,[a("div",pe,[n(m,{name:"location_on",color:"primary",size:"1.5rem"}),a("div",null,[_e,a("div",ge,[v(r(`${e.device.name} ${e.zone.Zone}. ${(i=_.value)!=null?i:"\uC774\uB984\uC5C6\uC74C"} \uCC44\uB110 `)+" ",1),n(m,{name:"edit",color:"primary",onClick:E})])])]),n(m,{class:"cursor-pointer",name:"refresh",size:"sm",color:"primary",onClick:T},{default:o(()=>[n(ce,null,{default:o(()=>[v("\uC0C8\uB85C\uACE0\uCE68")]),_:1})]),_:1})])]}),_:1}),n(b,null,{default:o(()=>[n(ue,{filled:"",dense:"",clearable:"",modelValue:f.value,"onUpdate:modelValue":[d[0]||(d[0]=i=>f.value=i),K],options:s.value,label:"\uB124\uD2B8\uC6CC\uD06C \uC218\uC2E0\uAE30 \uC120\uD0DD","option-value":"_id","option-label":"name","hide-selected":"","use-input":"","fill-input":"","input-debounce":"0","emit-value":"","map-options":"",onFilter:j},{option:o(i=>[n(X,Y(ee(i.itemProps)),{default:o(()=>[n(w,{avatar:""},{default:o(()=>[n(m,{name:"storage"})]),_:1}),n(w,null,{default:o(()=>[n(q,null,{default:o(()=>[v(r(i.opt.name),1)]),_:2},1024),n(q,{caption:""},{default:o(()=>[v(r(i.opt.ipaddress),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options"])]),_:1}),n(b,null,{default:o(()=>[a("div",null,[n(ne,{modelValue:p.value,"onUpdate:modelValue":[d[2]||(d[2]=i=>p.value=i),d[3]||(d[3]=i=>z(te)({deviceId:e.device.deviceId,zone:e.zone.Zone,volume:i}))],filled:"",dense:"",label:"\uBCFC\uB968",type:"number"},{append:o(()=>[n(m,{class:"cursor-pointer",name:e.zone.mute?"volume_off":"volume_up",color:e.zone.mute?"red-10":"primary",onClick:d[1]||(d[1]=i=>z(ae)({deviceId:e.device.deviceId,zone:e.zone.Zone,mute:!e.zone.mute}))},null,8,["name","color"])]),_:1},8,["modelValue"])])]),_:1}),n(oe,{align:"right"},{default:o(()=>[n(V,{round:"",flat:"",color:"red-10",icon:"cancel",onClick:z(h)},null,8,["onClick"]),n(V,{round:"",flat:"","no-caps":"",color:"primary",icon:"check_circle",onClick:z(x)},null,8,["onClick"])]),_:1})]),_:1})]),_:1},512))}};const ye=e=>(M("data-v-5501edbc"),e=e(),F(),e),he={class:"floating-position q-gutter-x-xs row no-wrap items-center"},xe={class:"floating-font"},we={class:""},ke={key:0},Ce={class:"column items-end text-caption"},Ie={class:"row q-gutter-x-xs cursor-pointer"},Se=["href"],$e={key:1},qe={class:"column items-end text-caption"},be=ye(()=>a("div",null,"Local",-1)),Qe={class:"row q-gutter-x-xs"},Ze={__name:"statusDevice",props:["zone","device"],setup(e){ve();const g=Z(),h=t=>t&&t.status?t.streamurl?"green":"yellow":"red",x=(t,l)=>{g.dialog({component:ze,componentProps:{device:t,zone:l}})};return(t,l)=>{var s;return u(),y("div",{class:D(["borderd q-pt-md q-px-sm q-pb-sm q-gutter-sx",e.zone.Active?t.fnCheckPriority(e.zone.Priority):""]),style:{position:"relative","min-width":"100px"}},[a("div",he,[a("span",xe,r(e.zone.gain),1),e.zone.mute?(u(),$(m,{key:0,name:"volume_off",color:"red-10"})):L("",!0),n(m,{class:"cursor-pointer",name:"settings",color:"primary",onClick:l[0]||(l[0]=f=>x(e.device,e.zone))})]),a("div",we,[a("span",null,r(e.zone.Zone)+". ",1),a("span",{class:D(e.zone.name?"text-black text-bold":"text-grey-5")},r((s=e.zone.name)!=null?s:"\uC774\uB984\uC5C6\uC74C"),3)]),e.zone.destination?(u(),y("div",ke,[a("div",null,[n(P,{class:"q-my-sm"})]),a("div",Ce,[a("div",Ie,[v(r(e.zone.destination.name)+" ",1),n(m,{name:"circle",color:h(e.zone.destination)},null,8,["color"])]),a("a",{href:`http://${e.zone.destination.ipaddress}`,target:"_blank"},r(e.zone.destination.ipaddress),9,Se)])])):(u(),y("div",$e,[a("div",null,[n(P,{class:"q-my-sm"})]),a("div",qe,[be,a("div",Qe,"Channel "+r(e.zone.Zone),1)])]))],2)}}};var Ve=O(Ze,[["__scopeId","data-v-5501edbc"]]);const Be=e=>(M("data-v-162c8de9"),e=e(),F(),e),De={class:"row no-wrap justify-start items-center q-gutter-x-sm header-font"},Pe=Be(()=>a("span",null,"\uC9C0\uC5ED \uBC29\uC1A1\uC911",-1)),Ae={class:"row q-pa-md q-gutter-sm"},Ne={__name:"broadcastStatus",setup(e){const g=Z(),h=t=>{let l=0;for(let s=0;s<t.length;s++)t[s].Active&&(l+=1);return l},x=t=>{if(I.value.isAdmin)return!0;if(I.value.zones&&I.value.zones.length){for(let l of I.value.zones)if(l===t)return!0}return!1};return R(async()=>{g.loading.show(),await Q(),await G(),g.loading.hide()}),(t,l)=>(u(!0),y(N,null,A(z(de),(s,f)=>(u(),$(re,{key:f,"header-class":"bg-grey-1"},{header:o(()=>[n(w,{avatar:""},{default:o(()=>[n(m,{color:s.connected?"primary":"red-10",name:"location_on"},null,8,["color"])]),_:2},1024),n(w,null,{default:o(()=>[n(q,null,{default:o(()=>[a("div",null,[v(r(s.name)+" ",1),x(s.deviceId)?(u(),$(m,{key:0,class:"q-ml-sm cursor-pointer",color:"grey",name:"refresh",onClick:le(p=>z(U).emit("zone:set:device",s.deviceId),["prevent","stop"])},null,8,["onClick"])):L("",!0)])]),_:2},1024),n(q,{caption:""},{default:o(()=>[v(r(s.ipaddress),1)]),_:2},1024)]),_:2},1024),n(w,{side:""},{default:o(()=>[a("div",De,[v(r(h(s.ZoneStatus))+" ",1),Pe])]),_:2},1024)]),default:o(()=>[a("div",Ae,[(u(!0),y(N,null,A(s.ZoneStatus,(p,_)=>(u(),y("div",{key:_},[n(Ve,{zone:p,device:s},null,8,["zone","device"])]))),128))])]),_:2},1024))),128))}};var Ee=O(Ne,[["__scopeId","data-v-162c8de9"]]);export{Ee as B};
