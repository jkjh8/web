import{Q as _}from"./QTooltip.5eee741a.js";import{i as S,u as F,R as N,r as Q,o as T,x as r,y as v,z as a,k as t,L as $,M as z,A as k,N as C,D as n,B as i,H as x,J as c,E as d,G as y,ay as q,bB as j}from"./index.e93617ea.js";import{Q as M,a as u}from"./QTable.38ce89a0.js";import{Q as P}from"./QTr.391a535e.js";import{Q as V}from"./QPage.413ef6ad.js";import{u as Y}from"./file.674fa16f.js";import"./QCircularProgress.1a27f2bc.js";const H={class:"row items-center q-gutter-x-sm"},A=k("span",null,"\uD604\uB300 \uD3F4\uB354:",-1),E={key:0},G=["onClick"],L={key:2},R={key:0},w="D:\\Data\\log",ee={__name:"LogPage",setup(I){const D=S("api"),g=F(),B=N(),m=Q([]),f=Q([]),h=async s=>{try{g.loading.show();const{data:o}=await D.get("/files",{params:{folder:s}}),e=o.files.filter(l=>l.type==="folder"),p=o.files.filter(l=>l.type!=="folder");if(m.value=[...e,...p],s!==w){f.value=s.split("\\");const l=f.value;l.pop(),m.value.unshift({name:"..",base:"..",fullpath:l.join("\\"),type:"folder"})}}catch{}finally{g.loading.hide()}},b=s=>{h(s)};return T(()=>{h(w)}),(s,o)=>(r(),v(V,{padding:""},{default:a(()=>[t($,{flat:"",class:"q-pa-md q-my-md"},{default:a(()=>[t(z,{class:"row justify-between"},{default:a(()=>[k("div",H,[t(C,{class:"cursor-pointer",name:"home",size:"sm",color:"primary",onClick:o[0]||(o[0]=e=>b(w))},{default:a(()=>[t(_,null,{default:a(()=>[n("\uD648")]),_:1})]),_:1}),A,k("span",null,i(f.value.join("/")),1)]),t(x,{icon:"arrow_back",round:"",flat:"",size:"sm",color:"primary",onClick:o[1]||(o[1]=e=>c(B).push("/super"))},{default:a(()=>[t(_,null,{default:a(()=>[n("\uB3CC\uC544\uAC00\uAE30 ")]),_:1})]),_:1})]),_:1}),t(z,null,{default:a(()=>[t(M,{columns:[{name:"name",label:"Name",field:"name",align:"left",sortable:!0},{name:"ctime",label:"Time",field:"ctime",align:"center",sortable:!0},{name:"size",label:"Size",field:"size",align:"center",sortable:!0},{name:"actions",label:"Actions",align:"center"}],rows:m.value,pagination:{rowsPerPage:10}},{body:a(e=>[t(P,{props:e},{default:a(()=>[t(u,{key:"name",props:e},{default:a(()=>[e.row.type==="folder"?(r(),d("span",E,[t(C,{name:"folder_open",color:"primary",size:"20px"})])):y("",!0),e.row.type==="folder"?(r(),d("span",{key:1,class:"q-ml-xs cursor-pointer",onClick:p=>b(e.row.fullpath)},i(e.row.base),9,G)):(r(),d("span",L,i(e.row.base),1))]),_:2},1032,["props"]),t(u,{style:{width:"3rem"}},{default:a(()=>[n(i(c(q).formatDate(e.row.ctime,"YYYY-MM-DD HH:mm:ss")),1)]),_:2},1024),t(u,{key:"size",props:e,style:{width:"3rem"}},{default:a(()=>[n(i(e.row.type!=="folder"?c(j).humanStorageSize(e.row.size):""),1)]),_:2},1032,["props"]),t(u,{key:"actions",props:e,style:{width:"3.5rem"}},{default:a(()=>[e.row.name!==".."?(r(),d("div",R,[e.row.type!=="folder"?(r(),v(x,{key:0,round:"",flat:"",icon:"download",color:"primary",size:"sm",onClick:p=>c(Y)().fnDownloadFile(e.row)},{default:a(()=>[t(_,null,{default:a(()=>[n("\uB2E4\uC6B4\uB85C\uB4DC")]),_:1})]),_:2},1032,["onClick"])):y("",!0)])):y("",!0)]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows"])]),_:1})]),_:1})]),_:1}))}};export{ee as default};
