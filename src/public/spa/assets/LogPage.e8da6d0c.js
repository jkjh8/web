import{Q as b}from"./QTooltip.b2000013.js";import{v as x,r as Q,o as F,y as r,z as v,A as a,j as t,P as S,R as z,B as w,S as C,H as c,C as n,J as d,K as _,D as p,bA as B,bt as T,L as q,O as N}from"./index.adce3174.js";import{Q as P,a as m}from"./QTable.dd0d0918.js";import{Q as V}from"./QTr.179f45ca.js";import{Q as Y}from"./QPage.87e14d5f.js";import{u as $}from"./useFiles.c4f02318.js";import"./QCircularProgress.1f03025d.js";const j={class:"row items-center q-gutter-x-sm"},A=w("span",null,"\uD604\uB300 \uD3F4\uB354:",-1),H={key:0},M=["onClick"],L={key:2},E={key:0},y="D:\\Data\\log",X={__name:"LogPage",setup(G){const{fnDownloadFile:D}=$(),g=x(),i=Q([]),u=Q([]),h=async o=>{console.log(o);try{g.loading.show();const{data:l}=await N.get("/files",{params:{folder:o}}),e=l.files.filter(s=>s.type==="folder"),f=l.files.filter(s=>s.type!=="folder");if(i.value=[...e,...f],o!==y){u.value=o.split("\\");const s=u.value;s.pop(),i.value.unshift({name:"..",base:"..",fullpath:s.join("\\"),type:"folder"})}console.log(i.value)}catch{}finally{g.loading.hide()}},k=o=>{h(o)};return F(()=>{h(y)}),(o,l)=>(r(),v(Y,{padding:""},{default:a(()=>[t(S,{flat:"",class:"q-pa-md q-my-md"},{default:a(()=>[t(z,null,{default:a(()=>[w("div",j,[t(C,{class:"cursor-pointer",name:"home",size:"sm",color:"primary",onClick:l[0]||(l[0]=e=>k(y))},{default:a(()=>[t(b,null,{default:a(()=>[c("\uD648")]),_:1})]),_:1}),A,w("span",null,n(u.value.join("/")),1)])]),_:1}),t(z,null,{default:a(()=>[t(P,{columns:[{name:"name",label:"Name",field:"name",align:"left",sortable:!0},{name:"ctime",label:"Time",field:"ctime",align:"center",sortable:!0},{name:"size",label:"Size",field:"size",align:"center",sortable:!0},{name:"actions",label:"Actions",align:"center"}],rows:i.value,pagination:{rowsPerPage:10}},{body:a(e=>[t(V,{props:e},{default:a(()=>[t(m,{key:"name",props:e},{default:a(()=>[e.row.type==="folder"?(r(),d("span",H,[t(C,{name:"folder_open",color:"primary",size:"20px"})])):_("",!0),e.row.type==="folder"?(r(),d("span",{key:1,class:"q-ml-xs cursor-pointer",onClick:f=>k(e.row.fullpath)},n(e.row.base),9,M)):(r(),d("span",L,n(e.row.base),1))]),_:2},1032,["props"]),t(m,{style:{width:"3rem"}},{default:a(()=>[c(n(p(B).formatDate(e.row.ctime,"YYYY-MM-DD HH:mm:ss")),1)]),_:2},1024),t(m,{key:"size",props:e,style:{width:"3rem"}},{default:a(()=>[c(n(e.row.type!=="folder"?p(T).humanStorageSize(e.row.size):""),1)]),_:2},1032,["props"]),t(m,{key:"actions",props:e,style:{width:"3.5rem"}},{default:a(()=>[e.row.name!==".."?(r(),d("div",E,[e.row.type!=="folder"?(r(),v(q,{key:0,round:"",flat:"",icon:"download",color:"primary",size:"sm",onClick:f=>p(D)(e.row)},{default:a(()=>[t(b,null,{default:a(()=>[c("\uB2E4\uC6B4\uB85C\uB4DC")]),_:1})]),_:2},1032,["onClick"])):_("",!0)])):_("",!0)]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows"])]),_:1})]),_:1})]),_:1}))}};export{X as default};
