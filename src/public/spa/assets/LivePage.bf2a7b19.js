import{A as U,Y as P,D as r,E as C,G as t,H as s,j as e,Q as w,N as b,bk as ke,I as l,R as h,L as S,bt as T,K as v,bu as a,bv as $e,F as I,c as ce,bd as D,r as M,b as de,aL as ue,U as E,W as V,aO as N,aF as B,M as z,V as F,bw as qe,aP as me,bx as ee,k as Ce,o as L,aJ as te,by as pe,bz as Y,bA as Ve,bB as O,bC as J,bD as se,Z as _e,_ as fe,h as j,a7 as ze,bE as Se,bF as Ie,bG as oe,bH as Qe,bI as ae}from"./index.0b79a79b.js";import{Q as ve,f as Pe,a as ge,b as R,c as le}from"./useFiles.e11414d8.js";import{Q as Me}from"./QPage.deeb2a65.js";import{Q as Ze}from"./QSpace.2849927f.js";import{Q as ye}from"./QTooltip.81f3c6b2.js";import{Q as W}from"./QBadge.efdbe6ff.js";import{_ as je}from"./dialogConfirm.6f422389.js";import{Q as K,b as ne,c as re}from"./QSelect.a4a4b107.js";import{Q as we,a as G}from"./QTable.05786466.js";import{Q as Ue}from"./QExpansionItem.9185c962.js";import{u as A}from"./use-dialog-plugin-component.8a73145c.js";import{Q as ie}from"./QTr.78b5909c.js";import{Q as H}from"./QTd.6a55c5b0.js";import{f as Te}from"./format.cbf00d5d.js";import{u as X}from"./usePlayer.60094173.js";import{_ as he}from"./plugin-vue_export-helper.21dcd24c.js";import"./QMenu.6c53ffba.js";import"./QSlideTransition.75dc1e99.js";import"./dialogInput.c35a1679.js";import"./QLinearProgress.3d79d0c0.js";const De=()=>{const m=U();return{fnBroadcastCancel:i=>{m.dialog({component:je,componentProps:{title:"\uBC29\uC1A1 \uCDE8\uC18C",icon:"cancel",iconColor:"red-10",caption:`${i.name} \uC9C0\uC5ED \uBC29\uC1A1\uC744 \uCDE8\uC18C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?`}}).onOk(async()=>{try{m.loading.show(),await P.get("/devices/qsys/cancel",{params:{device:{name:i.name,deviceId:i.deviceId,ipaddress:i.ipaddress,pageId:i.pageId}}}),m.loading.hide()}catch(n){console.error(n)}})}}},Ne={class:"row fit tiems-center q-gutter-x-sm"},Ae={class:"row items-center q-gutter-x-sm"},Be={__name:"statusTree",setup(m){const{fnBroadcastCancel:u}=De(),i=n=>{let _=0;for(let c=0;c<n.length;c++)n[c].Active&&(_+=1);return _};return(n,_)=>(r(),C(ve,{nodes:l(T),"node-key":"_id","children-key":"ZoneStatus","no-node-label":"\uBC29\uC1A1\uAD6C\uAC04\uC774 \uC5C6\uC2B5\uB2C8\uB2E4"},{"header-root":t(c=>[s("div",Ne,[e(w,{color:c.node.connected?"primary":"red-10",name:"location_on",size:"xs"},null,8,["color"]),s("div",null,b(c.node.name),1),e(Ze),s("div",null,b(i(c.node.ZoneStatus))+"\uAC1C \uC9C0\uC5ED \uBC29\uC1A1\uC911",1),i(c.node.ZoneStatus)?(r(),C(w,{key:0,class:"cursor-pointer",name:"cancel",color:"red-10",onClick:ke(g=>l(u)(c.node),["prevent","stop"])},{default:t(()=>[e(ye,null,{default:t(()=>[h("\uBC29\uC1A1\uCDE8\uC18C")]),_:1})]),_:2},1032,["onClick"])):S("",!0)])]),"default-header":t(c=>[s("div",Ae,[s("div",null,[h(b(c.node.name?c.node.name:"no name")+" ",1),c.node.Active?(r(),C(W,{key:0,color:"green"},{default:t(()=>[h(" ONAIR ")]),_:1})):S("",!0)])])]),_:1},8,["nodes"]))}},Fe={class:"row no-wrap justify-start items-center q-gutter-x-sm"},Re=s("div",{class:"card-name"},"\uBC29\uC1A1\uBAA8\uB4DC",-1),Oe={__name:"pageMode",setup(m){return(u,i)=>(r(),v(I,null,[s("div",Fe,[e(w,{name:"list",color:"primary",size:"sm"}),Re]),e(K,{modelValue:l(a).Mode,"onUpdate:modelValue":i[0]||(i[0]=n=>l(a).Mode=n),options:l($e),dense:"",filled:"","map-options":"","emit-value":""},null,8,["modelValue","options"])],64))}},Ee={class:"row no-wrap justify-between items-center"},Le={class:"row no-wrap justify-start items-center q-gutter-x-sm"},Ke=s("div",{class:"card-name"},"\uCC60\uC784",-1),Ge={__name:"pagePreamble",setup(m){const u=ce({get(){return a.Preamble==="Chime ascending triple.wav"},set(){return a.Preamble?a.Preamble="":a.Preamble="Chime ascending triple.wav"}});return(i,n)=>(r(),v("div",Ee,[s("div",Le,[e(w,{name:"notifications",color:"primary",size:"sm"}),Ke]),e(D,{modelValue:u.value,"onUpdate:modelValue":n[0]||(n[0]=_=>u.value=_)},null,8,["modelValue"])]))}},He={class:"row no-wrap justify-start items-center q-gutter-x-sm"},Ye=s("div",{class:"card-name"},"\uC6B0\uC120\uC21C\uC704",-1),Je={__name:"pagePriority",setup(m){return(u,i)=>(r(),v(I,null,[s("div",He,[e(w,{name:"priority_high",color:"primary",size:"sm"}),Ye]),e(K,{modelValue:l(a).Priority,"onUpdate:modelValue":i[0]||(i[0]=n=>l(a).Priority=n),dense:"",filled:"",options:[{value:1,label:"EM"},{value:3,label:"Nomal"}],"emit-value":"","map-options":""},null,8,["modelValue"])],64))}},We={class:"row no-wrap items-center q-gutter-x-md"},Xe=s("div",{class:"dialog-name"},"\uBC29\uC1A1\uAD6C\uAC04\uC120\uD0DD",-1),et={class:"dialog-caption"},tt={class:"q-pa-sm"},st={class:"q-px-sm"},ot={__name:"selectBrocastZones",props:["sel"],emits:[...A.emits],setup(m,{emit:u}){const{dialogRef:i,onDialogCancel:n,onDialogHide:_,onDialogOK:c}=A(),g=m,d=M({}),x=M([]),f=ce(()=>{let p=0;for(let k in d.value)p+=d.value[k].length;return p}),o=(p,k,q)=>{p?d.value[k.deviceId]=[...k.ZoneStatus]:d.value[k.deviceId]=[]},y=(p,k,q)=>{p&&p.length?p.length===k.ZoneStatus.length?x.value[q]=!0:x.value[q]=null:x.value[q]=!1},Q=()=>{let p=[];for(let k in d.value)d.value[k].length&&p.push({deviceId:k,value:d.value[k]});c(p)};return de(async()=>{await ue();for(let p=0;p<T.value.length;p++){let k=T.value[p].deviceId,q=g.sel.findIndex(Z=>Z.deviceId===k);q!==-1?(d.value[k]=[...g.sel[q].value],d.value[k].length===T.value[p].ZoneStatus.length?x.value[p]=!0:x.value[p]=null):(d.value[k]=[],x.value[p]=!1)}}),(p,k)=>(r(),C(E,{ref_key:"dialogRef",ref:i,persistent:""},{default:t(()=>[e(F,{style:{"max-width":"900px",width:"80%","min-width":"500px","border-radius":"6px"}},{default:t(()=>[e(V,null,{default:t(()=>[s("div",We,[e(w,{name:"location_on",color:"primary",size:"1.5rem"}),s("div",null,[Xe,s("div",et,b(f.value)+"\uAC1C \uBC29\uC1A1\uAD6C\uAC04 \uC120\uD0DD",1)])])]),_:1}),e(V,null,{default:t(()=>[(r(!0),v(I,null,N(l(T),(q,Z)=>(r(),v("div",{key:Z,class:"q-px-md"},[e(Ue,{class:"q-pa-xs col-xs-6 col-sm-3 col-md-2 bg-grey-1"},{header:t(()=>[e(ne,{avatar:""},{default:t(()=>[e(D,{modelValue:x.value[Z],"onUpdate:modelValue":[$=>x.value[Z]=$,$=>o($,q,Z)]},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(ne,null,{default:t(()=>[e(re,null,{default:t(()=>[h(b(q.name),1)]),_:2},1024),e(re,{caption:""},{default:t(()=>[h(b(q.ipaddress),1)]),_:2},1024)]),_:2},1024)]),default:t(()=>[e(we,{rows:q.ZoneStatus,columns:[],"row-key":"Zone",selection:"multiple",selected:d.value[q.deviceId],"onUpdate:selected":[$=>d.value[q.deviceId]=$,$=>y($,q,Z)],grid:"",pagination:{rowsPerPage:0},"hide-header":"","hide-bottom":""},{item:t($=>[s("div",{class:"q-pa-xs col-xs-6 col-sm-3 col-md-2 grid-style-transition",style:qe($.selected?"transform: scale(0.95);":"")},[s("div",{class:me(["border",$.selected?p.$q.dark.isActive?"bg-grey-10":"bg-grey-3":""])},[s("div",tt,[e(D,{dense:"",modelValue:$.selected,"onUpdate:modelValue":be=>$.selected=be,label:$.row.name?`${$.row.Zone}. ${$.row.name}`:`${$.row.Zone}. No Name`},null,8,["modelValue","onUpdate:modelValue","label"])])],2)],4)]),_:2},1032,["rows","selected","onUpdate:selected"])]),_:2},1024)]))),128))]),_:1}),e(B,{align:"right"},{default:t(()=>[s("div",st,[e(z,{round:"",flat:"",color:"red-10",icon:"cancel",onClick:l(n)},null,8,["onClick"]),e(z,{round:"",flat:"","no-caps":"",color:"primary",icon:"check_circle",onClick:Q})])]),_:1})]),_:1})]),_:1},512))}},at={class:"row no-wrap justify-between items-center"},lt={class:"row no-wrap justify-start items-center q-gutter-x-sm"},nt=s("div",{class:"card-name"},"\uBC29\uC1A1\uAD6C\uAC04",-1),rt={key:0,class:"bg-grey-2 q-py-sm q-px-sm q-mt-sm q-gutter-x-sm row justify-start items-center",style:{"border-radius":"2px","min-height":"40px"}},it={key:1,class:"bg-grey-2 q-pa-sm q-mt-sm row justify-start items-center",style:{"border-radius":"2px",height:"40px"}},ct=s("span",null," \uC120\uD0DD\uB41C \uBC29\uC1A1\uAD6C\uAC04\uC774 \uC5C6\uC2B5\uB2C8\uB2E4. ",-1),dt=[ct],ut={__name:"pageZones",props:["zones"],emits:["updateZones"],setup(m,{emit:u}){const i=U(),n=()=>{i.dialog({component:ot,componentProps:{sel:a.devices}}).onOk(_=>{console.log(_),a.devices=_,ee(a.devices)})};return a.devices&&a.devices.length&&ee(a.devices),(_,c)=>(r(),v(I,null,[s("div",at,[s("div",lt,[e(w,{name:"location_on",color:"primary",size:"sm"}),nt]),e(w,{class:"cursor-pointer",name:"add_circle",color:"primary",size:"sm",onClick:n})]),l(a).zones&&l(a).zones.length?(r(),v("div",rt,[(r(!0),v(I,null,N(l(a).zones,(g,d)=>(r(),C(W,{key:d},{default:t(()=>[h(b(g),1)]),_:2},1024))),128))])):(r(),v("div",it,dt))],64))}},mt={class:"row no-wrap justify-start items-center q-gutter-x-sm"},pt=s("div",{class:"card-name"},"\uBC29\uC1A1\uC2DC\uAC04(\uCD08)",-1),_t=s("div",{class:"text-caption text-red",style:{"text-align":"right"}}," \uCD5C\uB300 \uBC29\uC1A1 \uC2DC\uAC04\uC740 4\uBD84(240\uCD08)\uC73C\uB85C \uC81C\uD55C \uB429\uB2C8\uB2E4. ",-1),ft={__name:"pageLive",setup(m){return(u,i)=>(r(),v(I,null,[s("div",mt,[e(w,{name:"timer",color:"primary",size:"sm"}),pt]),e(K,{modelValue:l(a).MaxPageTime,"onUpdate:modelValue":i[0]||(i[0]=n=>l(a).MaxPageTime=n),filled:"",options:[30,60,90,120,150,180,210,240]},null,8,["modelValue"]),_t],64))}},vt={class:"row no-wrap items-center q-gutter-x-md"},gt=s("div",null,[s("div",{class:"dialog-name"},"\uD30C\uC77C\uC120\uD0DD")],-1),yt={key:0},wt=["onClick"],ht={key:2},xt={__name:"selectFile",props:["file"],setup(m){const{dialogRef:u,onDialogCancel:i,onDialogOK:n}=A(),_=m,{fnPlayStart:c}=X(),g=M(25),d=M([]);return de(async()=>{await Pe(),_.file&&(d.value[0]=_.file)}),(x,f)=>(r(),C(E,{ref_key:"dialogRef",ref:u,persistent:""},{default:t(()=>[e(F,{class:"q-dialog-plugin",style:{"border-radius":"8px",width:"90%","max-width":"800px"}},{default:t(()=>[e(V,null,{default:t(()=>[s("div",vt,[e(w,{name:"save",color:"primary",size:"1.5rem"}),gt])]),_:1}),e(V,null,{default:t(()=>[e(ge,{modelValue:g.value,"onUpdate:modelValue":f[2]||(f[2]=o=>g.value=o)},{before:t(()=>[e(ve,{nodes:l(R).folders,selected:l(R).selectedFolder,"onUpdate:selected":[f[0]||(f[0]=o=>l(R).selectedFolder=o),l(le)],"node-key":"path","no-selection-unset":"","selected-color":"primary"},null,8,["nodes","selected","onUpdate:selected"])]),after:t(()=>[e(we,{columns:[{name:"name",label:"NAME",field:"name",align:"left",sortable:!0},{name:"size",label:"SIZE",field:"size",sortable:!0}],rows:l(R).files,flat:"",dense:"","row-key":"name",selection:"single",selected:d.value,"onUpdate:selected":f[1]||(f[1]=o=>d.value=o),pagination:{rowsPerPage:0},"hide-bottom":""},{header:t(o=>[e(ie,{props:o},{default:t(()=>[e(G,{style:{width:"2rem"}},{default:t(()=>[e(D,{size:"22px",modelValue:o.selected,"onUpdate:modelValue":y=>o.selected=y},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(G,{key:"name",props:o},{default:t(()=>[h(" NAME ")]),_:2},1032,["props"]),e(G,{key:"size",props:o,style:{width:"2.5rem"}},{default:t(()=>[h(" SIZE ")]),_:2},1032,["props"])]),_:2},1032,["props"])]),body:t(o=>[e(ie,{props:o},{default:t(()=>[e(H,{style:{width:"2rem"}},{default:t(()=>[o.row.type!=="folder"?(r(),C(D,{key:0,size:"22px",modelValue:o.selected,"onUpdate:modelValue":y=>o.selected=y},null,8,["modelValue","onUpdate:modelValue"])):S("",!0)]),_:2},1024),e(H,{key:"name",props:o},{default:t(()=>[o.row.type==="folder"?(r(),v("span",yt,[e(w,{name:"folder_open",color:"primary",size:"16px"})])):S("",!0),o.row.type==="folder"?(r(),v("span",{key:1,class:"q-ml-xs cursor-pointer",onClick:y=>l(le)(o.row.fullpath)},b(o.row.name),9,wt)):(r(),v("span",ht,[h(b(o.row.name)+" ",1),e(z,{flat:"",round:"",size:"xs",color:"primary",icon:"play_arrow",onClick:y=>l(c)(o.row)},null,8,["onClick"])]))]),_:2},1032,["props"]),e(H,{key:"size",props:o,style:{width:"2.5rem"}},{default:t(()=>[h(b(o.row.type!=="folder"?l(Te).humanStorageSize(o.row.size):""),1)]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","selected"])]),_:1},8,["modelValue"])]),_:1}),e(B,{align:"right"},{default:t(()=>[e(z,{round:"",flat:"",color:"red-10",icon:"cancel",onClick:l(i)},null,8,["onClick"]),e(z,{round:"",flat:"","no-caps":"",color:"primary",icon:"check_circle",onClick:f[3]||(f[3]=o=>l(n)(d.value))})]),_:1})]),_:1})]),_:1},512))}},bt={class:"row no-wrap justify-between items-center"},kt={class:"row no-wrap justify-start items-center q-gutter-x-sm"},$t=s("div",{class:"card-name"},"\uD30C\uC77C",-1),qt={key:0,class:"bg-grey-2 q-pa-sm q-mt-sm q-gutter-x-sm row no-wrap justify-between items-center",style:{"border-radius":"2px","min-height":"40px"}},Ct={key:1,class:"bg-grey-2 q-pa-sm q-mt-sm row justify-start items-center",style:{"border-radius":"2px",height:"40px"}},Vt=s("span",null," \uC120\uD0DD\uB41C \uD30C\uC77C\uC774 \uC5C6\uC2B5\uB2C8\uB2E4. ",-1),zt=[Vt],St={__name:"pageFile",setup(m){const u=U(),{fnPlayStart:i}=X(),n=()=>{u.dialog({component:xt,componentProps:{file:a.file}}).onOk(_=>{a.file=_[0]})};return(_,c)=>(r(),v(I,null,[s("div",bt,[s("div",kt,[e(w,{name:"save",color:"primary",size:"sm"}),$t]),e(w,{class:"cursor-pointer",name:"add_circle",color:"primary",size:"sm",onClick:n})]),l(a).file?(r(),v("div",qt,[s("div",null,[e(w,{class:"cursor-pointer",name:"play_arrow",color:"primary",size:"xs",onClick:c[0]||(c[0]=g=>l(i)(l(a).file))}),h(" "+b(l(a).file.base),1)]),e(w,{class:"cursor-pointer q-mr-sm",name:"cancel",color:"red-10",size:"sm",onClick:c[1]||(c[1]=g=>l(a).file=null)})])):(r(),v("div",Ct,zt))],64))}},It={class:"col q-gutter-y-sm"},Qt={class:"row no-wrap justify-between items-center"},Pt={class:"row no-wrap justify-between items-center q-gutter-x-sm"},Mt=s("div",{class:"card-name"},"\uBA54\uC2DC\uC9C0",-1),Zt={class:"row no-wrap justify-between items-center"},jt={key:0,class:"row no-wrap justify-between items-center q-gutter-x-sm"},Ut={key:1,class:"text-red-10 row items-center"},Tt={__name:"pageTts",setup(m){const u=U(),{fnPlayStart:i}=X(),n=Ce({voices:[],voice:"",rate:200,text:""}),_=async()=>{if(!n.voice)return g();if(!n.text)return d();try{u.loading.show(),a.file&&await P.delete("/broadcast/tts",{data:{file:a.file}});const f=await P.put("/broadcast/tts",{...n});a.file=f.data.value.file}catch(f){console.error(f)}finally{u.loading.hide()}},c=()=>{u.notify({type:"negative",icon:"error",message:"TTS \uC5D4\uC9C4 \uC624\uB958",caption:"\uC624\uB958\uAC00 \uACC4\uC18D\uB418\uBA74 \uAD00\uB9AC\uC790\uC5D0\uAC8C \uBB38\uC758 \uD574\uC8FC\uC138\uC694.",position:"top",timeout:3e3})},g=()=>{u.notify({type:"warning",icon:"warning",message:"TTS \uC74C\uC131\uC744 \uC120\uD0DD\uD574 \uC8FC\uC138\uC694.",caption:"\uC74C\uC131 \uD569\uC131\uC744 \uC704\uD574\uC11C \uC74C\uC131\uC744 \uC120\uD0DD\uD574 \uC8FC\uC138\uC694",position:"top",timeout:3e3})},d=()=>{u.notify({type:"warning",icon:"warning",message:"TTS \uBA54\uC2DC\uC9C0\uB97C \uC785\uB825\uD574 \uC8FC\uC138\uC694.",caption:"\uC74C\uC131 \uD569\uC131\uC744 \uC704\uD574\uC11C TTS \uBA54\uC2DC\uC9C0\uB97C \uC785\uB825\uD574 \uC8FC\uC138\uC694",position:"top",timeout:3e3})},x=async()=>{try{const f=await P.get("/broadcast/tts");n.voices=f.data.value.voices,n.rate=f.data.value.rate}catch(f){console.error(f),c()}};return L(async()=>{a.file=null,await x()}),(f,o)=>(r(),v("div",It,[s("div",Qt,[s("div",Pt,[e(w,{name:"volume_up",color:"primary",size:"sm"}),Mt])]),e(K,{options:n.voices,modelValue:n.voice,"onUpdate:modelValue":o[0]||(o[0]=y=>n.voice=y),"option-value":"id","option-label":"name",filled:"",dense:"",label:"\uC74C\uC131"},null,8,["options","modelValue"]),e(te,{modelValue:n.rate,"onUpdate:modelValue":o[1]||(o[1]=y=>n.rate=y),type:"number",filled:"",dense:"",label:"\uC74C\uC131\uC18D\uB3C4"},null,8,["modelValue"]),e(te,{modelValue:n.text,"onUpdate:modelValue":o[2]||(o[2]=y=>n.text=y),filled:"",type:"textarea",placeholder:"\uBA54\uC2DC\uC9C0\uB97C \uC785\uB825\uD558\uC138\uC694.",label:"\uBA54\uC2DC\uC9C0"},null,8,["modelValue"]),s("div",Zt,[l(a).file?(r(),v("div",jt,[s("div",null,[e(w,{class:"cursor-pointer",name:"play_arrow",color:"primary",size:"sm",onClick:o[3]||(o[3]=y=>l(i)(l(a).file))}),h(" "+b(l(a).file.base),1)]),e(w,{class:"cursor-pointer q-mr-sm",name:"cancel",color:"red-10",size:"sm",onClick:o[4]||(o[4]=y=>l(a).file=null)})])):(r(),v("div",Ut,[e(w,{name:"warning"}),h(" \uD569\uC131\uB41C \uD30C\uC77C\uC774 \uC5C6\uC2B5\uB2C8\uB2E4. ")])),e(z,{rounded:"",unelevated:"",color:"primary",onClick:_},{default:t(()=>[h("\uC74C\uC131 \uD569\uC131")]),_:1})])]))}};const xe=m=>(_e("data-v-1a9beec3"),m=m(),fe(),m),Dt={class:"q-dialog-plugin broadcast-popup"},Nt={key:0},At={class:"row justify-center q-pt-md text-grey"},Bt={class:"fit column q-gutter-y-sm",style:{width:"50%"}},Ft={style:{"text-align":"right"}},Rt=xe(()=>s("div",{class:"name"},"\uBC29\uC1A1\uBAA8\uB4DC",-1)),Ot={style:{"text-align":"right"}},Et=xe(()=>s("div",{class:"name"},"\uBC29\uC1A1\uAD6C\uAC04",-1)),Lt={class:"fit row justify-end"},Kt={class:"fit row no-wrap justify-center items-center q-mb-md q-gutter-x-sm"},Gt={__name:"pageLive",setup(m){const{dialogRef:u,onDialogCancel:i,onDialogOK:n}=A(),{fnZoneActive:_}=pe(),c=M(!1),g=M(0);let d=null;const x=async()=>{c.value=!0;try{Y();const o=await J(a.devices),y=await P.put("/broadcast/active",{devices:o.map(p=>({deviceId:p.deviceId,Zones:p.params.Zones}))});if(console.log(y),y&&y.active)return _();const Q=await P.put("/broadcast/live",{...a,devices:o,zones:a.zones});se.value=Q.data.idx}catch(o){console.error(o)}d=setInterval(()=>{g.value++},1e3)},f=async()=>{try{const o=await P.get("/broadcast/stop",{params:{idx:se.value}});console.log(o)}catch(o){console.error(o)}c.value=!1,clearInterval(d),d=null,g.value=0};return L(()=>{Y()}),(o,y)=>(r(),C(E,{ref_key:"dialogRef",ref:u,persistent:""},{default:t(()=>[s("div",Dt,[e(w,{class:"floatingIcon cursor-pointer",name:"cancel",color:"red",size:"sm",onClick:l(i)},{default:t(()=>[e(ye,null,{default:t(()=>[h("Close")]),_:1})]),_:1},8,["onClick"]),e(F,{class:"transBG"},{default:t(()=>[e(V,null,{default:t(()=>[s("div",{class:me(["q-pa-md row no-wrap text-grey-2",c.value?"justify-between":"justify-end"]),style:{height:"90%","min-height":"300px","font-family":"'NotoSansKR'"}},[c.value?(r(),v("div",Nt,[e(Ve,{color:"primary",size:"14rem",thickness:8}),s("div",At," \uBC29\uC1A1\uC911 "+b(g.value)+"\uCD08 \uACBD\uACFC ",1)])):S("",!0),s("div",Bt,[s("div",Ft,[Rt,s("div",null,b(l(a).Mode),1)]),s("div",Ot,[Et,s("div",Lt,[(r(!0),v(I,null,N(l(a).zones,(Q,p)=>(r(),C(W,{key:p,class:"q-ml-xs"},{default:t(()=>[h(b(Q),1)]),_:2},1024))),128))])]),s("div",null,[(r(!0),v(I,null,N(l(O),(Q,p)=>(r(),v("div",{key:p,style:{"text-align":"right"}},b(l(O)[p]),1))),128))])])],2)]),_:1}),e(B,null,{default:t(()=>[s("div",Kt,[e(z,{style:{width:"10rem"},unelevated:"",color:"primary",onClick:x},{default:t(()=>[h("\uC2DC\uC791")]),_:1}),e(z,{style:{width:"10rem"},unelevated:"",color:"red-10",onClick:f},{default:t(()=>[h("\uC911\uC9C0")]),_:1})])]),_:1})]),_:1})])]),_:1},512))}};var Ht=he(Gt,[["__scopeId","data-v-1a9beec3"]]);const Yt=[j("circle",{cx:"50",cy:"50",r:"48",fill:"none","stroke-width":"4","stroke-miterlimit":"10",stroke:"currentColor"}),j("line",{"stroke-linecap":"round","stroke-width":"4","stroke-miterlimit":"10",stroke:"currentColor",x1:"50",y1:"50",x2:"85",y2:"50.5"},[j("animateTransform",{attributeName:"transform",type:"rotate",from:"0 50 50",to:"360 50 50",dur:"2s",repeatCount:"indefinite"})]),j("line",{"stroke-linecap":"round","stroke-width":"4","stroke-miterlimit":"10",stroke:"currentColor",x1:"50",y1:"50",x2:"49.5",y2:"74"},[j("animateTransform",{attributeName:"transform",type:"rotate",from:"0 50 50",to:"360 50 50",dur:"15s",repeatCount:"indefinite"})])];var Jt=ze({name:"QSpinnerClock",props:Se,setup(m){const{cSize:u,classes:i}=Ie(m);return()=>j("svg",{class:i.value,width:u.value,height:u.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg"},Yt)}});const Wt=m=>(_e("data-v-805cf758"),m=m(),fe(),m),Xt={class:"q-dialog-plugin broadcast-popup"},es={class:"row no-wrap justify-start items-center q-gutter-x-sm"},ts=Wt(()=>s("div",{class:"name text-grey-2"},"\uBA54\uC2DC\uC9C0 \uBC29\uC1A1",-1)),ss={key:0,class:"text-grey-5 row no-wrap items-center q-gutter-x-sm q-px-md"},os={style:{"font-size":"2rem"}},as={class:"text-white description q-pa-md"},ls={class:"fit row no-wrap justify-center q-gutter-x-sm"},ns={__name:"pageMessage",setup(m){const u=new AbortController,{dialogRef:i,onDialogCancel:n,onDialogOK:_}=A(),c=M(3),g=M(!1);let d=null;const x=()=>{d&&clearInterval(d),u.abort(),n()};return L(async()=>{try{Y(),oe({deviceId:"all",message:`\uD30C\uC77C \uC774\uB984: ${a.file.base}`}),await Qe(u)}catch(f){console.error(f)}g.value=!0,oe({deviceId:"all",message:"\uBC29\uC1A1\uC744 \uC2DC\uC791\uD569\uB2C8\uB2E4."}),d=setInterval(()=>{c.value>0?c.value-=1:(clearInterval(d),_(a))},1e3)}),(f,o)=>(r(),C(E,{ref_key:"dialogRef",ref:i,persistent:""},{default:t(()=>[s("div",Xt,[e(F,{class:"transBG"},{default:t(()=>[e(V,null,{default:t(()=>[s("div",es,[e(w,{name:"mic",color:"primary",size:"sm"}),ts])]),_:1}),e(V,{style:{"min-height":"200px"}},{default:t(()=>[g.value?(r(),v("div",ss,[e(Jt,{size:"md"}),s("span",os,b(c.value),1)])):S("",!0),s("div",as,[(r(!0),v(I,null,N(l(O),(y,Q)=>(r(),v("div",{key:Q},b(l(O)[Q]),1))),128))])]),_:1}),e(B,null,{default:t(()=>[s("div",ls,[g.value?(r(),C(z,{key:0,style:{width:"8rem"},color:"primary",onClick:o[0]||(o[0]=y=>l(_)(l(a)))},{default:t(()=>[h("\uC2DC\uC791")]),_:1})):S("",!0),e(z,{style:{width:"8rem"},color:"red-10",onClick:x},{default:t(()=>[h("\uCDE8\uC18C")]),_:1})])]),_:1})]),_:1})])]),_:1},512))}};var rs=he(ns,[["__scopeId","data-v-805cf758"]]);const is={class:"full-width q-px-sm q-mb-md"},cs={__name:"pageStart",props:["zones"],setup(m){const u=m,{fnNoZones:i,fnNoFile:n,fnZoneActive:_}=pe(),c=U(),g=()=>{if(a.devices===null||a.devices.length===0)return i();if(a.Mode!=="live"&&(a.file===null||Object.keys(a.file).length===0))return n();switch(a.Mode){case"live":c.dialog({component:Ht,componentProps:{zones:u.zones}});break;case"message":case"tts":c.dialog({component:rs}).onOk(async d=>{const x=await J(d.devices),f=await P.put("/broadcast/active",{devices:x.map(o=>({deviceId:o.deviceId,Zones:o.params.Zones}))});f&&f.active&&(_(),await ae()),await P.put("/broadcast/live/message",{...d,devices:await J(d.devices),zones:a.zones})}).onCancel(async()=>{await ae()});break}};return(d,x)=>(r(),v("div",is,[e(z,{class:"full-width",color:"primary",label:"\uBC29\uC1A1\uC2DC\uC791",onClick:g})]))}},ds={class:"borderd"},us={class:"q-px-lg row no-wrap justify-between items-center bg-grey-2"},ms={class:"row no-wrap items-center q-gutter-x-sm q-py-sm"},ps=s("div",{class:"font-main",style:{"font-size":"16px","font-weight":"bold"}}," \uC2E4\uC2DC\uAC04 \uBC29\uC1A1 ",-1),_s={class:"q-pa-xs"},fs={class:"q-pa-sm row justify-center"},Us={__name:"LivePage",setup(m){const u=U(),i=M(40);return L(async()=>{u.loading.show(),await ue(),u.loading.hide()}),(n,_)=>(r(),C(Me,{class:"q-pa-md"},{default:t(()=>[s("div",ds,[s("div",us,[s("div",ms,[e(w,{name:"mic",color:"primary",size:"24px"}),ps])]),s("div",null,[e(ge,{modelValue:i.value,"onUpdate:modelValue":_[0]||(_[0]=c=>i.value=c)},{before:t(()=>[s("div",_s,[e(Be)])]),after:t(()=>[s("div",fs,[e(F,{flat:"",style:{width:"450px"}},{default:t(()=>[e(V,null,{default:t(()=>[e(Oe)]),_:1}),e(V,null,{default:t(()=>[e(Je)]),_:1}),e(V,null,{default:t(()=>[e(Ge)]),_:1}),e(V,null,{default:t(()=>[e(ut)]),_:1}),l(a).Mode==="live"?(r(),C(V,{key:0},{default:t(()=>[e(ft)]),_:1})):S("",!0),l(a).Mode==="message"?(r(),C(V,{key:1},{default:t(()=>[e(St)]),_:1})):S("",!0),l(a).Mode==="tts"?(r(),C(V,{key:2},{default:t(()=>[e(Tt)]),_:1})):S("",!0),e(B,null,{default:t(()=>[e(cs)]),_:1})]),_:1})])]),_:1},8,["modelValue"])])])]),_:1}))}};export{Us as default};
