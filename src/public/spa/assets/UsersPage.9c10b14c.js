import{bl as q,r as Q,o as S,bm as P,y as A,z as $,A as a,j as e,O as I,P as V,B as s,bn as M,bo as O,V as B,bp as R,bq as T,W as U,R as y,X as Y,H as r,C as d,av as Z,br as j,L as m,D as i,S as E,aR as F,x as G,v as K,aY as L,bs as b,b3 as W,bt as H,bu as X,bv as w,K as J,_ as N,N as C}from"./index.faed4a67.js";import{Q as ee,a as c}from"./QTable.4a29ff95.js";import{Q as _}from"./QTooltip.173844a5.js";import{Q as ae}from"./QTr.27d64306.js";import{Q as oe}from"./QPage.3036b186.js";var ne=[{name:"email",label:"\uC774\uBA54\uC77C",align:"center",field:"email",sortable:!0},{name:"name",label:"\uC774\uB984",align:"center",field:"name",sortable:!0},{name:"isAdmin",label:"\uAD00\uB9AC\uC790",align:"center",field:"isAdmin",sortable:!0},{name:"em",label:"\uAE34\uAE09\uBC29\uC1A1",align:"center",field:"em",sortable:!0},{name:"zones",label:"\uC9C0\uC5ED",align:"center",field:"zones",sortable:!0},{name:"loginAt",label:"\uB9C8\uC9C0\uB9C9 \uB85C\uADF8\uC778",align:"center",field:"loginAt",sortable:!0},{name:"createdAt",label:"\uAC00\uC785\uC77C",align:"center",field:"createdAt",sortable:!0},{name:"actions",label:"\uC124\uC815",align:"center"}];const le=s("div",{class:"q-px-sm dialog-name"},"\uBC29\uC1A1\uAD6C\uAC04\uC120\uD0DD",-1),te={class:"q-px-md"},se={class:"q-px-sm"},ie={__name:"DialogSelectZones",props:["zones"],emits:[...q.emits],setup(x,{emit:D}){const{dialogRef:f,onDialogOK:k,onDialogCancel:h}=q(),u=x,l=Q(null),p=Q([]),z=(g,n,t)=>{n(()=>{p.value=P.value.filter(o=>o.name.indexOf(g)>-1)})};return S(()=>{p.value=P.value,u.zones&&u.zones.length>0&&(l.value=u.zones)}),(g,n)=>(A(),$(E,{ref_key:"dialogRef",ref:f,persistent:""},{default:a(()=>[e(I,{class:"q-dialog-plugin bg-trans",style:{"border-radius":"0.6rem"}},{default:a(()=>[e(V,null,{default:a(()=>[le]),_:1}),e(V,null,{default:a(()=>[s("div",te,[e(M,{modelValue:l.value,"onUpdate:modelValue":n[1]||(n[1]=t=>l.value=t),options:p.value,filled:"",dense:"",multiple:"",label:"\uBC29\uC1A1\uC9C0\uC5ED\uC120\uD0DD","option-value":"deviceId","option-label":"name","use-chips":"","stack-label":"","use-input":"","input-debounce":"0","emit-value":"","map-options":"",onFilter:z},O({option:a(t=>[e(B,R(T(t.itemProps)),{default:a(()=>[e(U,{avatar:""},{default:a(()=>[e(y,{name:"storage"})]),_:1}),e(U,null,{default:a(()=>[e(Y,null,{default:a(()=>[r(d(t.opt.name),1)]),_:2},1024),e(Y,{caption:""},{default:a(()=>[r(d(t.opt.ipaddress),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:2},[l.value?{name:"append",fn:a(()=>[e(y,{name:"cancel",size:"18px",onClick:n[0]||(n[0]=Z(t=>l.value=null,["stop","prevent"])),class:"cursor-pointer"})]),key:"0"}:void 0]),1032,["modelValue","options"])])]),_:1}),e(j,{align:"right"},{default:a(()=>[s("div",se,[e(m,{round:"",flat:"",color:"red-10",icon:"cancel",onClick:i(h)},null,8,["onClick"]),e(m,{round:"",flat:"","no-caps":"",color:"primary",icon:"check_circle",onClick:n[2]||(n[2]=t=>i(k)(l.value))})])]),_:1})]),_:1})]),_:1},512))}},re={class:"borderd"},de={class:"q-px-lg q-py-sm row no-wrap justify-between items-center bg-grey-2"},ce={class:"row no-wrap items-center q-gutter-x-sm q-py-xs"},ue=s("div",{class:"font-main"},"\uC0AC\uC6A9\uC790 \uAD00\uB9AC",-1),me={class:"row items-center q-gutter-x-xs"},fe={style:{"font-size":"0.7rem"}},pe={style:{"font-size":"0.7rem"}},ye={__name:"UsersPage",setup(x){const{fnNotiWarn:D,fnNotiError:f}=F(),{fnUserInfo:k,fnDeleteUser:h}=G(),u=Q(""),l=K(),p=n=>{if(n.email==="superuser@superuser.com")return D("\uCD5C\uACE0 \uAD00\uB9AC\uC790\uB294 \uBCC0\uACBD\uD560 \uC218 \uC5C6\uC2B5\uB2C8\uB2E4");l.dialog({component:N,componentProps:{title:"\uAD00\uB9AC\uC790 \uAD8C\uD55C \uBCC0\uACBD",icon:"warning",iconColor:"yellow",message:`${n.email} \uAD00\uB9AC\uC790 \uAD8C\uD55C ${n.isAdmin?"\uD68C\uC218":"\uBD80\uC5EC"} \uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?`}}).onOk(async()=>{try{l.loading.show(),await C.put("/users/admin",{...n}),await b()}catch{f("\uAD00\uB9AC\uC790 \uAD8C\uD55C \uBCC0\uACBD\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4")}finally{l.loading.hide()}})},z=n=>{l.dialog({component:N,componentProps:{title:"\uAE34\uAE09\uBC29\uC1A1 \uAD8C\uD55C \uBCC0\uACBD",icon:"warning",iconColor:"yellow",message:`${n.email} \uAE34\uAE09\uBC29\uC1A1 \uAD8C\uD55C ${n.em?"\uD68C\uC218":"\uBD80\uC5EC"} \uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?`}}).onOk(async()=>{try{l.loading.show(),await C.put("/users",{user:n,update:{em:!n.em}}),await b()}catch{f("\uAE34\uAE09\uBC29\uC1A1 \uAD8C\uD55C \uBCC0\uACBD\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4")}finally{l.loading.hide()}})},g=n=>{l.dialog({component:ie,componentProps:{zones:n.zones}}).onOk(async t=>{try{l.loading.show(),await C.put("/users",{user:n,update:{zones:t}}),await b()}catch{f("\uC9C0\uC5ED \uC124\uC815\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4")}finally{l.loading.hide()}})};return S(async()=>{l.loading.show(),await L(),await b(),l.loading.hide()}),(n,t)=>(A(),$(oe,{class:"page"},{default:a(()=>[s("div",re,[s("div",de,[s("div",ce,[e(y,{name:"group",color:"primary",size:"md"}),ue]),e(W,{modelValue:u.value,"onUpdate:modelValue":t[0]||(t[0]=o=>u.value=o),borderless:"",dense:"",debounce:"300",placeholder:"Search",clearable:""},{append:a(()=>[e(y,{class:"cursor-pointer",name:"search"})]),_:1},8,["modelValue"])]),e(ee,{columns:i(ne),rows:i(H),filter:u.value,pagination:{rowsPerPage:10}},{body:a(o=>[e(ae,{props:o},{default:a(()=>[e(c,{key:"email",props:o},{default:a(()=>[r(d(o.row.email),1)]),_:2},1032,["props"]),e(c,{key:"name",props:o},{default:a(()=>[r(d(o.row.name),1)]),_:2},1032,["props"]),e(c,{key:"isAdmin",props:o},{default:a(()=>[e(m,{round:"",flat:"",size:"sm",icon:o.row.isAdmin?"check_circle":"block",color:o.row.isAdmin?"primary":"red-10",onClick:v=>p(o.row)},{default:a(()=>[e(_,null,{default:a(()=>[r(d(o.row.isAdmin?"\uC0AC\uC6A9\uC790":"\uAD00\uB9AC\uC790")+"\uB85C \uBCC0\uACBD",1)]),_:2},1024)]),_:2},1032,["icon","color","onClick"])]),_:2},1032,["props"]),e(c,{key:"em",props:o},{default:a(()=>[e(m,{round:"",flat:"",size:"sm",icon:o.row.em?"check_circle":"block",color:o.row.em?"primary":"red-10",onClick:v=>z(o.row)},{default:a(()=>[e(_,null,{default:a(()=>[r(" '\uAE34\uAE09\uBC29\uC1A1' ")]),_:1})]),_:2},1032,["icon","color","onClick"])]),_:2},1032,["props"]),e(c,{key:"zones",props:o},{default:a(()=>[s("div",me,[e(X,{zones:o.row.zones},null,8,["zones"]),e(m,{round:"",flat:"",size:"sm",icon:"edit",color:"primary",onClick:v=>g(o.row)},{default:a(()=>[e(_,null,{default:a(()=>[r("Zone \uC124\uC815")]),_:1})]),_:2},1032,["onClick"])])]),_:2},1032,["props"]),e(c,{key:"loginAt",props:o},{default:a(()=>[s("div",fe,[s("div",null,d(i(w).formatDate(o.row.loginAt,"YYYY-MM-DD")),1),s("div",null,d(i(w).formatDate(o.row.loginAt,"hh:mm:ss a")),1)])]),_:2},1032,["props"]),e(c,{key:"createdAt",props:o},{default:a(()=>[s("div",pe,[s("div",null,d(i(w).formatDate(o.row.createdAt,"YYYY-MM-DD")),1),s("div",null,d(i(w).formatDate(o.row.createdAt,"hh:mm:ss a")),1)])]),_:2},1032,["props"]),e(c,{key:"actions",props:o},{default:a(()=>[s("div",null,[e(m,{flat:"",round:"",color:"primary",icon:"info",size:"sm",onClick:v=>i(k)(o.row)},{default:a(()=>[e(_,null,{default:a(()=>[r("\uC0C1\uC138\uC815\uBCF4")]),_:1})]),_:2},1032,["onClick"]),o.row.email!=="superuser@superuser.com"?(A(),$(m,{key:0,flat:"",round:"",icon:"delete",color:"red-10",size:"sm",onClick:v=>i(h)(o.row)},{default:a(()=>[e(_,null,{default:a(()=>[r("\uC0AD\uC81C")]),_:1})]),_:2},1032,["onClick"])):J("",!0)])]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["columns","rows","filter"])])]),_:1}))}};export{ye as default};
