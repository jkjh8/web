import{r as $,o as F,t as p,v,x as a,j as e,M as E,N as Z,y as t,Q as f,G as u,aF as K,aG as O,J as g,aH as U,aD as J,E as B,z as P,L as T,P as H,aI as W,aJ as L,aK as X,aL as Y,B as h,aM as N,D as V,F as D,aN as ee,K as A,aO as te,A as q,R as ae,S as ne}from"./index.854d2d6b.js";import{Q as oe}from"./QPage.013074bc.js";import{Q as se,a as ie,b as x,c as I}from"./QSelect.bb125c9c.js";import{Q as le}from"./QExpansionItem.a832ed44.js";import{u as M}from"./use-quasar.fba98d94.js";import{u as re}from"./use-dialog-plugin-component.b10ae4ca.js";import{f as G,b as C}from"./useBarix.aabc9188.js";import{_ as de}from"./plugin-vue_export-helper.21dcd24c.js";import"./QMenu.de6036a3.js";import"./format.cbf00d5d.js";import"./QSlideTransition.b5d437e2.js";const ce={class:"row no-wrap items-center q-gutter-x-md"},ue=t("div",{class:"dialog-name"},"\uBC29\uC1A1\uC9C0\uC5ED\uC124\uC815",-1),me={class:"dialog-caption"},pe={__name:"setSigleChannel",props:["device","zone"],setup(d){const{dialogRef:_,onDialogCancel:w,onDialogOK:Q}=re(),c=d,b=M(),y=$([]),n=$(null),m=$(0),i=(s,r,o)=>{r(()=>{y.value=C.value.filter(k=>k.name.indexOf(s)>-1)})},S=async s=>{let r="";if(s!==null){const o=await H.get("/devices/qsys/existszone",{params:{id:s}});if(r=C.value[C.value.findIndex(k=>k._id===s)].ipaddress,o.data&&o.data.value&&o.data.value.length)return o.data.value[0].ZoneStatus.findIndex(j=>j.destination===s)===c.zone.Zone-1?void 0:(n.value=null,b.notify({type:"negative",icon:"warning",position:"top",message:"\uB2E4\uB978 \uBC29\uC1A1 \uAD6C\uAC04\uC5D0\uC11C \uC774\uBBF8 \uC0AC\uC6A9\uC911\uC785\uB2C8\uB2E4."}))}await W({deviceId:c.device.deviceId,zone:c.zone.Zone,destination:s,ipaddress:r}),await L()},l=s=>{X({deviceId:c.device.deviceId,zone:c.zone.Zone,volume:s})},z=s=>{Y({deviceId:c.device.deviceId,zone:c.zone.Zone,mute:s})};return F(async()=>{await G(),y.value=C.value,m.value=c.zone.gain,c.zone.destination&&c.zone.destination._id&&(n.value=c.zone.destination._id)}),(s,r)=>(p(),v(T,{ref_key:"dialogRef",ref:_},{default:a(()=>[e(E,{class:"q-dialog-plugin",style:{"border-radius":"8px"}},{default:a(()=>[e(Z,null,{default:a(()=>{var o;return[t("div",ce,[e(f,{name:"location_on",color:"primary",size:"1.5rem"}),t("div",null,[ue,t("div",me,u(`${d.device.name} ${d.zone.Zone}. ${(o=d.zone.name)!=null?o:"No name"} \uCC44\uB110 `),1)])])]}),_:1}),e(Z,null,{default:a(()=>[e(se,{filled:"",dense:"",clearable:"",modelValue:n.value,"onUpdate:modelValue":[r[0]||(r[0]=o=>n.value=o),S],options:y.value,label:"\uB124\uD2B8\uC6CC\uD06C \uC218\uC2E0\uAE30 \uC120\uD0DD","option-value":"_id","option-label":"name","hide-selected":"","use-input":"","fill-input":"","input-debounce":"0","emit-value":"","map-options":"",onFilter:i},{option:a(o=>[e(ie,K(O(o.itemProps)),{default:a(()=>[e(x,{avatar:""},{default:a(()=>[e(f,{name:"storage"})]),_:1}),e(x,null,{default:a(()=>[e(I,null,{default:a(()=>[g(u(o.opt.name),1)]),_:2},1024),e(I,{caption:""},{default:a(()=>[g(u(o.opt.ipaddress),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options"])]),_:1}),e(Z,null,{default:a(()=>[t("div",null,[e(U,{modelValue:m.value,"onUpdate:modelValue":[r[2]||(r[2]=o=>m.value=o),l],filled:"",dense:"",label:"\uBCFC\uB968",type:"number"},{append:a(()=>[e(f,{class:"cursor-pointer",name:d.zone.mute?"volume_off":"volume_up",color:d.zone.mute?"red-10":"primary",onClick:r[1]||(r[1]=o=>z(!d.zone.mute))},null,8,["name","color"])]),_:1},8,["modelValue"])])]),_:1}),e(J,{align:"right"},{default:a(()=>[e(B,{round:"",flat:"",color:"red-10",icon:"cancel",onClick:P(w)},null,8,["onClick"]),e(B,{round:"",flat:"","no-caps":"",color:"primary",icon:"check_circle",onClick:r[3]||(r[3]=o=>P(Q)(s.inputText))})]),_:1})]),_:1})]),_:1},512))}};const R=d=>(ae("data-v-614e24b2"),d=d(),ne(),d),fe={class:"row no-wrap justify-start items-center q-gutter-x-sm header-font"},_e=R(()=>t("span",null,"\uC9C0\uC5ED \uBC29\uC1A1\uC911",-1)),ve={class:"row q-pa-md q-gutter-sm"},ge={class:"floating-position q-gutter-x-xs row no-wrap items-center"},ye={class:"floating-font"},he={class:""},xe={key:0},we={class:"column items-end text-caption"},be={class:"row q-gutter-x-xs"},ke={key:1},qe={class:"column items-end text-caption"},Ce=R(()=>t("div",null,"Local",-1)),Ie={class:"row q-gutter-x-xs"},Qe={__name:"broadcastStatus",setup(d){const _=M(),w=n=>{let m=0;for(let i=0;i<n.length;i++)n[i].Active&&(m+=1);return m},Q=n=>{switch(n){case 1:case 2:return"bg-red text-white";case 3:case 4:return"bg-yellow";case 5:return"bg-green-4 text-white";default:return""}},c=n=>n&&n.status?n.streamurl?"green":"yellow":"red",b=n=>{if(q.value.isAdmin)return!0;if(q.value.zones&&q.value.zones.length){for(let m of q.value.zones)if(m===n)return!0}return!1},y=(n,m)=>{_.dialog({component:pe,componentProps:{device:n,zone:m}})};return F(async()=>{_.loading.show(),await L(),await G(),_.loading.hide()}),(n,m)=>(p(!0),h(D,null,N(P(te),(i,S)=>(p(),v(le,{key:S,"header-class":"bg-grey-1"},{header:a(()=>[e(x,{avatar:""},{default:a(()=>[e(f,{color:i.connected?"primary":"ref-10",name:"location_on"},null,8,["color"])]),_:2},1024),e(x,null,{default:a(()=>[e(I,null,{default:a(()=>[t("div",null,[g(u(i.name)+" ",1),b(i.deviceId)?(p(),v(f,{key:0,class:"q-ml-sm cursor-pointer",color:"grey",name:"settings"})):V("",!0)])]),_:2},1024),e(I,{caption:""},{default:a(()=>[g(u(i.ipaddress),1)]),_:2},1024)]),_:2},1024),e(x,{side:""},{default:a(()=>[t("div",fe,[g(u(w(i.ZoneStatus))+" ",1),_e])]),_:2},1024)]),default:a(()=>[t("div",ve,[(p(!0),h(D,null,N(i.ZoneStatus,(l,z)=>{var s;return p(),h("div",{key:z},[t("div",{class:ee(["borderd q-pt-md q-px-sm q-pb-sm q-gutter-sx",l.Active?Q(l.Priority):""]),style:{position:"relative"}},[t("div",ge,[t("span",ye,u(l.gain),1),l.mute?(p(),v(f,{key:0,name:"volume_off",color:"red-10"})):V("",!0),b(i.deviceId)?(p(),v(f,{key:1,class:"cursor-pointer",name:"settings",color:"primary",onClick:r=>y(i,l)},null,8,["onClick"])):V("",!0)]),t("div",he,[t("span",null,u(l.Zone)+". ",1),t("span",null,u((s=l.name)!=null?s:"No Name"),1)]),l.destination?(p(),h("div",xe,[t("div",null,[e(A,{class:"q-my-sm"})]),t("div",we,[t("div",be,[g(u(l.destination.name)+" ",1),e(f,{name:"circle",color:c(l.destination)},null,8,["color"])]),t("div",null,u(l.destination.ipaddress),1)])])):(p(),h("div",ke,[t("div",null,[e(A,{class:"q-my-sm"})]),t("div",qe,[Ce,t("div",Ie,"Channel "+u(l.Zone),1)])]))],2)])}),128))])]),_:2},1024))),128))}};var Se=de(Qe,[["__scopeId","data-v-614e24b2"]]);const ze={class:"borderd"},$e={class:"q-px-lg q-py-sm row no-wrap justify-between items-center bg-grey-2"},Ze={class:"row no-wrap items-center q-gutter-x-sm"},Ve=t("div",{class:"font-main",style:{"font-size":"16px","font-weight":"bold"}},"\uBC29\uC1A1 \uC0C1\uD0DC",-1),Ke={__name:"StatusPage",setup(d){return(_,w)=>(p(),v(oe,{padding:""},{default:a(()=>[t("div",ze,[t("div",$e,[t("div",Ze,[e(f,{name:"location_on",color:"primary",size:"sm"}),Ve])]),e(Se)])]),_:1}))}};export{Ke as default};
