"use strict";(globalThis["webpackChunkbs_fe"]=globalThis["webpackChunkbs_fe"]||[]).push([[97],{1097:(e,n,a)=>{a.r(n),a.d(n,{default:()=>He});var o=a(9835),t=a(499),l=a(6970),i=a(1957),s=a(4182);const d={class:"q-px-sm"},c={class:"dialogName"},u={class:"q-px-sm"},r={class:"q-px-sm"},p={__name:"zoneName",props:{currentName:String,zone:Number},emits:[...s.Z.emits],setup(e,{emit:n}){const a=e,{dialogRef:i,onDialogCancel:p,onDialogHide:m,onDialogOK:v}=(0,s.Z)(),_=(0,t.iH)("");return(0,o.bv)((()=>{a.currentName&&(_.value=a.currentName)})),(n,a)=>{const s=(0,o.up)("q-card-section"),w=(0,o.up)("q-input"),f=(0,o.up)("q-btn"),g=(0,o.up)("q-card-actions"),z=(0,o.up)("q-card"),Z=(0,o.up)("q-dialog");return(0,o.wg)(),(0,o.j4)(Z,{ref_key:"dialogRef",ref:i,onHide:(0,t.SU)(m)},{default:(0,o.w5)((()=>[(0,o.Wm)(z,{class:"q-dialog-plugin"},{default:(0,o.w5)((()=>[(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[(0,o._)("div",d,[(0,o._)("div",c,(0,l.zw)(`방송구간 채널 ${e.zone} 이름 변경`),1)])])),_:1}),(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[(0,o._)("div",u,[(0,o.Wm)(w,{modelValue:_.value,"onUpdate:modelValue":a[0]||(a[0]=e=>_.value=e),dense:"",outlined:"",label:"Name"},null,8,["modelValue"])])])),_:1}),(0,o.Wm)(g,{align:"right"},{default:(0,o.w5)((()=>[(0,o._)("div",r,[(0,o.Wm)(f,{round:"",flat:"",color:"red-10",icon:"cancel",onClick:(0,t.SU)(p)},null,8,["onClick"]),(0,o.Wm)(f,{round:"",flat:"","no-caps":"",color:"primary",icon:"check_circle",onClick:a[1]||(a[1]=e=>(0,t.SU)(v)(_.value))})])])),_:1})])),_:1})])),_:1},8,["onHide"])}}};var m=a(1639),v=a(3706),_=a(4458),w=a(3190),f=a(6611),g=a(1821),z=a(4455),Z=a(9984),q=a.n(Z);const y=(0,m.Z)(p,[["__scopeId","data-v-98900b54"]]),W=y;q()(p,"components",{QDialog:v.Z,QCard:_.Z,QCardSection:w.Z,QInput:f.Z,QCardActions:g.Z,QBtn:z.Z});var b=a(7799),x=a(9302),k=a(1569);const I=()=>{const e=(0,x.Z)(),n=async n=>{try{e.loading.show(),await k.api.get("/devices/qsys/refreshall",{params:{deviceId:n}}),e.loading.hide()}catch(a){console.log(a),e.loading.hide()}},a=(n,a,o)=>{e.dialog({component:W,componentProps:{currentName:n,zone:a}}).onOk((async n=>{e.loading.show(),await k.api.put("/devices/qsys/modifiedzonename",{deviceId:o,zone:a,name:n}),await(0,b.l4)(),e.loading.hide()}))};return{fnRefreshAllQsysStreamAddr:n,modifyZoneName:a}},Q={__name:"deviceHeader",props:["device"],setup(e){const{fnRefreshAllQsysStreamAddr:n}=I();return(a,s)=>{const d=(0,o.up)("q-icon"),c=(0,o.up)("q-item-section"),u=(0,o.up)("q-item-label");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(c,{avatar:""},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{color:e.device.connected?"primary":"red-10",name:"location_on"},null,8,["color"])])),_:1}),(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o.Wm)(u,{class:"q-gutter-x-sm"},{default:(0,o.w5)((()=>[(0,o._)("span",null,(0,l.zw)(e.device.name),1),(0,o._)("span",null,[(0,o.Wm)(d,{name:"refresh",color:"primary",onClick:s[0]||(s[0]=(0,i.iM)((a=>(0,t.SU)(n)(e.device.deviceId)),["prevent","stop"]))})])])),_:1}),(0,o.Wm)(u,{caption:""},{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(e.device.ipaddress),1)])),_:1})])),_:1})],64)}}};var U=a(1233),S=a(2857),h=a(3115);const C=Q,D=C;q()(Q,"components",{QItemSection:U.Z,QIcon:S.Z,QItemLabel:h.Z});const N={style:{width:"150px"}},H={class:"q-gutter-x-sm"},j={class:"text-caption text-grey"},O={__name:"zoneNameTag",props:["zone","device"],setup(e){const{modifyZoneName:n}=I();return(a,i)=>{const s=(0,o.up)("q-avatar"),d=(0,o.up)("q-tooltip"),c=(0,o.up)("q-btn");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(s,{color:"grey-2",size:"26px"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(e.zone.Zone),1)])),_:1}),(0,o._)("div",N,[(0,o._)("div",H,[(0,o._)("span",null,(0,l.zw)(e.zone.name?e.zone.name:"No Name"),1),(0,o.Wm)(c,{round:"",flat:"",icon:"edit",color:"primary",size:"sm",onClick:i[0]||(i[0]=a=>(0,t.SU)(n)(e.zone.name,e.zone.Zone,e.device.deviceId))},{default:(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Edit Name")])),_:1})])),_:1})]),(0,o._)("div",j,"Zone "+(0,l.zw)(e.zone.Zone),1)])],64)}}};var A=a(1357),V=a(6858);const B=O,R=B;q()(O,"components",{QAvatar:A.Z,QBtn:z.Z,QTooltip:V.Z});var T=a(5385);const L=(0,o._)("div",{class:"q-px-sm"},[(0,o._)("div",{class:"dialogName"},"방송구간 선택")],-1),Y={class:"q-px-sm"},E={__name:"selectBarix",props:{zone:Object},emits:[...s.Z.emits],setup(e,{emit:n}){const a=e,{dialogRef:d,onDialogHide:c,onDialogOK:u,onDialogCancel:r}=(0,s.Z)(),p=(0,x.Z)(),m=(0,t.iH)(null),v=(0,t.iH)([]),_=(e,n,a)=>{n((()=>{v.value=T.b.value.filter((n=>n.name.indexOf(e)>-1))}))},w=()=>{p.notify({type:"negative",icon:"warning",position:"top",message:"네트워크 방송 송출 지역이 이미 사용중입니다."})},f=async()=>{if(null===m.value)u({selected:m.value,ipaddress:""});else{const e=await k.api.get("/devices/qsys/existszone",{params:{id:m.value}});if(e.data&&e.data.value&&e.data.value.length){const n=e.data.value[0].ZoneStatus,o=n.findIndex((e=>e.destination===m.value));return o===a.zone.Zone-1?c():w()}u({selected:m.value,ipaddress:T.b.value[T.b.value.findIndex((e=>e._id===m.value))].ipaddress})}};return(0,o.bv)((async()=>{await(0,T.u)(),v.value=T.b.value,a.zone.destination&&a.zone.destination._id&&(m.value=a.zone.destination._id),console.log(a.zone)})),(e,n)=>{const a=(0,o.up)("q-card-section"),s=(0,o.up)("q-icon"),u=(0,o.up)("q-item-section"),p=(0,o.up)("q-item-label"),w=(0,o.up)("q-item"),g=(0,o.up)("q-select"),z=(0,o.up)("q-btn"),Z=(0,o.up)("q-card-actions"),q=(0,o.up)("q-card"),y=(0,o.up)("q-dialog");return(0,o.wg)(),(0,o.j4)(y,{ref_key:"dialogRef",ref:d,onHide:(0,t.SU)(c)},{default:(0,o.w5)((()=>[(0,o.Wm)(q,{class:"q-dialog-plugin",style:{"border-radius":"0.6rem"}},{default:(0,o.w5)((()=>[(0,o.Wm)(a,null,{default:(0,o.w5)((()=>[L])),_:1}),(0,o.Wm)(a,null,{default:(0,o.w5)((()=>[(0,o._)("div",null,[(0,o.Wm)(g,{filled:"",dense:"",modelValue:m.value,"onUpdate:modelValue":n[1]||(n[1]=e=>m.value=e),options:v.value,label:"방송구간선택","option-value":"_id","option-label":"name","hide-selected":"","use-input":"","fill-input":"","input-debounce":"0","emit-value":"","map-options":"",onFilter:_},(0,o.Nv)({option:(0,o.w5)((e=>[(0,o.Wm)(w,(0,l.vs)((0,o.F4)(e.itemProps)),{default:(0,o.w5)((()=>[(0,o.Wm)(u,{avatar:""},{default:(0,o.w5)((()=>[(0,o.Wm)(s,{name:"storage"})])),_:1}),(0,o.Wm)(u,null,{default:(0,o.w5)((()=>[(0,o.Wm)(p,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(e.opt.name),1)])),_:2},1024),(0,o.Wm)(p,{caption:""},{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(e.opt.ipaddress),1)])),_:2},1024)])),_:2},1024)])),_:2},1040)])),_:2},[m.value?{name:"append",fn:(0,o.w5)((()=>[(0,o.Wm)(s,{name:"cancel",size:"18px",onClick:n[0]||(n[0]=(0,i.iM)((e=>m.value=null),["stop","prevent"])),class:"cursor-pointer"})])),key:"0"}:void 0]),1032,["modelValue","options"])])])),_:1}),(0,o.Wm)(Z,{align:"right"},{default:(0,o.w5)((()=>[(0,o._)("div",Y,[(0,o.Wm)(z,{round:"",flat:"",color:"red-10",icon:"cancel",onClick:(0,t.SU)(r)},null,8,["onClick"]),(0,o.Wm)(z,{round:"",flat:"","no-caps":"",color:"primary",icon:"check_circle",onClick:f})])])),_:1})])),_:1})])),_:1},8,["onHide"])}}};var K=a(6384),P=a(490);const M=E,F=M;q()(E,"components",{QDialog:v.Z,QCard:_.Z,QCardSection:w.Z,QSelect:K.Z,QIcon:S.Z,QItem:P.Z,QItemSection:U.Z,QItemLabel:h.Z,QCardActions:g.Z,QBtn:z.Z});var G=a(8269),$=a(6030);const J=(e,n)=>{let a=b.Us.value[b.Us.value.findIndex((n=>n.deviceId===e))].ZoneStatus[n-1].gain;a+=$.nu.value,a>0&&(a=0),b.Us.value[b.Us.value.findIndex((n=>n.deviceId===e))].ZoneStatus[n-1].gain=a,G.socket.emit("qsys:volume",{deviceId:e,zone:n,value:a})},X=(e,n)=>{let a=b.Us.value[b.Us.value.findIndex((n=>n.deviceId===e))].ZoneStatus[n-1].gain;a-=$.nu.value,a<-100&&(a=-100),b.Us.value[b.Us.value.findIndex((n=>n.deviceId===e))].ZoneStatus[n-1].gain=a,G.socket.emit("qsys:volume",{deviceId:e,zone:n,value:a})},ee=(e,n,a)=>{b.Us.value[b.Us.value.findIndex((n=>n.deviceId===e))].ZoneStatus[n-1].mute=a,G.socket.emit("qsys:mute",{deviceId:e,zone:n,value:a})},ne=e=>((0,o.dD)("data-v-cb90da26"),e=e(),(0,o.Cn)(),e),ae={class:"row no-wrap items-center"},oe={class:"row no-wrap"},te={class:"row no-wrap justify-center items-center q-gutter-x-xs",style:{width:"70px"}},le=ne((()=>(0,o._)("div",{class:"text-grey q-pr-sm"},"VOL",-1))),ie={class:"row justify-center"},se={class:"column no-wrap"},de={__name:"muteAndGain",props:{zone:Object,deviceId:String},setup(e){return(n,a)=>{const i=(0,o.up)("q-btn"),s=(0,o.up)("q-tooltip");return(0,o.wg)(),(0,o.iD)("div",ae,[(0,o._)("div",oe,[(0,o._)("div",te,[le,(0,o._)("div",ie,[(0,o._)("div",null,(0,l.zw)(e.zone.gain),1)])]),(0,o._)("div",se,[(0,o.Wm)(i,{class:"btn",flat:"",icon:"keyboard_arrow_up",size:"xs",onClick:a[0]||(a[0]=n=>(0,t.SU)(J)(e.deviceId,e.zone.Zone))}),(0,o.Wm)(i,{class:"btn",flat:"",icon:"keyboard_arrow_down",size:"xs",onClick:a[1]||(a[1]=n=>(0,t.SU)(X)(e.deviceId,e.zone.Zone))})])]),(0,o.Wm)(i,{round:"",flat:"",icon:e.zone.mute?"volume_off":"volume_up",color:e.zone.mute?"red":"primary",onClick:a[2]||(a[2]=n=>(0,t.SU)(ee)(e.deviceId,e.zone.Zone,e.zone.mute?0:1))},{default:(0,o.w5)((()=>[(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Mute")])),_:1})])),_:1},8,["icon","color"])])}}},ce=(0,m.Z)(de,[["__scopeId","data-v-cb90da26"]]),ue=ce;q()(de,"components",{QBtn:z.Z,QTooltip:V.Z});const re={class:"q-ml-xl q-gutter-x-sm text-caption text-grey justify-start"},pe=(0,o._)("div",null,"오디오 출력 디바이스",-1),me={class:"text-black"},ve={key:0,class:"q-gutter-x-sm"},_e={key:1},we={__name:"destinationView",props:{zone:Object,device:Object},setup(e){const n=e,a=(0,x.Z)(),t=()=>{a.dialog({component:F,componentProps:{zone:n.zone}}).onOk((async e=>{await k.api.put("/devices/qsys/zoneupdate",{id:n.device._id,deviceId:n.device.deviceId,zone:n.zone.Zone,destination:e.selected,ipaddress:e.ipaddress}),await(0,b.l4)()}))};return(n,a)=>{const i=(0,o.up)("q-tooltip"),s=(0,o.up)("q-btn");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",re,[pe,(0,o._)("div",me,[e.zone.destination?((0,o.wg)(),(0,o.iD)("div",ve,[(0,o._)("span",null,(0,l.zw)(e.zone.destination.name),1),(0,o._)("span",null,(0,l.zw)(e.zone.destination.ipaddress),1)])):((0,o.wg)(),(0,o.iD)("div",_e,"Local"))])]),(0,o.Wm)(s,{round:"",flat:"",icon:"edit",color:"primary",size:"sm",onClick:a[0]||(a[0]=n=>t(e.zone))},{default:(0,o.w5)((()=>[(0,o.Wm)(i,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Edit Destination")])),_:1})])),_:1})],64)}}},fe=we,ge=fe;q()(we,"components",{QBtn:z.Z,QTooltip:V.Z});const ze={class:"q-px-md q-ml-lg"},Ze={class:"row no-wrap items-center q-gutter-x-lg"},qe={__name:"setupExpansion",setup(e){(0,x.Z)();return(e,n)=>{const a=(0,o.up)("q-space"),l=(0,o.up)("q-expansion-item"),i=(0,o.up)("q-list");return(0,o.wg)(),(0,o.j4)(i,null,{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,t.SU)(b.Us),((e,n)=>((0,o.wg)(),(0,o.j4)(l,{key:n,"header-class":"q-px-lg bg-blue-grey-1"},{header:(0,o.w5)((()=>[(0,o.Wm)(D,{device:e},null,8,["device"])])),default:(0,o.w5)((()=>[(0,o._)("div",ze,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.ZoneStatus,(n=>((0,o.wg)(),(0,o.iD)("div",{key:n.Zone,class:"row no-wrap items-center q-px-sm"},[(0,o._)("div",Ze,[(0,o.Wm)(R,{zone:n,device:e},null,8,["zone","device"]),(0,o.Wm)(ge,{zone:n,device:e},null,8,["zone","device"])]),(0,o.Wm)(a),(0,o.Wm)(ue,{zone:n,deviceId:e.deviceId},null,8,["zone","deviceId"])])))),128))])])),_:2},1024)))),128))])),_:1})}}};var ye=a(3246),We=a(651),be=a(136);const xe=qe,ke=xe;q()(qe,"components",{QList:ye.Z,QExpansionItem:We.Z,QSpace:be.Z});const Ie=e=>((0,o.dD)("data-v-4f527678"),e=e(),(0,o.Cn)(),e),Qe={class:"q-pa-md"},Ue={class:"borderd"},Se={class:"q-px-lg q-py-sm row items-center bg-grey-2"},he={class:"row no-wrap items-center q-gutter-x-sm"},Ce=Ie((()=>(0,o._)("span",{class:"text-h6"},"Zone Setup",-1))),De={__name:"zoneSetupPage",setup(e){return(0,o.bv)((async()=>{await(0,b.l4)()})),(e,n)=>{const a=(0,o.up)("q-icon"),l=(0,o.up)("q-space"),i=(0,o.up)("q-tooltip"),s=(0,o.up)("q-btn");return(0,o.wg)(),(0,o.iD)("div",Qe,[(0,o._)("div",Ue,[(0,o._)("div",Se,[(0,o._)("div",he,[(0,o.Wm)(a,{name:"map",size:"20px",color:"primary"}),Ce]),(0,o.Wm)(l),(0,o.Wm)(s,{round:"",flat:"",icon:"refresh",color:"primary",onClick:(0,t.SU)(b.l4)},{default:(0,o.w5)((()=>[(0,o.Wm)(i,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Refresh Devices")])),_:1})])),_:1},8,["onClick"])]),(0,o._)("div",null,[(0,o.Wm)(ke)])])])}}},Ne=(0,m.Z)(De,[["__scopeId","data-v-4f527678"]]),He=Ne;q()(De,"components",{QIcon:S.Z,QSpace:be.Z,QBtn:z.Z,QTooltip:V.Z})}}]);