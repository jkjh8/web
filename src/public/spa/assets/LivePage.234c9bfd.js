import{v as B,U as S,z as i,A as q,B as s,C as t,j as e,Q as x,J as k,bk as pe,D as d,M as $,H as z,bt as T,G as g,bu as a,bv as _e,F as Q,c as ae,bd as L,r as Z,b as ve,aL as oe,O as K,R as C,aO as U,aF as N,I as P,P as O,bw as fe,aP as ne,bx as J,k as ge,o as R,aJ as W,by as le,bz as E,bA as ye,bB as D,bC as G,bD as Y,V as re,W as ie,h as j,a4 as he,bE as we,bF as xe,bG as X,bH as be,bI as ee}from"./index.e0d07856.js";import{Q as $e,a as ke}from"./useFiles.a2a90146.js";import{Q as qe}from"./QPage.c4d0540a.js";import{Q as Ce}from"./QSpace.50ccd669.js";import{Q as ce}from"./QTooltip.50306846.js";import{Q as H}from"./QBadge.a0494a7a.js";import{_ as Ie}from"./dialogConfirm.97d9846a.js";import{Q as F,b as te,c as se}from"./QSelect.f2893ea1.js";import{a as Ve}from"./QTable.34f978b0.js";import{Q as Se}from"./QExpansionItem.5def6eb3.js";import{u as A}from"./use-dialog-plugin-component.120c15cd.js";import{_ as Qe}from"./pageFile.186bcc89.js";import{u as ze}from"./usePlayer.2a62ca33.js";import{_ as de}from"./plugin-vue_export-helper.21dcd24c.js";import"./QMenu.34174ba2.js";import"./QSlideTransition.afd30094.js";import"./dialogInput.8e7eb141.js";import"./format.cbf00d5d.js";import"./QLinearProgress.eaa4ee31.js";import"./QTr.dbd5b529.js";const Pe=()=>{const c=B();return{fnBroadcastCancel:n=>{c.dialog({component:Ie,componentProps:{title:"\uBC29\uC1A1 \uCDE8\uC18C",icon:"cancel",iconColor:"red-10",caption:`${n.name} \uC9C0\uC5ED \uBC29\uC1A1\uC744 \uCDE8\uC18C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?`}}).onOk(async()=>{try{c.loading.show(),await S.get("/devices/qsys/cancel",{params:{device:{name:n.name,deviceId:n.deviceId,ipaddress:n.ipaddress,pageId:n.pageId}}}),c.loading.hide()}catch(m){console.error(m)}})}}},Me={class:"row fit tiems-center q-gutter-x-sm"},Ze={class:"row items-center q-gutter-x-sm"},je={__name:"statusTree",setup(c){const{fnBroadcastCancel:_}=Pe(),n=m=>{let r=0;for(let l=0;l<m.length;l++)m[l].Active&&(r+=1);return r};return(m,r)=>(i(),q($e,{nodes:d(T),"node-key":"_id","children-key":"ZoneStatus","no-node-label":"\uBC29\uC1A1\uAD6C\uAC04\uC774 \uC5C6\uC2B5\uB2C8\uB2E4"},{"header-root":s(l=>[t("div",Me,[e(x,{color:l.node.connected?"primary":"red-10",name:"location_on",size:"xs"},null,8,["color"]),t("div",null,k(l.node.name),1),e(Ce),t("div",null,k(n(l.node.ZoneStatus))+"\uAC1C \uC9C0\uC5ED \uBC29\uC1A1\uC911",1),n(l.node.ZoneStatus)?(i(),q(x,{key:0,class:"cursor-pointer",name:"cancel",color:"red-10",onClick:pe(p=>d(_)(l.node),["prevent","stop"])},{default:s(()=>[e(ce,null,{default:s(()=>[$("\uBC29\uC1A1\uCDE8\uC18C")]),_:1})]),_:2},1032,["onClick"])):z("",!0)])]),"default-header":s(l=>[t("div",Ze,[t("div",null,[$(k(l.node.name?l.node.name:"no name")+" ",1),l.node.Active?(i(),q(H,{key:0,color:"green"},{default:s(()=>[$(" ONAIR ")]),_:1})):z("",!0)])])]),_:1},8,["nodes"]))}},Te={class:"row no-wrap justify-start items-center q-gutter-x-sm"},Ue=t("div",{class:"card-name"},"\uBC29\uC1A1\uBAA8\uB4DC",-1),Be={__name:"pageMode",setup(c){return(_,n)=>(i(),g(Q,null,[t("div",Te,[e(x,{name:"list",color:"primary",size:"sm"}),Ue]),e(F,{modelValue:d(a).Mode,"onUpdate:modelValue":n[0]||(n[0]=m=>d(a).Mode=m),options:d(_e),dense:"",filled:"","map-options":"","emit-value":""},null,8,["modelValue","options"])],64))}},De={class:"row no-wrap justify-between items-center"},Ae={class:"row no-wrap justify-start items-center q-gutter-x-sm"},Ne=t("div",{class:"card-name"},"\uCC60\uC784",-1),Oe={__name:"pagePreamble",setup(c){const _=ae({get(){return a.Preamble==="Chime ascending triple.wav"},set(){return a.Preamble?a.Preamble="":a.Preamble="Chime ascending triple.wav"}});return(n,m)=>(i(),g("div",De,[t("div",Ae,[e(x,{name:"notifications",color:"primary",size:"sm"}),Ne]),e(L,{modelValue:_.value,"onUpdate:modelValue":m[0]||(m[0]=r=>_.value=r)},null,8,["modelValue"])]))}},Re={class:"row no-wrap justify-start items-center q-gutter-x-sm"},Fe=t("div",{class:"card-name"},"\uC6B0\uC120\uC21C\uC704",-1),Le={__name:"pagePriority",setup(c){return(_,n)=>(i(),g(Q,null,[t("div",Re,[e(x,{name:"priority_high",color:"primary",size:"sm"}),Fe]),e(F,{modelValue:d(a).Priority,"onUpdate:modelValue":n[0]||(n[0]=m=>d(a).Priority=m),dense:"",filled:"",options:[{value:1,label:"EM"},{value:3,label:"Nomal"}],"emit-value":"","map-options":""},null,8,["modelValue"])],64))}},Ee={class:"row no-wrap items-center q-gutter-x-md"},Ge=t("div",{class:"dialog-name"},"\uBC29\uC1A1\uAD6C\uAC04\uC120\uD0DD",-1),Ke={class:"dialog-caption"},He={class:"q-pa-sm"},Je={class:"q-px-sm"},We={__name:"selectBrocastZones",props:["sel"],emits:[...A.emits],setup(c,{emit:_}){const{dialogRef:n,onDialogCancel:m,onDialogHide:r,onDialogOK:l}=A(),p=c,u=Z({}),h=Z([]),I=ae(()=>{let o=0;for(let v in u.value)o+=u.value[v].length;return o}),y=(o,v,b)=>{o?u.value[v.deviceId]=[...v.ZoneStatus]:u.value[v.deviceId]=[]},V=(o,v,b)=>{o&&o.length?o.length===v.ZoneStatus.length?h.value[b]=!0:h.value[b]=null:h.value[b]=!1},f=()=>{let o=[];for(let v in u.value)u.value[v].length&&o.push({deviceId:v,value:u.value[v]});l(o)};return ve(async()=>{await oe();for(let o=0;o<T.value.length;o++){let v=T.value[o].deviceId,b=p.sel.findIndex(M=>M.deviceId===v);b!==-1?(u.value[v]=[...p.sel[b].value],u.value[v].length===T.value[o].ZoneStatus.length?h.value[o]=!0:h.value[o]=null):(u.value[v]=[],h.value[o]=!1)}}),(o,v)=>(i(),q(K,{ref_key:"dialogRef",ref:n,persistent:""},{default:s(()=>[e(O,{style:{"max-width":"900px",width:"80%","min-width":"500px","border-radius":"6px"}},{default:s(()=>[e(C,null,{default:s(()=>[t("div",Ee,[e(x,{name:"location_on",color:"primary",size:"1.5rem"}),t("div",null,[Ge,t("div",Ke,k(I.value)+"\uAC1C \uBC29\uC1A1\uAD6C\uAC04 \uC120\uD0DD",1)])])]),_:1}),e(C,null,{default:s(()=>[(i(!0),g(Q,null,U(d(T),(b,M)=>(i(),g("div",{key:M,class:"q-px-md"},[e(Se,{class:"q-pa-xs col-xs-6 col-sm-3 col-md-2 bg-grey-1"},{header:s(()=>[e(te,{avatar:""},{default:s(()=>[e(L,{modelValue:h.value[M],"onUpdate:modelValue":[w=>h.value[M]=w,w=>y(w,b,M)]},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(te,null,{default:s(()=>[e(se,null,{default:s(()=>[$(k(b.name),1)]),_:2},1024),e(se,{caption:""},{default:s(()=>[$(k(b.ipaddress),1)]),_:2},1024)]),_:2},1024)]),default:s(()=>[e(Ve,{rows:b.ZoneStatus,columns:[],"row-key":"Zone",selection:"multiple",selected:u.value[b.deviceId],"onUpdate:selected":[w=>u.value[b.deviceId]=w,w=>V(w,b,M)],grid:"",pagination:{rowsPerPage:0},"hide-header":"","hide-bottom":""},{item:s(w=>[t("div",{class:"q-pa-xs col-xs-6 col-sm-3 col-md-2 grid-style-transition",style:fe(w.selected?"transform: scale(0.95);":"")},[t("div",{class:ne(["border",w.selected?o.$q.dark.isActive?"bg-grey-10":"bg-grey-3":""])},[t("div",He,[e(L,{dense:"",modelValue:w.selected,"onUpdate:modelValue":me=>w.selected=me,label:w.row.name?`${w.row.Zone}. ${w.row.name}`:`${w.row.Zone}. No Name`},null,8,["modelValue","onUpdate:modelValue","label"])])],2)],4)]),_:2},1032,["rows","selected","onUpdate:selected"])]),_:2},1024)]))),128))]),_:1}),e(N,{align:"right"},{default:s(()=>[t("div",Je,[e(P,{round:"",flat:"",color:"red-10",icon:"cancel",onClick:d(m)},null,8,["onClick"]),e(P,{round:"",flat:"","no-caps":"",color:"primary",icon:"check_circle",onClick:f})])]),_:1})]),_:1})]),_:1},512))}},Ye={class:"row no-wrap justify-between items-center"},Xe={class:"row no-wrap justify-start items-center q-gutter-x-sm"},et=t("div",{class:"card-name"},"\uBC29\uC1A1\uAD6C\uAC04",-1),tt={key:0,class:"bg-grey-2 q-py-sm q-px-sm q-mt-sm q-gutter-x-sm row justify-start items-center",style:{"border-radius":"2px","min-height":"40px"}},st={key:1,class:"bg-grey-2 q-pa-sm q-mt-sm row justify-start items-center",style:{"border-radius":"2px",height:"40px"}},at=t("span",null," \uC120\uD0DD\uB41C \uBC29\uC1A1\uAD6C\uAC04\uC774 \uC5C6\uC2B5\uB2C8\uB2E4. ",-1),ot=[at],nt={__name:"pageZones",props:["zones"],emits:["updateZones"],setup(c,{emit:_}){const n=B(),m=()=>{n.dialog({component:We,componentProps:{sel:a.devices}}).onOk(r=>{console.log(r),a.devices=r,J(a.devices)})};return a.devices&&a.devices.length&&J(a.devices),(r,l)=>(i(),g(Q,null,[t("div",Ye,[t("div",Xe,[e(x,{name:"location_on",color:"primary",size:"sm"}),et]),e(x,{class:"cursor-pointer",name:"add_circle",color:"primary",size:"sm",onClick:m})]),d(a).zones&&d(a).zones.length?(i(),g("div",tt,[(i(!0),g(Q,null,U(d(a).zones,(p,u)=>(i(),q(H,{key:u},{default:s(()=>[$(k(p),1)]),_:2},1024))),128))])):(i(),g("div",st,ot))],64))}},lt={class:"row no-wrap justify-start items-center q-gutter-x-sm"},rt=t("div",{class:"card-name"},"\uBC29\uC1A1\uC2DC\uAC04(\uCD08)",-1),it=t("div",{class:"text-caption text-red",style:{"text-align":"right"}}," \uCD5C\uB300 \uBC29\uC1A1 \uC2DC\uAC04\uC740 4\uBD84(240\uCD08)\uC73C\uB85C \uC81C\uD55C \uB429\uB2C8\uB2E4. ",-1),ct={__name:"pageLive",setup(c){return(_,n)=>(i(),g(Q,null,[t("div",lt,[e(x,{name:"timer",color:"primary",size:"sm"}),rt]),e(F,{modelValue:d(a).MaxPageTime,"onUpdate:modelValue":n[0]||(n[0]=m=>d(a).MaxPageTime=m),filled:"",options:[30,60,90,120,150,180,210,240]},null,8,["modelValue"]),it],64))}},dt={class:"col q-gutter-y-sm"},ut={class:"row no-wrap justify-between items-center"},mt={class:"row no-wrap justify-between items-center q-gutter-x-sm"},pt=t("div",{class:"card-name"},"\uBA54\uC2DC\uC9C0",-1),_t={class:"row no-wrap justify-between items-center"},vt={key:0,class:"row no-wrap justify-between items-center q-gutter-x-sm"},ft={key:1,class:"text-red-10 row items-center"},gt={__name:"pageTts",props:["file"],emits:["update:value"],setup(c,{emit:_}){const n=c,m=_,r=B(),{fnPlayStart:l}=ze(),p=ge({voices:[],voice:"",rate:200,text:""}),u=async()=>{if(!p.voice)return I();if(!p.text)return y();try{r.loading.show(),n.file&&await S.delete("/broadcast/tts",{data:{file:n.file}});const f=await S.put("/broadcast/tts",{...p});m("update:value",f.data.value.file)}catch(f){console.error(f)}finally{r.loading.hide()}},h=()=>{r.notify({type:"negative",icon:"error",message:"TTS \uC5D4\uC9C4 \uC624\uB958",caption:"\uC624\uB958\uAC00 \uACC4\uC18D\uB418\uBA74 \uAD00\uB9AC\uC790\uC5D0\uAC8C \uBB38\uC758 \uD574\uC8FC\uC138\uC694.",position:"top",timeout:3e3})},I=()=>{r.notify({type:"warning",icon:"warning",message:"TTS \uC74C\uC131\uC744 \uC120\uD0DD\uD574 \uC8FC\uC138\uC694.",caption:"\uC74C\uC131 \uD569\uC131\uC744 \uC704\uD574\uC11C \uC74C\uC131\uC744 \uC120\uD0DD\uD574 \uC8FC\uC138\uC694",position:"top",timeout:3e3})},y=()=>{r.notify({type:"warning",icon:"warning",message:"TTS \uBA54\uC2DC\uC9C0\uB97C \uC785\uB825\uD574 \uC8FC\uC138\uC694.",caption:"\uC74C\uC131 \uD569\uC131\uC744 \uC704\uD574\uC11C TTS \uBA54\uC2DC\uC9C0\uB97C \uC785\uB825\uD574 \uC8FC\uC138\uC694",position:"top",timeout:3e3})},V=async()=>{try{r.loading.show();const f=await S.get("/broadcast/tts");p.voices=f.data.value.voices,p.rate=f.data.value.rate}catch(f){console.error(f),h()}finally{r.loading.hide()}};return R(async()=>{r.loading.show();try{m("update:value",null),await V()}catch(f){console.error(f)}finally{r.loading.hide()}}),(f,o)=>(i(),g("div",dt,[t("div",ut,[t("div",mt,[e(x,{name:"volume_up",color:"primary",size:"sm"}),pt])]),e(F,{options:p.voices,modelValue:p.voice,"onUpdate:modelValue":o[0]||(o[0]=v=>p.voice=v),"option-value":"id","option-label":"name",filled:"",dense:"",label:"\uC74C\uC131"},null,8,["options","modelValue"]),e(W,{modelValue:p.rate,"onUpdate:modelValue":o[1]||(o[1]=v=>p.rate=v),type:"number",filled:"",dense:"",label:"\uC74C\uC131\uC18D\uB3C4"},null,8,["modelValue"]),e(W,{modelValue:p.text,"onUpdate:modelValue":o[2]||(o[2]=v=>p.text=v),filled:"",type:"textarea",placeholder:"\uBA54\uC2DC\uC9C0\uB97C \uC785\uB825\uD558\uC138\uC694.",label:"\uBA54\uC2DC\uC9C0"},null,8,["modelValue"]),t("div",_t,[c.file?(i(),g("div",vt,[t("div",null,[e(x,{class:"cursor-pointer",name:"play_arrow",color:"primary",size:"sm",onClick:o[3]||(o[3]=v=>d(l)(c.file))}),$(" "+k(c.file.base),1)]),e(x,{class:"cursor-pointer q-mr-sm",name:"cancel",color:"red-10",size:"sm",onClick:o[4]||(o[4]=v=>m("update:value",null))})])):(i(),g("div",ft,[e(x,{name:"warning"}),$(" \uD569\uC131\uB41C \uD30C\uC77C\uC774 \uC5C6\uC2B5\uB2C8\uB2E4. ")])),e(P,{rounded:"",unelevated:"",color:"primary",onClick:u},{default:s(()=>[$("\uC74C\uC131 \uD569\uC131")]),_:1})])]))}};const ue=c=>(re("data-v-57c7573a"),c=c(),ie(),c),yt={class:"q-dialog-plugin broadcast-popup"},ht={key:0},wt={class:"row justify-center q-pt-md text-grey"},xt={class:"fit column q-gutter-y-sm",style:{width:"50%"}},bt={style:{"text-align":"right"}},$t=ue(()=>t("div",{class:"name"},"\uBC29\uC1A1\uBAA8\uB4DC",-1)),kt={style:{"text-align":"right"}},qt=ue(()=>t("div",{class:"name"},"\uBC29\uC1A1\uAD6C\uAC04",-1)),Ct={class:"fit row justify-end"},It={class:"fit row no-wrap justify-center items-center q-mb-md q-gutter-x-sm"},Vt={__name:"pageLive",setup(c){const{dialogRef:_,onDialogCancel:n,onDialogOK:m}=A(),{fnZoneActive:r}=le(),l=Z(!1),p=Z(0);let u=null;const h=async()=>{l.value=!0;try{E();const y=await G(a.devices),V=await S.put("/broadcast/active",{devices:y.map(o=>({deviceId:o.deviceId,Zones:o.params.Zones}))});if(console.log(V),V&&V.active)return r();const f=await S.put("/broadcast/live",{...a,devices:y,zones:a.zones});Y.value=f.data.idx}catch(y){console.error(y)}u=setInterval(()=>{p.value++},1e3)},I=async()=>{try{const y=await S.get("/broadcast/stop",{params:{idx:Y.value}});console.log(y)}catch(y){console.error(y)}l.value=!1,clearInterval(u),u=null,p.value=0};return R(()=>{E()}),(y,V)=>(i(),q(K,{ref_key:"dialogRef",ref:_,persistent:""},{default:s(()=>[t("div",yt,[e(x,{class:"floatingIcon cursor-pointer",name:"cancel",color:"red",size:"sm",onClick:d(n)},{default:s(()=>[e(ce,null,{default:s(()=>[$("Close")]),_:1})]),_:1},8,["onClick"]),e(O,{class:"transBG"},{default:s(()=>[e(C,null,{default:s(()=>[t("div",{class:ne(["q-pa-md row no-wrap text-grey-2",l.value?"justify-between":"justify-end"]),style:{height:"90%","min-height":"300px","font-family":"'NotoSansKR'"}},[l.value?(i(),g("div",ht,[e(ye,{color:"primary",size:"14rem",thickness:8}),t("div",wt," \uBC29\uC1A1\uC911 "+k(p.value)+"\uCD08 \uACBD\uACFC ",1)])):z("",!0),t("div",xt,[t("div",bt,[$t,t("div",null,k(d(a).Mode),1)]),t("div",kt,[qt,t("div",Ct,[(i(!0),g(Q,null,U(d(a).zones,(f,o)=>(i(),q(H,{key:o,class:"q-ml-xs"},{default:s(()=>[$(k(f),1)]),_:2},1024))),128))])]),t("div",null,[(i(!0),g(Q,null,U(d(D),(f,o)=>(i(),g("div",{key:o,style:{"text-align":"right"}},k(d(D)[o]),1))),128))])])],2)]),_:1}),e(N,null,{default:s(()=>[t("div",It,[e(P,{style:{width:"10rem"},unelevated:"",color:"primary",onClick:h},{default:s(()=>[$("\uC2DC\uC791")]),_:1}),e(P,{style:{width:"10rem"},unelevated:"",color:"red-10",onClick:I},{default:s(()=>[$("\uC911\uC9C0")]),_:1})])]),_:1})]),_:1})])]),_:1},512))}};var St=de(Vt,[["__scopeId","data-v-57c7573a"]]);const Qt=[j("circle",{cx:"50",cy:"50",r:"48",fill:"none","stroke-width":"4","stroke-miterlimit":"10",stroke:"currentColor"}),j("line",{"stroke-linecap":"round","stroke-width":"4","stroke-miterlimit":"10",stroke:"currentColor",x1:"50",y1:"50",x2:"85",y2:"50.5"},[j("animateTransform",{attributeName:"transform",type:"rotate",from:"0 50 50",to:"360 50 50",dur:"2s",repeatCount:"indefinite"})]),j("line",{"stroke-linecap":"round","stroke-width":"4","stroke-miterlimit":"10",stroke:"currentColor",x1:"50",y1:"50",x2:"49.5",y2:"74"},[j("animateTransform",{attributeName:"transform",type:"rotate",from:"0 50 50",to:"360 50 50",dur:"15s",repeatCount:"indefinite"})])];var zt=he({name:"QSpinnerClock",props:we,setup(c){const{cSize:_,classes:n}=xe(c);return()=>j("svg",{class:n.value,width:_.value,height:_.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg"},Qt)}});const Pt=c=>(re("data-v-6460a98b"),c=c(),ie(),c),Mt={class:"q-dialog-plugin broadcast-popup"},Zt={class:"row no-wrap justify-start items-center q-gutter-x-sm"},jt=Pt(()=>t("div",{class:"name text-grey-2"},"\uBA54\uC2DC\uC9C0 \uBC29\uC1A1",-1)),Tt={key:0,class:"text-grey-5 row no-wrap items-center q-gutter-x-sm q-px-md"},Ut={style:{"font-size":"2rem"}},Bt={class:"text-white description q-pa-md"},Dt={class:"fit row no-wrap justify-center q-gutter-x-sm"},At={__name:"pageMessage",setup(c){const _=new AbortController,{dialogRef:n,onDialogCancel:m,onDialogOK:r}=A(),l=Z(3),p=Z(!1);let u=null;const h=()=>{u&&clearInterval(u),_.abort(),m()};return R(async()=>{try{E(),X({deviceId:"all",message:`\uD30C\uC77C \uC774\uB984: ${a.file.base}`}),await be(_)}catch(I){console.error(I)}p.value=!0,X({deviceId:"all",message:"\uBC29\uC1A1\uC744 \uC2DC\uC791\uD569\uB2C8\uB2E4."}),u=setInterval(()=>{l.value>0?l.value-=1:(clearInterval(u),r(a))},1e3)}),(I,y)=>(i(),q(K,{ref_key:"dialogRef",ref:n,persistent:""},{default:s(()=>[t("div",Mt,[e(O,{class:"transBG"},{default:s(()=>[e(C,null,{default:s(()=>[t("div",Zt,[e(x,{name:"mic",color:"primary",size:"sm"}),jt])]),_:1}),e(C,{style:{"min-height":"200px"}},{default:s(()=>[p.value?(i(),g("div",Tt,[e(zt,{size:"md"}),t("span",Ut,k(l.value),1)])):z("",!0),t("div",Bt,[(i(!0),g(Q,null,U(d(D),(V,f)=>(i(),g("div",{key:f},k(d(D)[f]),1))),128))])]),_:1}),e(N,null,{default:s(()=>[t("div",Dt,[p.value?(i(),q(P,{key:0,style:{width:"8rem"},color:"primary",onClick:y[0]||(y[0]=V=>d(r)(d(a)))},{default:s(()=>[$("\uC2DC\uC791")]),_:1})):z("",!0),e(P,{style:{width:"8rem"},color:"red-10",onClick:h},{default:s(()=>[$("\uCDE8\uC18C")]),_:1})])]),_:1})]),_:1})])]),_:1},512))}};var Nt=de(At,[["__scopeId","data-v-6460a98b"]]);const Ot={class:"full-width q-px-sm q-mb-md"},Rt={__name:"pageStart",props:["zones"],setup(c){const _=c,{fnNoZones:n,fnNoFile:m,fnZoneActive:r}=le(),l=B(),p=()=>{if(a.devices===null||a.devices.length===0)return n();if(a.Mode!=="live"&&(a.file===null||Object.keys(a.file).length===0))return m();switch(a.Mode){case"live":l.dialog({component:St,componentProps:{zones:_.zones}});break;case"message":case"tts":l.dialog({component:Nt}).onOk(async u=>{const h=await G(u.devices),I=await S.put("/broadcast/active",{devices:h.map(y=>({deviceId:y.deviceId,Zones:y.params.Zones}))});I&&I.active&&(r(),await ee()),await S.put("/broadcast/live/message",{...u,devices:await G(u.devices),zones:a.zones})}).onCancel(async()=>{await ee()});break}};return(u,h)=>(i(),g("div",Ot,[e(P,{class:"full-width",color:"primary",label:"\uBC29\uC1A1\uC2DC\uC791",onClick:p})]))}},Ft={class:"borderd"},Lt={class:"q-px-lg row no-wrap justify-between items-center bg-grey-2"},Et={class:"row no-wrap items-center q-gutter-x-sm q-py-sm"},Gt=t("div",{class:"font-main",style:{"font-size":"16px","font-weight":"bold"}}," \uC2E4\uC2DC\uAC04 \uBC29\uC1A1 ",-1),Kt={class:"q-pa-xs"},Ht={class:"q-pa-sm row justify-center"},fs={__name:"LivePage",setup(c){const _=B(),n=Z(40);return R(async()=>{_.loading.show(),await oe(),_.loading.hide()}),(m,r)=>(i(),q(qe,{class:"q-pa-md"},{default:s(()=>[t("div",Ft,[t("div",Lt,[t("div",Et,[e(x,{name:"mic",color:"primary",size:"24px"}),Gt])]),t("div",null,[e(ke,{modelValue:n.value,"onUpdate:modelValue":r[2]||(r[2]=l=>n.value=l)},{before:s(()=>[t("div",Kt,[e(je)])]),after:s(()=>[t("div",Ht,[e(O,{flat:"",style:{width:"450px"}},{default:s(()=>[e(C,null,{default:s(()=>[e(Be)]),_:1}),e(C,null,{default:s(()=>[e(Le)]),_:1}),e(C,null,{default:s(()=>[e(Oe)]),_:1}),e(C,null,{default:s(()=>[e(nt)]),_:1}),d(a).Mode==="live"?(i(),q(C,{key:0},{default:s(()=>[e(ct)]),_:1})):z("",!0),d(a).Mode==="message"?(i(),q(C,{key:1},{default:s(()=>[e(Qe,{file:d(a).file,"onUpdate:value":r[0]||(r[0]=l=>d(a).file=l)},null,8,["file"])]),_:1})):z("",!0),d(a).Mode==="tts"?(i(),q(C,{key:2},{default:s(()=>[e(gt,{file:d(a).file,"onUpdate:value":r[1]||(r[1]=l=>d(a).file=l)},null,8,["file"])]),_:1})):z("",!0),e(N,null,{default:s(()=>[e(Rt)]),_:1})]),_:1})])]),_:1},8,["modelValue"])])])]),_:1}))}};export{fs as default};
