"use strict";(globalThis["webpackChunkbs_fe"]=globalThis["webpackChunkbs_fe"]||[]).push([[537],{1097:(e,n,a)=>{a.r(n),a.d(n,{default:()=>je});var o=a(9835),t=a(499),l=a(9302),i=a(1569),s=a(6970),d=a(1957),c=a(4182);const u={class:"q-px-sm"},r={class:"dialogName"},p={class:"q-px-sm"},m={class:"q-px-sm"},v={__name:"zoneName",props:{currentName:String,zone:Number},emits:[...c.Z.emits],setup(e,{emit:n}){const a=e,{dialogRef:l,onDialogCancel:i,onDialogHide:d,onDialogOK:v}=(0,c.Z)(),_=(0,t.iH)("");return(0,o.bv)((()=>{a.currentName&&(_.value=a.currentName)})),(n,a)=>{const c=(0,o.up)("q-card-section"),w=(0,o.up)("q-input"),g=(0,o.up)("q-btn"),f=(0,o.up)("q-card-actions"),z=(0,o.up)("q-card"),q=(0,o.up)("q-dialog");return(0,o.wg)(),(0,o.j4)(q,{ref_key:"dialogRef",ref:l,onHide:(0,t.SU)(d)},{default:(0,o.w5)((()=>[(0,o.Wm)(z,{class:"q-dialog-plugin"},{default:(0,o.w5)((()=>[(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o._)("div",u,[(0,o._)("div",r,(0,s.zw)(`방송구간 채널 ${e.zone} 이름 변경`),1)])])),_:1}),(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o._)("div",p,[(0,o.Wm)(w,{modelValue:_.value,"onUpdate:modelValue":a[0]||(a[0]=e=>_.value=e),dense:"",outlined:"",label:"Name"},null,8,["modelValue"])])])),_:1}),(0,o.Wm)(f,{align:"right"},{default:(0,o.w5)((()=>[(0,o._)("div",m,[(0,o.Wm)(g,{round:"",flat:"",color:"red-10",icon:"cancel",onClick:(0,t.SU)(i)},null,8,["onClick"]),(0,o.Wm)(g,{round:"",flat:"","no-caps":"",color:"primary",icon:"check_circle",onClick:a[1]||(a[1]=e=>(0,t.SU)(v)(_.value))})])])),_:1})])),_:1})])),_:1},8,["onHide"])}}};var _=a(1639),w=a(3706),g=a(4458),f=a(3190),z=a(6611),q=a(1821),Z=a(4455),y=a(9984),b=a.n(y);const x=(0,_.Z)(v,[["__scopeId","data-v-98900b54"]]),W=x;b()(v,"components",{QDialog:w.Z,QCard:g.Z,QCardSection:f.Z,QInput:z.Z,QCardActions:q.Z,QBtn:Z.Z});var k=a(7799);const I=()=>{const e=(0,l.Z)(),n=async n=>{try{e.loading.show(),await i.api.get("/devices/qsys/refreshall",{params:{deviceId:n}}),e.loading.hide()}catch(a){console.log(a),e.loading.hide()}},a=(n,a,o)=>{e.dialog({component:W,componentProps:{currentName:n,zone:a}}).onOk((async n=>{e.loading.show(),await i.api.put("/devices/qsys/modifiedzonename",{deviceId:o,zone:a,name:n}),await(0,k.l4)(),e.loading.hide()}))};return{fnRefreshAllQsysStreamAddr:n,modifyZoneName:a}};var Q=a(7930);const U={__name:"deviceHeader",props:["device"],setup(e){const{fnSTrs:n}=(0,Q.n)();return(a,l)=>{const i=(0,o.up)("q-icon"),c=(0,o.up)("q-item-section"),u=(0,o.up)("q-item-label");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(c,{avatar:""},{default:(0,o.w5)((()=>[(0,o.Wm)(i,{color:e.device.connected?"primary":"red-10",name:"location_on"},null,8,["color"])])),_:1}),(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o.Wm)(u,{class:"q-gutter-x-sm"},{default:(0,o.w5)((()=>[(0,o._)("span",null,(0,s.zw)(e.device.name),1),(0,o._)("span",null,[(0,o.Wm)(i,{name:"refresh",color:"primary",onClick:l[0]||(l[0]=(0,d.iM)((a=>(0,t.SU)(n)(e.device)),["prevent","stop"]))})])])),_:1}),(0,o.Wm)(u,{caption:""},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.device.ipaddress),1)])),_:1})])),_:1})],64)}}};var S=a(1233),h=a(2857),C=a(3115);const D=U,N=D;b()(U,"components",{QItemSection:S.Z,QIcon:h.Z,QItemLabel:C.Z});const H={style:{width:"150px"}},j={class:"q-gutter-x-sm"},O={class:"text-caption text-grey"},T={__name:"zoneNameTag",props:["zone","device"],setup(e){const{modifyZoneName:n}=I();return(a,l)=>{const i=(0,o.up)("q-avatar"),d=(0,o.up)("q-tooltip"),c=(0,o.up)("q-btn");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(i,{color:"grey-2",size:"26px"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.zone.Zone),1)])),_:1}),(0,o._)("div",H,[(0,o._)("div",j,[(0,o._)("span",null,(0,s.zw)(e.zone.name?e.zone.name:"No Name"),1),(0,o.Wm)(c,{round:"",flat:"",icon:"edit",color:"primary",size:"sm",onClick:l[0]||(l[0]=a=>(0,t.SU)(n)(e.zone.name,e.zone.Zone,e.device.deviceId))},{default:(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Edit Name")])),_:1})])),_:1})]),(0,o._)("div",O,"Zone "+(0,s.zw)(e.zone.Zone),1)])],64)}}};var V=a(1357),B=a(6858);const A=T,R=A;b()(T,"components",{QAvatar:V.Z,QBtn:Z.Z,QTooltip:B.Z});var L=a(5385);const Y=(0,o._)("div",{class:"q-px-sm"},[(0,o._)("div",{class:"dialogName"},"방송구간 선택")],-1),E={class:"q-px-sm"},K={__name:"selectBarix",props:{zone:Object},emits:[...c.Z.emits],setup(e,{emit:n}){const a=e,{dialogRef:u,onDialogHide:r,onDialogOK:p,onDialogCancel:m}=(0,c.Z)(),v=(0,l.Z)(),_=(0,t.iH)(null),w=(0,t.iH)([]),g=(e,n,a)=>{n((()=>{w.value=L.b.value.filter((n=>n.name.indexOf(e)>-1))}))},f=()=>{v.notify({type:"negative",icon:"warning",position:"top",message:"네트워크 방송 송출 지역이 이미 사용중입니다."})},z=async()=>{if(null===_.value)p({selected:_.value,ipaddress:""});else{const e=await i.api.get("/devices/qsys/existszone",{params:{id:_.value}});if(console.log(e),e.data&&e.data.value&&e.data.value.length){const n=e.data.value[0].ZoneStatus,o=n.findIndex((e=>e.destination===_.value));return o===a.zone.Zone-1?r():f()}p({selected:_.value,ipaddress:L.b.value[L.b.value.findIndex((e=>e._id===_.value))].ipaddress})}};return(0,o.bv)((async()=>{await(0,L.u)(),w.value=L.b.value,a.zone.destination&&a.zone.destination._id&&(_.value=a.zone.destination._id),console.log(a.zone)})),(e,n)=>{const a=(0,o.up)("q-card-section"),l=(0,o.up)("q-icon"),i=(0,o.up)("q-item-section"),c=(0,o.up)("q-item-label"),p=(0,o.up)("q-item"),v=(0,o.up)("q-select"),f=(0,o.up)("q-btn"),q=(0,o.up)("q-card-actions"),Z=(0,o.up)("q-card"),y=(0,o.up)("q-dialog");return(0,o.wg)(),(0,o.j4)(y,{ref_key:"dialogRef",ref:u,onHide:(0,t.SU)(r)},{default:(0,o.w5)((()=>[(0,o.Wm)(Z,{class:"q-dialog-plugin",style:{"border-radius":"0.6rem"}},{default:(0,o.w5)((()=>[(0,o.Wm)(a,null,{default:(0,o.w5)((()=>[Y])),_:1}),(0,o.Wm)(a,null,{default:(0,o.w5)((()=>[(0,o._)("div",null,[(0,o.Wm)(v,{filled:"",dense:"",modelValue:_.value,"onUpdate:modelValue":n[1]||(n[1]=e=>_.value=e),options:w.value,label:"방송구간선택","option-value":"_id","option-label":"name","hide-selected":"","use-input":"","fill-input":"","input-debounce":"0","emit-value":"","map-options":"",onFilter:g},(0,o.Nv)({option:(0,o.w5)((e=>[(0,o.Wm)(p,(0,s.vs)((0,o.F4)(e.itemProps)),{default:(0,o.w5)((()=>[(0,o.Wm)(i,{avatar:""},{default:(0,o.w5)((()=>[(0,o.Wm)(l,{name:"storage"})])),_:1}),(0,o.Wm)(i,null,{default:(0,o.w5)((()=>[(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.opt.name),1)])),_:2},1024),(0,o.Wm)(c,{caption:""},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(e.opt.ipaddress),1)])),_:2},1024)])),_:2},1024)])),_:2},1040)])),_:2},[_.value?{name:"append",fn:(0,o.w5)((()=>[(0,o.Wm)(l,{name:"cancel",size:"18px",onClick:n[0]||(n[0]=(0,d.iM)((e=>_.value=null),["stop","prevent"])),class:"cursor-pointer"})])),key:"0"}:void 0]),1032,["modelValue","options"])])])),_:1}),(0,o.Wm)(q,{align:"right"},{default:(0,o.w5)((()=>[(0,o._)("div",E,[(0,o.Wm)(f,{round:"",flat:"",color:"red-10",icon:"cancel",onClick:(0,t.SU)(m)},null,8,["onClick"]),(0,o.Wm)(f,{round:"",flat:"","no-caps":"",color:"primary",icon:"check_circle",onClick:z})])])),_:1})])),_:1})])),_:1},8,["onHide"])}}};var P=a(6384),M=a(490);const F=K,G=F;b()(K,"components",{QDialog:w.Z,QCard:g.Z,QCardSection:f.Z,QSelect:P.Z,QIcon:h.Z,QItem:M.Z,QItemSection:S.Z,QItemLabel:C.Z,QCardActions:q.Z,QBtn:Z.Z});var $=a(8269),J=a(6030);const X=(e,n)=>{let a=k.Us.value[k.Us.value.findIndex((n=>n.deviceId===e))].ZoneStatus[n-1].gain;a+=J.nu.value,a>0&&(a=0),k.Us.value[k.Us.value.findIndex((n=>n.deviceId===e))].ZoneStatus[n-1].gain=a,$.socket.emit("qsys:volume",{deviceId:e,zone:n,value:a})},ee=(e,n)=>{let a=k.Us.value[k.Us.value.findIndex((n=>n.deviceId===e))].ZoneStatus[n-1].gain;a-=J.nu.value,a<-100&&(a=-100),k.Us.value[k.Us.value.findIndex((n=>n.deviceId===e))].ZoneStatus[n-1].gain=a,$.socket.emit("qsys:volume",{deviceId:e,zone:n,value:a})},ne=(e,n,a)=>{k.Us.value[k.Us.value.findIndex((n=>n.deviceId===e))].ZoneStatus[n-1].mute=a,$.socket.emit("qsys:mute",{deviceId:e,zone:n,value:a})},ae=e=>((0,o.dD)("data-v-cb90da26"),e=e(),(0,o.Cn)(),e),oe={class:"row no-wrap items-center"},te={class:"row no-wrap"},le={class:"row no-wrap justify-center items-center q-gutter-x-xs",style:{width:"70px"}},ie=ae((()=>(0,o._)("div",{class:"text-grey q-pr-sm"},"VOL",-1))),se={class:"row justify-center"},de={class:"column no-wrap"},ce={__name:"muteAndGain",props:{zone:Object,deviceId:String},setup(e){return(n,a)=>{const l=(0,o.up)("q-btn"),i=(0,o.up)("q-tooltip");return(0,o.wg)(),(0,o.iD)("div",oe,[(0,o._)("div",te,[(0,o._)("div",le,[ie,(0,o._)("div",se,[(0,o._)("div",null,(0,s.zw)(e.zone.gain),1)])]),(0,o._)("div",de,[(0,o.Wm)(l,{class:"btn",flat:"",icon:"keyboard_arrow_up",size:"xs",onClick:a[0]||(a[0]=n=>(0,t.SU)(X)(e.deviceId,e.zone.Zone))}),(0,o.Wm)(l,{class:"btn",flat:"",icon:"keyboard_arrow_down",size:"xs",onClick:a[1]||(a[1]=n=>(0,t.SU)(ee)(e.deviceId,e.zone.Zone))})])]),(0,o.Wm)(l,{round:"",flat:"",icon:e.zone.mute?"volume_off":"volume_up",color:e.zone.mute?"red":"primary",onClick:a[2]||(a[2]=n=>(0,t.SU)(ne)(e.deviceId,e.zone.Zone,e.zone.mute?0:1))},{default:(0,o.w5)((()=>[(0,o.Wm)(i,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Mute")])),_:1})])),_:1},8,["icon","color"])])}}},ue=(0,_.Z)(ce,[["__scopeId","data-v-cb90da26"]]),re=ue;b()(ce,"components",{QBtn:Z.Z,QTooltip:B.Z});const pe={class:"q-ml-xl q-gutter-x-sm text-caption text-grey justify-start"},me=(0,o._)("div",null,"오디오 출력 디바이스",-1),ve={class:"text-black"},_e={key:0,class:"q-gutter-x-sm"},we={key:1},ge={__name:"destinationView",props:{zone:Object,device:Object},setup(e){const n=e,a=(0,l.Z)(),t=()=>{a.dialog({component:G,componentProps:{zone:n.zone}}).onOk((async e=>{await i.api.put("/devices/qsys/zoneupdate",{id:n.device._id,deviceId:n.device.deviceId,zone:n.zone.Zone,destination:e.selected,ipaddress:e.ipaddress}),await(0,k.l4)()}))};return(n,a)=>{const l=(0,o.up)("q-tooltip"),i=(0,o.up)("q-btn");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",pe,[me,(0,o._)("div",ve,[e.zone.destination?((0,o.wg)(),(0,o.iD)("div",_e,[(0,o._)("span",null,(0,s.zw)(e.zone.destination.name),1),(0,o._)("span",null,(0,s.zw)(e.zone.destination.ipaddress),1)])):((0,o.wg)(),(0,o.iD)("div",we,"Local"))])]),(0,o.Wm)(i,{round:"",flat:"",icon:"edit",color:"primary",size:"sm",onClick:a[0]||(a[0]=n=>t(e.zone))},{default:(0,o.w5)((()=>[(0,o.Wm)(l,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Edit Destination")])),_:1})])),_:1})],64)}}},fe=ge,ze=fe;b()(ge,"components",{QBtn:Z.Z,QTooltip:B.Z});const qe={class:"q-px-md q-ml-lg"},Ze={class:"row no-wrap items-center q-gutter-x-lg"},ye={__name:"setupExpansion",setup(e){(0,l.Z)();return(e,n)=>{const a=(0,o.up)("q-space"),l=(0,o.up)("q-expansion-item"),i=(0,o.up)("q-list");return(0,o.wg)(),(0,o.j4)(i,null,{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,t.SU)(k.Us),((e,n)=>((0,o.wg)(),(0,o.j4)(l,{key:n,"header-class":"q-px-lg bg-grey-1"},{header:(0,o.w5)((()=>[(0,o.Wm)(N,{device:e},null,8,["device"])])),default:(0,o.w5)((()=>[(0,o._)("div",qe,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.ZoneStatus,(n=>((0,o.wg)(),(0,o.iD)("div",{key:n.Zone,class:"row no-wrap items-center q-px-sm"},[(0,o._)("div",Ze,[(0,o.Wm)(R,{zone:n,device:e},null,8,["zone","device"]),(0,o.Wm)(ze,{zone:n,device:e},null,8,["zone","device"])]),(0,o.Wm)(a),(0,o.Wm)(re,{zone:n,deviceId:e.deviceId},null,8,["zone","deviceId"])])))),128))])])),_:2},1024)))),128))])),_:1})}}};var be=a(3246),xe=a(651),We=a(136);const ke=ye,Ie=ke;b()(ye,"components",{QList:be.Z,QExpansionItem:xe.Z,QSpace:We.Z});const Qe=e=>((0,o.dD)("data-v-14b72593"),e=e(),(0,o.Cn)(),e),Ue={class:"q-pa-md"},Se={class:"borderd"},he={class:"q-px-lg q-py-sm row items-center bg-grey-2"},Ce={class:"row no-wrap items-center q-gutter-x-sm"},De=Qe((()=>(0,o._)("span",{class:"text-h6 text-bold"},"방송구간설정",-1))),Ne={__name:"zoneSetupPage",setup(e){return(0,o.bv)((async()=>{await(0,k.l4)()})),(e,n)=>{const a=(0,o.up)("q-icon"),l=(0,o.up)("q-space"),i=(0,o.up)("q-tooltip"),s=(0,o.up)("q-btn");return(0,o.wg)(),(0,o.iD)("div",Ue,[(0,o._)("div",Se,[(0,o._)("div",he,[(0,o._)("div",Ce,[(0,o.Wm)(a,{name:"map",size:"20px",color:"primary"}),De]),(0,o.Wm)(l),(0,o.Wm)(s,{round:"",flat:"",icon:"refresh",color:"primary",onClick:(0,t.SU)(k.l4)},{default:(0,o.w5)((()=>[(0,o.Wm)(i,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Refresh Devices")])),_:1})])),_:1},8,["onClick"])]),(0,o._)("div",null,[(0,o.Wm)(Ie)])])])}}},He=(0,_.Z)(Ne,[["__scopeId","data-v-14b72593"]]),je=He;b()(Ne,"components",{QIcon:h.Z,QSpace:We.Z,QBtn:Z.Z,QTooltip:B.Z})}}]);