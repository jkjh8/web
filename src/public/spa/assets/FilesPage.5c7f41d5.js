import{r as S,D as r,E as u,G as l,j as o,I as t,bd as x,R as a,L as m,K as y,Q as V,N as g,M as d,A as $,o as U,H as f,S as N}from"./index.0b79a79b.js";import{Q as c}from"./QTooltip.81f3c6b2.js";import{Q as T}from"./QPage.deeb2a65.js";import{u as v,Q as E,b as i,c as b,a as M,f as P}from"./useFiles.e11414d8.js";import{Q as q,a as w}from"./QTable.05786466.js";import{Q as F}from"./QTr.78b5909c.js";import{Q as k}from"./QTd.6a55c5b0.js";import{f as A}from"./format.cbf00d5d.js";import{u as B}from"./usePlayer.60094173.js";import"./QMenu.6c53ffba.js";import"./QSlideTransition.75dc1e99.js";import"./dialogInput.c35a1679.js";import"./use-dialog-plugin-component.8a73145c.js";import"./dialogConfirm.6f422389.js";import"./QSelect.a4a4b107.js";import"./QLinearProgress.3d79d0c0.js";const D={key:0},I=["onClick"],R={key:2},j={key:0},Z={__name:"fileViewer",props:["selection","mode"],setup(h){const{fnPlayStart:C}=B(),{fnRenameFile:Q,fnDownloadFile:z}=v(),p=S(25);return(_,s)=>(r(),u(M,{modelValue:p.value,"onUpdate:modelValue":s[2]||(s[2]=e=>p.value=e)},{before:l(()=>[o(E,{nodes:t(i).folders,selected:t(i).selectedFolder,"onUpdate:selected":[s[0]||(s[0]=e=>t(i).selectedFolder=e),t(b)],"node-key":"path","no-selection-unset":"","selected-color":"primary"},null,8,["nodes","selected","onUpdate:selected"])]),after:l(()=>[o(q,{columns:[{name:"name",label:"NAME",field:"name",align:"left",sortable:!0},{name:"size",label:"SIZE",field:"size",sortable:!0},{name:"actions",label:"ACTIONS"}],rows:t(i).files,flat:"",dense:"","row-key":"name",selection:h.selection,selected:t(i).selectedFiles,"onUpdate:selected":s[1]||(s[1]=e=>t(i).selectedFiles=e),pagination:{rowsPerPage:0},"hide-bottom":""},{header:l(e=>[o(F,{props:e},{default:l(()=>[o(w,{style:{width:"2rem"}},{default:l(()=>[o(x,{size:"22px",modelValue:e.selected,"onUpdate:modelValue":n=>e.selected=n},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),o(w,{key:"name",props:e},{default:l(()=>[a(" NAME ")]),_:2},1032,["props"]),o(w,{key:"size",props:e,style:{width:"2.5rem"}},{default:l(()=>[a(" SIZE ")]),_:2},1032,["props"]),o(w,{key:"actions",props:e,style:{width:"3.5rem"}},{default:l(()=>[a(" Actions ")]),_:2},1032,["props"])]),_:2},1032,["props"])]),body:l(e=>[o(F,{props:e},{default:l(()=>[o(k,{style:{width:"2rem"}},{default:l(()=>[e.row.name!==".."?(r(),u(x,{key:0,size:"22px",modelValue:e.selected,"onUpdate:modelValue":n=>e.selected=n},null,8,["modelValue","onUpdate:modelValue"])):m("",!0)]),_:2},1024),o(k,{key:"name",props:e},{default:l(()=>[e.row.type==="folder"?(r(),y("span",D,[o(V,{name:"folder_open",color:"primary",size:"16px"})])):m("",!0),e.row.type==="folder"?(r(),y("span",{key:1,class:"q-ml-xs cursor-pointer",onClick:n=>t(b)(e.row.fullpath)},g(e.row.name),9,I)):(r(),y("span",R,[a(g(e.row.name)+" ",1),h.mode!=="dialog"?(r(),u(d,{key:0,flat:"",round:"",size:"xs",color:"primary",icon:"play_arrow",onClick:n=>t(C)(e.row)},null,8,["onClick"])):m("",!0)]))]),_:2},1032,["props"]),o(k,{key:"size",props:e,style:{width:"2.5rem"}},{default:l(()=>[a(g(e.row.type!=="folder"?t(A).humanStorageSize(e.row.size):""),1)]),_:2},1032,["props"]),o(k,{key:"actions",props:e,style:{width:"3.5rem"}},{default:l(()=>[e.row.name!==".."?(r(),y("div",j,[e.row.type!=="folder"?(r(),u(d,{key:0,round:"",flat:"",icon:"download",color:"primary",size:"xs",onClick:n=>t(z)(e.row)},{default:l(()=>[o(c,null,{default:l(()=>[a("\uB2E4\uC6B4\uB85C\uB4DC")]),_:1})]),_:2},1032,["onClick"])):m("",!0),o(d,{round:"",flat:"",icon:"edit",color:"primary",size:"xs",onClick:n=>t(Q)(e.row)},{default:l(()=>[o(c,null,{default:l(()=>[a("\uC774\uB984\uBC14\uAFB8\uAE30")]),_:1})]),_:2},1032,["onClick"])])):m("",!0)]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","selection","selected"])]),_:1},8,["modelValue"]))}},G={class:"borderd"},H={class:"q-px-lg row no-wrap justify-between items-center bg-grey-2"},K={class:"row no-wrap items-center q-gutter-x-sm"},L=f("div",{class:"font-main",style:{"font-size":"16px","font-weight":"bold"}},"\uD30C\uC77C \uAD00\uB9AC",-1),O={class:"row no-wrap"},ue={__name:"FilesPage",setup(h){const{fnMakeFolder:C,fnUploadFile:Q,fnDeleteFiles:z,fnDownloadFiles:p}=v(),_=$();return U(async()=>{try{_.loading.show(),await P(),_.loading.hide()}catch(s){_.loading.hide(),console.error(s)}}),(s,e)=>(r(),u(T,{class:"q-pa-md"},{default:l(()=>[f("div",G,[f("div",H,[f("div",K,[o(V,{name:"folder_open",color:"primary",size:"24px"}),L]),f("div",O,[o(d,{round:"",flat:"",icon:"create_new_folder",color:"primary",size:"sm",onClick:t(C)},{default:l(()=>[o(c,null,{default:l(()=>[a("\uC0C8\uD3F4\uB354")]),_:1})]),_:1},8,["onClick"]),o(d,{round:"",flat:"",icon:"upload",color:"primary",size:"sm",onClick:t(Q)},{default:l(()=>[o(c,null,{default:l(()=>[a("\uD30C\uC77C\uC5C5\uB85C\uB4DC")]),_:1})]),_:1},8,["onClick"]),o(d,{round:"",flat:"",icon:"download",color:"primary",size:"sm",onClick:t(p)},{default:l(()=>[o(c,null,{default:l(()=>[a("\uB2E4\uC6B4\uB85C\uB4DC")]),_:1})]),_:1},8,["onClick"]),o(N,{vertical:"",spaced:"",inset:""}),o(d,{round:"",flat:"",icon:"delete",color:"red",size:"sm",onClick:t(z)},{default:l(()=>[o(c,null,{default:l(()=>[a("\uC0AD\uC81C")]),_:1})]),_:1},8,["onClick"])])]),o(Z,{selection:"multiple",mode:"page"})])]),_:1}))}};export{ue as default};
