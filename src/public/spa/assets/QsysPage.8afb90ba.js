import{aT as Y,y as b,z,A as a,j as e,P as j,R as B,S as w,B as l,C as i,V as H,W as _,X as p,Y as s,H as n,D as y,bu as R,bA as F,aZ as T,L as k,U as L,aS as W,r as P,o as G,aX as J,J as N,F as ee,b4 as ae,aY as K,aU as X,aV as te,aW as le,O as Q,b7 as ne,b8 as oe,v as se,c as ie,a0 as A,a1 as S,M as de,b0 as re,_ as ce}from"./index.68f6b9c0.js";import{Q as C}from"./QTooltip.9f0cbd4e.js";import{Q as ue}from"./QBadge.727abb89.js";import{Q as fe,a as U}from"./QTable.2c6cf070.js";import{Q as me}from"./QPagination.4b211160.js";import{Q as pe}from"./QPage.c5d19eb7.js";import{_ as _e,a as ve}from"./editDevice.f8f4abc4.js";import{Q as ge}from"./QForm.06149fda.js";import{_ as he}from"./plugin-vue_export-helper.21dcd24c.js";const ye=[{name:"name",label:"\uC774\uB984",align:"center",field:"name",sortable:!0},{name:"deviceId",label:"Device ID",align:"center",field:"deviceId",sortable:!0},{name:"ipaddress",label:"IP Address",align:"center",field:"ipaddress",sortable:!0},{name:"amx",label:"\uD1B5\uD569\uC81C\uC5B4 \uC8FC\uC7A5\uCE58",align:"center",field:"amx",sortable:!0},{name:"actions",label:"\uAE30\uB2A5",align:"center"}],be=l("div",{class:"dialog-name"},"Q-SYS INFO",-1),we={class:"caption font-sans"},xe={class:"q-px-md"},ke=["href"],$e=["href"],Qe={class:"q-pl-sm text-black"},Ie={__name:"infoQsys",props:["device"],emits:[...Y.emits],setup(o,{emit:c}){const{dialogRef:$,onDialogOK:x,onDialogCancel:I}=Y();return(v,V)=>(b(),z(L,{ref_key:"dialogRef",ref:$},{default:a(()=>[e(j,{class:"q-dialog-plugin bg-trans",style:{"border-radius":"8px"}},{default:a(()=>[e(B,{class:"row no-wrap q-gutter-sm items-center"},{default:a(()=>[e(w,{style:{"margin-top":"10px"},name:"img:qsys.svg",size:"1.5rem"}),l("div",null,[be,l("div",we,i(o.device.deviceId),1)])]),_:1}),e(B,null,{default:a(()=>[l("div",xe,[e(H,{dense:""},{default:a(()=>[e(_,{dense:""},{default:a(()=>[e(p,null,{default:a(()=>[e(s,null,{default:a(()=>[n("\uC7A5\uCE58 \uC774\uB984")]),_:1}),e(s,{caption:""},{default:a(()=>[n(i(o.device.name),1)]),_:1})]),_:1})]),_:1}),e(_,{dense:""},{default:a(()=>[e(p,null,{default:a(()=>[e(s,null,{default:a(()=>[n("IP Address")]),_:1}),e(s,{caption:""},{default:a(()=>[l("a",{href:`http://${o.device.ipaddress}`,target:"_blank"},[n(i(o.device.ipaddress)+" ",1),e(w,{class:"cursor-pointer",name:"launch",color:"primary"})],8,ke)]),_:1})]),_:1})]),_:1}),e(_,{dense:""},{default:a(()=>[e(p,null,{default:a(()=>[e(s,null,{default:a(()=>[n("\uD1B5\uD569\uC81C\uC5B4 \uC8FC\uC7A5\uCE58")]),_:1}),o.device.amx?(b(),z(s,{key:1,caption:""},{default:a(()=>[l("a",{href:`http://${o.device.amx}`,target:"_blank"},[n(i(o.device.amx)+" ",1),e(w,{class:"cursor-pointer",name:"launch",color:"primary"})],8,$e)]),_:1})):(b(),z(s,{key:0,caption:""},{default:a(()=>[n("\uD1B5\uD569\uC81C\uC5B4 \uC8FC\uC7A5\uCE58 \uC5C6\uC74C")]),_:1}))]),_:1})]),_:1}),e(_,{dense:""},{default:a(()=>[e(p,null,{default:a(()=>[e(s,null,{default:a(()=>[n("\uC5F0\uACB0 \uC0C1\uD0DC")]),_:1}),e(s,{caption:""},{default:a(()=>[n(i(o.device.connected),1)]),_:1})]),_:1})]),_:1}),e(_,{dense:""},{default:a(()=>[e(p,null,{default:a(()=>[e(s,null,{default:a(()=>[n("\uCF54\uC5B4 \uD50C\uB7AB\uD3FC")]),_:1}),e(s,{caption:""},{default:a(()=>[n(i(o.device.EngineStatus.Platform),1)]),_:1})]),_:1})]),_:1}),e(_,{dense:""},{default:a(()=>[e(p,null,{default:a(()=>[e(s,null,{default:a(()=>[n("\uCF54\uC5B4 \uC0C1\uD0DC")]),_:1}),e(s,{caption:""},{default:a(()=>[n(i(o.device.EngineStatus.State),1)]),_:1})]),_:1})]),_:1}),e(_,{dense:""},{default:a(()=>[e(p,null,{default:a(()=>[e(s,null,{default:a(()=>[n("PA \uC2E4\uC2DC\uAC04 \uB370\uC774\uD130 \uC5F0\uB3D9")]),_:1}),e(s,{caption:""},{default:a(()=>[n(i(o.device.ZoneStatusConfigure),1)]),_:1})]),_:1})]),_:1}),e(_,{dense:""},{default:a(()=>[e(p,null,{default:a(()=>[e(s,null,{default:a(()=>[n("\uC800\uC7A5\uC18C \uC815\uBCF4(\uB0A8\uC740\uB7C9/\uC804\uCCB4)")]),_:1}),e(s,{caption:""},{default:a(()=>[n(i(y(R).humanStorageSize(o.device.storage.free))+" / "+i(y(R).humanStorageSize(o.device.storage.total))+" ",1),l("span",Qe,i(Math.round(o.device.storage.free/o.device.storage.total*100))+"% \uC5EC\uC720 ",1)]),_:1})]),_:1})]),_:1}),e(_,{dense:""},{default:a(()=>[e(p,null,{default:a(()=>[e(s,null,{default:a(()=>[n("\uB9C8\uC9C0\uB9C9 \uC5C5\uB370\uC774\uD2B8")]),_:1}),e(s,{caption:""},{default:a(()=>[n(i(y(F).formatDate(o.device.updatedAt,"YYYY-MM-DD hh:mm:ss A")),1)]),_:1})]),_:1})]),_:1}),e(_,{dense:""},{default:a(()=>[e(p,null,{default:a(()=>[e(s,null,{default:a(()=>[n("\uC7A5\uCE58 \uB4F1\uB85D \uC2DC\uAC04")]),_:1}),e(s,{caption:""},{default:a(()=>[n(i(y(F).formatDate(o.device.createdAt,"YYYY-MM-DD hh:mm:ss A")),1)]),_:1})]),_:1})]),_:1})]),_:1})])]),_:1}),e(T,{align:"right"},{default:a(()=>[e(k,{round:"",flat:"","no-caps":"",color:"primary",icon:"check_circle",onClick:y(x)},null,8,["onClick"])]),_:1})]),_:1})]),_:1},512))}};const E=o=>(ne("data-v-fb97bf36"),o=o(),oe(),o),Se={class:"row no-wrap justify-between items-center q-pa-xs"},Ce={class:"dialog-name row no-wrap items-center q-gutter-x-sm"},Pe=E(()=>l("div",null,"\uBC29\uC1A1\uAD6C\uAC04 \uC218\uC815",-1)),Ve={class:"text-caption"},qe=E(()=>l("span",{class:"text-caption"},"\uB3D9\uC77C\uC9C0\uC5ED\uB9CC \uD45C\uC2DC",-1)),De={class:"table-header-line"},ze=E(()=>l("thead",null,[l("tr",null,[l("th",{style:{width:"50px"}},"\uC9C0\uC5ED"),l("th",{style:{width:"260px"}},"\uC774\uB984"),l("th",{style:{width:"260px"}},"\uB124\uD2B8\uC6CC\uD06C \uC218\uC2E0\uAE30 \uC120\uD0DD")])],-1)),Ze={style:{"text-align":"center",width:"50px"}},Ae={style:{width:"260px"}},Ue={style:{width:"260px"}},Ye={__name:"editZoneSettings",props:["device"],emits:[...Y.emits],setup(o,{emit:c}){const $=o,{dialogRef:x,onDialogCancel:I,onDialogOK:v}=Y(),{fnNotiWarn:V,fnNotiError:M}=W(),g=P([]),q=P([]),D=P([]),Z=P(!1),O=(t,r,f)=>{r(()=>{q.value=D.value.filter(h=>h.name.indexOf(t)>-1)})},d=async t=>{const{data:r}=await Q.get(t?`/devices/barix/ip?ip=${t}`:"/devices/barix");return r.devices},u=async(t,r)=>{if(t===null)return g.value[r].destination="";const f=g.value.findIndex(m=>m.destination===t);if(r!==-1&&r!==f)return g.value[r].destination="",V("\uC774\uBBF8 \uC120\uD0DD\uB41C \uB124\uD2B8\uC6CC\uD06C \uC218\uC2E0\uAE30\uC785\uB2C8\uB2E4.");const h=await Q.get("/devices/qsys/existszones",{params:{id:t,deviceId:$.device.deviceId}});if(h.data&&h.data.value&&h.data.value.length)return h.data.value.findIndex(m=>m.deviceId===$.device.deviceId),g.value[r].destination="",V("\uC774\uBBF8 \uC120\uD0DD\uB41C \uB124\uD2B8\uC6CC\uD06C \uC218\uC2E0\uAE30\uC785\uB2C8\uB2E4.")};return G(async()=>{g.value=[...$.device.ZoneStatus.map(t=>({name:t.name?t.name:"",Zone:t.Zone,destination:t.destination&&t.destination._id?t.destination._id:""}))],D.value=await d(),q.value=D.value}),(t,r)=>(b(),z(L,{ref_key:"dialogRef",ref:x,persistent:""},{default:a(()=>[e(j,{class:"q-dialog-plugin bg-trans",style:{"border-radius":"8px","max-width":"1000px",width:"650px"}},{default:a(()=>[e(B,null,{default:a(()=>[l("div",Se,[l("div",Ce,[e(w,{name:"add_circle",color:"primary",size:"sm"}),l("div",null,[Pe,l("div",Ve,i(o.device.name)+" "+i(o.device.ipaddress),1)])]),l("div",null,[qe,e(J,{modelValue:Z.value,"onUpdate:modelValue":r[0]||(r[0]=f=>Z.value=f),size:"xs"},null,8,["modelValue"])])])]),_:1}),e(ge,{onSubmit:r[1]||(r[1]=f=>y(v)(g.value))},{default:a(()=>[e(B,{class:"row justify-center"},{default:a(()=>[l("table",De,[ze,l("tbody",null,[(b(!0),N(ee,null,ae(g.value,(f,h)=>(b(),N("tr",{key:h},[l("td",Ze,i(f.Zone),1),l("td",Ae,[e(K,{filled:"",dense:"",modelValue:f.name,"onUpdate:modelValue":m=>f.name=m,label:`\uCC44\uB110 ${f.Zone}`},null,8,["modelValue","onUpdate:modelValue","label"])]),l("td",Ue,[e(X,{filled:"",dense:"",clearable:"",modelValue:f.destination,"onUpdate:modelValue":[m=>f.destination=m,m=>u(m,h)],options:q.value,label:`\uCC44\uB110 ${f.Zone} \uB124\uD2B8\uC6CC\uD06C \uC218\uC2E0\uAE30 \uC120\uD0DD`,"option-value":"_id","option-label":"name","hide-selected":"","use-input":"","fill-input":"","input-debounce":"0","emit-value":"","map-options":"",onFilter:O},{prepend:a(()=>[e(w,{name:"place"})]),option:a(m=>[e(_,te(le(m.itemProps)),{default:a(()=>[e(p,{avatar:""},{default:a(()=>[e(w,{name:"storage"})]),_:1}),e(p,null,{default:a(()=>[e(s,null,{default:a(()=>[n(i(m.opt.name),1)]),_:2},1024),e(s,{caption:""},{default:a(()=>[n(i(m.opt.ipaddress),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:2},1032,["modelValue","onUpdate:modelValue","options","label"])])]))),128))])])]),_:1}),e(T,{align:"right"},{default:a(()=>[e(k,{round:"",flat:"",color:"red-10",icon:"cancel",onClick:y(I)},null,8,["onClick"]),e(k,{round:"",flat:"","no-caps":"",color:"primary",icon:"check_circle",type:"submit"})]),_:1})]),_:1})]),_:1})]),_:1},512))}};var Be=he(Ye,[["__scopeId","data-v-fb97bf36"]]);const Ne={class:"borderd"},Oe={class:"q-px-lg q-py-sm row no-wrap justify-between items-center bg-grey-3"},Ee={class:"row no-wrap items-center q-gutter-x-sm"},Me=l("div",{class:"font-main"},"\uC5C5\uBB34\uBC29\uC1A1 \uC8FC\uC7A5\uCE58",-1),Re=["href"],Fe=["href"],je={key:1,class:"text-caption text-grey"},Te={class:"row justify-center q-py-md",style:{position:"relative"}},Le={class:"row items-center q-px-md",style:{position:"absolute",right:"0",top:"1px","font-size":"0.8rem"}},We=l("span",null,"\uD398\uC774\uC9C0\uB2F9 \uD45C\uC2DC",-1),na={__name:"QsysPage",setup(o){const c=se(),{fnNotiInfo:$,fnNotiError:x}=W(),I=P(""),v=P({sortBy:"",descending:!1,page:1,rowsPerPage:10}),V=ie(()=>A.value&&A.value.length>0?Math.ceil(A.value.length/v.value.rowsPerPage):1),M=()=>{c.dialog({component:_e,componentProps:{title:"\uC5C5\uBB34\uBC29\uC1A1\uC8FC\uC7A5\uCE58 \uCD94\uAC00",type:"qsys"}}).onOk(async d=>{try{c.loading.show(),await Q.post("/devices/qsys",{...d})}catch{x({message:"\uC5C5\uBB34\uBC29\uC1A1 \uC8FC\uC7A5\uCE58 \uCD94\uAC00 \uC624\uB958",caption:"\uC7A0\uC2DC\uD6C4\uC5D0 \uB2E4\uC2DC \uC2DC\uB3C4\uD574 \uC8FC\uC138\uC694."})}finally{await S(),c.loading.hide()}})},g=d=>{c.dialog({component:Ie,componentProps:{device:d}})},q=d=>{c.dialog({component:ve,componentProps:{title:"\uC5C5\uBB34\uBC29\uC1A1\uC8FC\uC7A5\uCE58 \uC218\uC815",type:"qsys",device:d}}).onOk(async u=>{try{c.loading.show(),await Q.put("/devices/qsys/edit",{...u})}catch{x({message:"\uC5C5\uBB34\uBC29\uC1A1 \uC8FC\uC7A5\uCE58 \uC218\uC815 \uC624\uB958",caption:"\uC7A0\uC2DC\uD6C4\uC5D0 \uB2E4\uC2DC \uC2DC\uB3C4\uD574 \uC8FC\uC138\uC694."})}finally{S(),c.loading.hide()}})},D=d=>{c.dialog({component:Be,componentProps:{device:d}}).onOk(async u=>{try{c.loading.show(),await Q.put("/devices/qsys/updatenames",{deviceId:d.deviceId,arr:u})}catch{x({message:"\uBC29\uC1A1\uAD6C\uAC04 \uC218\uC815 \uC624\uB958",caption:"\uC7A0\uC2DC\uD6C4\uC5D0 \uB2E4\uC2DC \uC2DC\uB3C4\uD574 \uC8FC\uC138\uC694."})}finally{S(),c.loading.hide()}})},Z=async d=>{$(`${d.name}\uC758 \uC804\uCCB4 \uC124\uC815 \uAC12 \uAC31\uC2E0\uC744 \uC2DC\uC791\uD569\uB2C8\uB2E4.`,"\uC7A0\uC2DC\uB9CC \uAE30\uB2E4\uB824\uC8FC\uC138\uC694."),re("zone:set:device",{...d}),await Q.put("/devices/qsys/pagereset",{deviceId:d.deviceId}),await S()},O=d=>{c.dialog({component:ce,componentProps:{icon:"delete",iconColor:"red-10",title:"\uC5C5\uBB34\uBC29\uC1A1 \uC8FC\uC7A5\uCE58 \uC0AD\uC81C",message:`${d.name} ${d.ipaddress}`}}).onOk(async()=>{try{c.loading.show(),await Q.delete("/devices/qsys",{data:{...d}}),c.loading.hide()}catch{x({message:"\uC5C5\uBB34\uBC29\uC1A1 \uC8FC\uC7A5\uCE58 \uC0AD\uC81C \uC624\uB958",caption:"\uC7A0\uC2DC\uD6C4\uC5D0 \uB2E4\uC2DC \uC2DC\uB3C4\uD574 \uC8FC\uC138\uC694."})}finally{await S(),c.loading.hide()}})};return G(async()=>{try{c.loading.show(),await S()}catch{}finally{c.loading.hide()}}),(d,u)=>(b(),z(pe,{class:"page"},{default:a(()=>[l("div",Ne,[l("div",Oe,[l("div",Ee,[e(w,{name:"img:qsys.svg",color:"primary",size:"sm"}),Me,l("div",null,[e(w,{class:"cursor-pointer",name:"add_circle",size:"sm",color:"primary",onClick:M},{default:a(()=>[e(C,null,{default:a(()=>[n("\uC7A5\uCE58 \uCD94\uAC00")]),_:1})]),_:1})])]),e(K,{modelValue:I.value,"onUpdate:modelValue":u[0]||(u[0]=t=>I.value=t),borderless:"",dense:"",debounce:"300",placeholder:"Search",clearable:""},{append:a(()=>[e(w,{class:"cursor-pointer",name:"search"})]),_:1},8,["modelValue"])]),e(fe,{columns:y(ye),rows:y(A),filter:I.value,pagination:v.value,"onUpdate:pagination":u[1]||(u[1]=t=>v.value=t),"hide-pagination":"",flat:""},{"body-cell-name":a(t=>[e(U,{props:t},{default:a(()=>[l("div",null,[e(ue,{rounded:"",color:t.row.connected?"primary":"red-10"},null,8,["color"]),n(" "+i(t.value),1)])]),_:2},1032,["props"])]),"body-cell-ipaddress":a(t=>[e(U,{props:t},{default:a(()=>[l("a",{href:`http://${t.value}`,target:"_blank"},i(t.value),9,Re)]),_:2},1032,["props"])]),"body-cell-amx":a(t=>[e(U,{props:t},{default:a(()=>[t.row.amx?(b(),N("a",{key:0,href:`http://${t.value}`,target:"_blank"},i(t.value),9,Fe)):(b(),N("div",je," \uD1B5\uD569\uC81C\uC5B4 \uC8FC\uC7A5\uCE58 \uC5C6\uC74C "))]),_:2},1032,["props"])]),"body-cell-actions":a(t=>[e(U,{props:t},{default:a(()=>[l("div",null,[e(k,{round:"",flat:"",color:"primary",icon:"info",size:"sm",onClick:r=>g(t.row)},{default:a(()=>[e(C,null,{default:a(()=>[n("\uC0C1\uC138\uC815\uBCF4")]),_:1})]),_:2},1032,["onClick"]),e(k,{round:"",flat:"",color:"primary",icon:"edit",size:"sm",onClick:r=>q(t.row)},{default:a(()=>[e(C,null,{default:a(()=>[n("\uC218\uC815")]),_:1})]),_:2},1032,["onClick"]),e(k,{round:"",flat:"",color:"blue",icon:"edit_note",size:"sm",onClick:r=>D(t.row)},{default:a(()=>[e(C,null,{default:a(()=>[n("\uBC29\uC1A1\uAD6C\uAC04\uC218\uC815")]),_:1})]),_:2},1032,["onClick"]),e(k,{round:"",flat:"",color:"primary",icon:"refresh",size:"sm",onClick:r=>Z(t.row)},{default:a(()=>[e(C,null,{default:a(()=>[n("\uC7AC\uC124\uC815")]),_:1})]),_:2},1032,["onClick"]),e(k,{round:"",flat:"",color:"red-10",icon:"delete",size:"sm",onClick:r=>O(t.row)},{default:a(()=>[e(C,null,{default:a(()=>[n("\uC0AD\uC81C")]),_:1})]),_:2},1032,["onClick"])])]),_:2},1032,["props"])]),_:1},8,["columns","rows","filter","pagination"]),e(de),l("div",Te,[e(me,{modelValue:v.value.page,"onUpdate:modelValue":u[2]||(u[2]=t=>v.value.page=t),max:V.value,"max-pages":8,size:"12px",flat:"","active-design":"outline","direction-links":"","boundary-links":""},null,8,["modelValue","max"]),l("div",Le,[We,e(X,{style:{"font-size":"0.8rem"},borderless:"","item-aligned":"",dense:"","hide-bottom-space":"","map-options":"",modelValue:v.value.rowsPerPage,"onUpdate:modelValue":u[3]||(u[3]=t=>v.value.rowsPerPage=t),options:[5,10,15,20,25,30,40,50]},null,8,["modelValue"])])])])]),_:1}))}};export{na as default};
