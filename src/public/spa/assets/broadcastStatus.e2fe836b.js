import{aE as J,u as B,r as S,o as M,x as u,y as b,z as o,j as t,N as Y,O as Z,A as a,S as m,E as v,B as d,V as ee,aM as te,aN as ne,W as w,X as Q,aO as ae,C as z,aP as oe,aQ as se,aF as ie,J as P,P as le,M as D,aR as V,aS as re,L as O,H as h,I as R,aT as N,K as A,aU as U,aV as L,aW as E,aX as de,F,aY as ce,G as $}from"./index.568a708f.js";import{Q as ue}from"./QExpansionItem.cf10792c.js";import{Q as me}from"./QTooltip.68db7ee9.js";import{Q as ve}from"./QSelect.7a7901d8.js";import{_ as fe}from"./editSingleName.880af898.js";import{f as j,b as q,u as pe}from"./useBarix.38b8f659.js";import{u as _e}from"./useNotify.2c7e2d4a.js";import{_ as G}from"./plugin-vue_export-helper.21dcd24c.js";const ge={class:"row no-wrap justify-between items-center"},ze={class:"row no-wrap items-center q-gutter-x-md"},he=a("div",{class:"dialog-name"},"\uBC29\uC1A1\uC9C0\uC5ED\uC124\uC815",-1),ye={class:"dialog-caption row no-wrap items-center cursor-pointer"},xe={__name:"setSigleChannel",props:["device","zone"],setup(e){const{fnNotiWarn:f,fnNotiError:y}=_e(),{dialogRef:x,onDialogCancel:i,onDialogOK:r}=J(),n=e,p=B(),_=S([]),g=S(null),C=S(0),k=S(""),T=(c,l,s)=>{l(()=>{_.value=q.value.filter(I=>I.name.indexOf(c)>-1)})},W=async()=>{p.dialog({component:fe,componentProps:{title:"\uC9C0\uC5ED \uC774\uB984 \uBCC0\uACBD",caption:`${n.device.name} \uC9C0\uC5ED\uC758 ${k.value} \uC9C0\uC5ED \uC774\uB984\uC744 \uBCC0\uACBD\uD569\uB2C8\uB2E4.`,name:k}}).onOk(async c=>{try{p.loading.show(),await D.put("/devices/qsys/modifiedzonename",{deviceId:n.device.deviceId,zone:n.zone.Zone,name:c}),k.value=c,await V()}catch{y("\uC9C0\uC5ED \uC774\uB984 \uBCC0\uACBD\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.","\uC7A0\uC2DC\uD6C4\uC5D0 \uB2E4\uC2DC \uC2DC\uB3C4\uD574\uC8FC\uC138\uC694.")}finally{p.loading.hide()}})},K=async c=>{let l="";if(c!==null){const s=await D.get("/devices/qsys/existszone",{params:{id:c}});if(l=q.value[q.value.findIndex(I=>I._id===c)].ipaddress,s.data&&s.data.value&&s.data.value.length)return s.data.value[0].ZoneStatus.findIndex(H=>H.destination===c)===n.zone.Zone-1?void 0:(g.value=null,f("\uB2E4\uB978 \uBC29\uC1A1 \uAD6C\uAC04\uC5D0\uC11C \uC774\uBBF8 \uC0AC\uC6A9\uC911\uC785\uB2C8\uB2E4"))}await re({deviceId:n.device.deviceId,zone:n.zone.Zone,destination:c,ipaddress:l}),await V()},X=()=>{O.emit("zone:set:channel",{deviceId:n.device.deviceId,...n.zone,gain:C.value})};return M(async()=>{await j(),console.log(n.zone),_.value=q.value,C.value=n.zone.gain,k.value=n.zone.name,n.zone.destination&&n.zone.destination._id&&(g.value=n.zone.destination._id)}),(c,l)=>(u(),b(le,{ref_key:"dialogRef",ref:x},{default:o(()=>[t(Y,{class:"q-dialog-plugin",style:{"border-radius":"8px"}},{default:o(()=>[t(Z,null,{default:o(()=>{var s;return[a("div",ge,[a("div",ze,[t(m,{name:"location_on",color:"primary",size:"1.5rem"}),a("div",null,[he,a("div",ye,[v(d(`${e.device.name} ${e.zone.Zone}. ${(s=k.value)!=null?s:"\uC774\uB984\uC5C6\uC74C"} \uCC44\uB110 `)+" ",1),t(m,{name:"edit",color:"primary",onClick:W})])])]),t(m,{class:"cursor-pointer",name:"refresh",size:"sm",color:"primary",onClick:X},{default:o(()=>[t(me,null,{default:o(()=>[v("\uC0C8\uB85C\uACE0\uCE68")]),_:1})]),_:1})])]}),_:1}),t(Z,null,{default:o(()=>[t(ve,{filled:"",dense:"",clearable:"",modelValue:g.value,"onUpdate:modelValue":[l[0]||(l[0]=s=>g.value=s),K],options:_.value,label:"\uB124\uD2B8\uC6CC\uD06C \uC218\uC2E0\uAE30 \uC120\uD0DD","option-value":"_id","option-label":"name","hide-selected":"","use-input":"","fill-input":"","input-debounce":"0","emit-value":"","map-options":"",onFilter:T},{option:o(s=>[t(ee,te(ne(s.itemProps)),{default:o(()=>[t(w,{avatar:""},{default:o(()=>[t(m,{name:"storage"})]),_:1}),t(w,null,{default:o(()=>[t(Q,null,{default:o(()=>[v(d(s.opt.name),1)]),_:2},1024),t(Q,{caption:""},{default:o(()=>[v(d(s.opt.ipaddress),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options"])]),_:1}),t(Z,null,{default:o(()=>[a("div",null,[t(ae,{modelValue:C.value,"onUpdate:modelValue":[l[2]||(l[2]=s=>C.value=s),l[3]||(l[3]=s=>z(oe)({deviceId:e.device.deviceId,zone:e.zone.Zone,volume:s}))],filled:"",dense:"",label:"\uBCFC\uB968",type:"number"},{append:o(()=>[t(m,{class:"cursor-pointer",name:e.zone.mute?"volume_off":"volume_up",color:e.zone.mute?"red-10":"primary",onClick:l[1]||(l[1]=s=>z(se)({deviceId:e.device.deviceId,zone:e.zone.Zone,mute:!e.zone.mute}))},null,8,["name","color"])]),_:1},8,["modelValue"])])]),_:1}),t(ie,{align:"right"},{default:o(()=>[t(P,{round:"",flat:"",color:"red-10",icon:"cancel",onClick:z(i)},null,8,["onClick"]),t(P,{round:"",flat:"","no-caps":"",color:"primary",icon:"check_circle",onClick:z(r)},null,8,["onClick"])]),_:1})]),_:1})]),_:1},512))}};const ke=e=>(U("data-v-5501edbc"),e=e(),L(),e),we={class:"floating-position q-gutter-x-xs row no-wrap items-center"},Ce={class:"floating-font"},Ie={class:""},Se={key:0},$e={class:"column items-end text-caption"},qe={class:"row q-gutter-x-xs cursor-pointer"},be=["href"],Qe={key:1},Ze={class:"column items-end text-caption"},Ve=ke(()=>a("div",null,"Local",-1)),Be={class:"row q-gutter-x-xs"},Pe={__name:"statusDevice",props:["zone","device"],setup(e){pe();const f=B(),y=i=>i&&i.status?i.streamurl?"green":"yellow":"red",x=(i,r)=>{f.dialog({component:xe,componentProps:{device:i,zone:r}})};return(i,r)=>{var n;return u(),h("div",{class:N(["borderd q-pt-md q-px-sm q-pb-sm q-gutter-sx",e.zone.Active?i.fnCheckPriority(e.zone.Priority):""]),style:{position:"relative","min-width":"100px"}},[a("div",we,[a("span",Ce,d(e.zone.gain),1),e.zone.mute?(u(),b(m,{key:0,name:"volume_off",color:"red-10"})):R("",!0),t(m,{class:"cursor-pointer",name:"settings",color:"primary",onClick:r[0]||(r[0]=p=>x(e.device,e.zone))})]),a("div",Ie,[a("span",null,d(e.zone.Zone)+". ",1),a("span",{class:N(e.zone.name?"text-black text-bold":"text-grey-5")},d((n=e.zone.name)!=null?n:"\uC774\uB984\uC5C6\uC74C"),3)]),e.zone.destination?(u(),h("div",Se,[a("div",null,[t(A,{class:"q-my-sm"})]),a("div",$e,[a("div",qe,[v(d(e.zone.destination.name)+" ",1),t(m,{name:"circle",color:y(e.zone.destination)},null,8,["color"])]),a("a",{href:`http://${e.zone.destination.ipaddress}`,target:"_blank"},d(e.zone.destination.ipaddress),9,be)])])):(u(),h("div",Qe,[a("div",null,[t(A,{class:"q-my-sm"})]),a("div",Ze,[Ve,a("div",Be,"Channel "+d(e.zone.Zone),1)])]))],2)}}};var De=G(Pe,[["__scopeId","data-v-5501edbc"]]);const Ne=e=>(U("data-v-171e4c78"),e=e(),L(),e),Ae={class:"row no-wrap justify-start items-center q-gutter-x-sm header-font"},Ee=Ne(()=>a("span",null,"\uC9C0\uC5ED \uBC29\uC1A1\uC911",-1)),Fe={class:"row q-pa-md q-gutter-sm"},Me={__name:"broadcastStatus",setup(e){const f=B(),y=i=>{let r=0;for(let n=0;n<i.length;n++)i[n].Active&&(r+=1);return r},x=i=>{if($.value.isAdmin)return!0;if($.value.zones&&$.value.zones.length){for(let r of $.value.zones)if(r===i)return!0}return!1};return M(async()=>{f.loading.show(),await V(),await j(),f.loading.hide()}),(i,r)=>(u(!0),h(F,null,E(z(ce),(n,p)=>(u(),b(ue,{key:p,"header-class":"bg-grey-1"},{header:o(()=>[t(w,{avatar:""},{default:o(()=>[t(m,{color:n.connected?"primary":"red-10",name:"location_on",size:"md"},null,8,["color"])]),_:2},1024),t(w,null,{default:o(()=>[t(Q,null,{default:o(()=>[a("div",null,[v(d(n.name)+" ",1),x(n.deviceId)?(u(),b(m,{key:0,class:"q-ml-sm cursor-pointer",color:"grey",name:"refresh",onClick:de(_=>z(O).emit("zone:set:device",n.deviceId),["prevent","stop"])},null,8,["onClick"])):R("",!0)])]),_:2},1024),t(Q,{caption:""},{default:o(()=>[v(d(n.ipaddress),1)]),_:2},1024)]),_:2},1024),t(w,{side:""},{default:o(()=>[a("div",Ae,[v(d(y(n.ZoneStatus))+" ",1),Ee])]),_:2},1024)]),default:o(()=>[a("div",Fe,[(u(!0),h(F,null,E(n.ZoneStatus,(_,g)=>(u(),h("div",{key:g},[t(De,{zone:_,device:n},null,8,["zone","device"])]))),128))])]),_:2},1024))),128))}};var Xe=G(Me,[["__scopeId","data-v-171e4c78"]]);export{Xe as B};
