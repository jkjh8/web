import{y as r,z as h,A as n,B as t,j as e,R as v,C as x,aX as se,D as l,G as w,J as k,aY as oe,I as m,bW as i,bX as ae,c as ne,bl as ie,v as M,o as j,F as C,aW as V,aU as N,aV as B,K as Q,aD as W,bY as X,r as I,bZ as T,N as U,O as $,aT as re,bF as le,b_ as Z,aE as A,P as J,b$ as D,aQ as P,c0 as G,h as S,$ as ce,c1 as de,c2 as ue,c3 as K,c4 as me,c5 as E,aK as _e}from"./index.221aab42.js";import{a as pe,Q as ve}from"./useFiles.f30e33ea.js";import{Q as fe}from"./QPage.0b77aa4d.js";import{Q as ge}from"./QSpace.752eb8e7.js";import{Q as F}from"./QTooltip.35ace030.js";import{Q as O}from"./QBadge.ae2c2687.js";import{u as ye}from"./useQsysFunc.c0bc3773.js";import{Q as R}from"./QSelect.d6395dea.js";import{f as Y,_ as we,a as he,u as xe,D as $e}from"./DialogTts.1431adaf.js";import{_ as L}from"./plugin-vue_export-helper.21dcd24c.js";import{u as H}from"./usePlayer.f5fc4ea8.js";import"./QSlideTransition.770a3d0e.js";import"./QMenu.e65edd37.js";import"./DialogConfirm.c6b7f481.js";import"./QTd.bbaa06bc.js";import"./QLinearProgress.899e2802.js";import"./QExpansionItem.15c5ebed.js";import"./QTr.52412947.js";import"./useNotify.37ca9f9e.js";const ke={class:"row fit items-center q-gutter-x-sm"},be={style:{"font-size":"1rem","font-weight":"500"}},qe={class:"text-grey-8"},ze={class:"row items-center q-gutter-x-sm text-grey-7"},Ce={__name:"statusTree",setup(o){const{fnBroadcastCancel:u}=ye(),c=d=>{let a=0;for(let s=0;s<d.length;s++)d[s].Active&&(a+=1);return a};return(d,a)=>(r(),h(pe,{class:"custom-q-tree",nodes:l(oe),"node-key":"_id","children-key":"ZoneStatus","no-node-label":"\uBC29\uC1A1\uAD6C\uAC04\uC774 \uC5C6\uC2B5\uB2C8\uB2E4"},{"header-root":n(s=>[t("div",ke,[e(v,{color:s.node.connected?"primary":"red-10",name:"location_on",size:"sm"},null,8,["color"]),t("div",be,x(s.node.name),1),e(ge),t("div",qe,x(c(s.node.ZoneStatus))+"\uAC1C \uC9C0\uC5ED \uBC29\uC1A1\uC911 ",1),c(s.node.ZoneStatus)?(r(),h(v,{key:0,class:"cursor-pointer",name:"cancel",color:"red-10",onClick:se(_=>l(u)(s.node),["prevent","stop"])},{default:n(()=>[e(F,null,{default:n(()=>[w("\uBC29\uC1A1\uCDE8\uC18C")]),_:1})]),_:2},1032,["onClick"])):k("",!0)])]),"default-header":n(s=>[t("div",ze,[t("div",null,[w(x(s.node.name?s.node.name:"no name")+" ",1),s.node.Active?(r(),h(O,{key:0,color:"green"},{default:n(()=>[w(" ONAIR ")]),_:1})):k("",!0)])])]),_:1},8,["nodes"]))}},Se={class:"q-gutter-y-xs"},Qe={class:"row no-wrap items-center q-gutter-x-xs"},Pe=t("div",null,"\uBC29\uC1A1\uBAA8\uB4DC",-1),Ie={__name:"pageMode",setup(o){return(u,c)=>(r(),m("div",Se,[t("div",Qe,[e(v,{name:"list",color:"primary",size:"sm"}),Pe]),e(R,{class:"q-mt-xs",modelValue:l(i).Mode,"onUpdate:modelValue":c[0]||(c[0]=d=>l(i).Mode=d),options:l(ae),dense:"",filled:"","map-options":"","emit-value":""},null,8,["modelValue","options"])]))}},Me={class:"row no-wrap justify-between items-center"},je={class:"row no-wrap justify-start items-center q-gutter-x-sm"},Ve=t("div",null,"\uCC60\uC784",-1),Ze={__name:"pagePreamble",props:["preamble"],emits:["update:value"],setup(o,{emit:u}){const c=o,d=u,a=ne({get(){return c.preamble==="Chime ascending triple.wav"},set(){return c.preamble?d("update:value",""):d("update:value","Chime ascending triple.wav")}});return(s,_)=>(r(),m("div",Me,[t("div",je,[e(v,{name:"notifications_none",color:"green-10",size:"sm"}),Ve]),e(ie,{modelValue:a.value,"onUpdate:modelValue":_[0]||(_[0]=p=>a.value=p)},null,8,["modelValue"])]))}},Te={class:"q-gutter-y-xs"},De={class:"row no-wrap items-center q-gutter-x-sm"},Ne=t("div",null,"\uC6B0\uC120\uC21C\uC704",-1),Be={__name:"pagePriority",setup(o){return(u,c)=>(r(),m("div",Te,[t("div",De,[e(v,{name:"priority_high",color:"lime-10",size:"sm"}),Ne]),e(R,{class:"q-mt-xs",modelValue:l(i).Priority,"onUpdate:modelValue":c[0]||(c[0]=d=>l(i).Priority=d),dense:"",filled:"",options:[{value:1,label:"EM"},{value:3,label:"Nomal"}],"emit-value":"","map-options":""},null,8,["modelValue"])]))}};const ee=o=>(N("data-v-092b3868"),o=o(),B(),o),Ue={class:"row no-wrap justify-between items-center"},Ae={class:"row no-wrap items-center q-gutter-x-xs"},Fe=ee(()=>t("div",null,"\uBC29\uC1A1\uAD6C\uAC04",-1)),Oe={key:0,class:"panel q-py-sm q-px-sm q-mt-sm q-gutter-x-sm row justify-start items-center"},Re={key:1,class:"panel q-pa-sm q-mt-sm row justify-start items-center"},Le=ee(()=>t("span",null," \uC120\uD0DD\uB41C \uBC29\uC1A1\uAD6C\uAC04\uC774 \uC5C6\uC2B5\uB2C8\uB2E4. ",-1)),Ge=[Le],Ke={__name:"pageZones",props:["devices","zones"],emits:["update:zones","update:devices"],setup(o,{emit:u}){const c=M(),d=o,a=u,s=()=>{c.dialog({component:we,componentProps:{selected:d.devices}}).onOk(_=>{a("update:devices",_),a("update:zones",Y(_))})};return j(()=>{d.devices&&d.devices.length&&a("update:zones",Y(d.devices))}),(_,p)=>(r(),m(C,null,[t("div",Ue,[t("div",Ae,[e(v,{name:"location_on",color:"primary",size:"sm"}),Fe]),e(v,{class:"cursor-pointer q-mr-xs",name:"add_circle",color:"primary",size:"sm",onClick:s})]),o.zones&&o.zones.length?(r(),m("div",Oe,[(r(!0),m(C,null,V(o.zones,(g,y)=>(r(),h(O,{key:y},{default:n(()=>[w(x(g),1)]),_:2},1024))),128))])):(r(),m("div",Re,Ge))],64))}};var Ee=L(Ke,[["__scopeId","data-v-092b3868"]]);const Ye={class:"row no-wrap justify-start items-center q-gutter-x-sm"},We=t("div",null,"\uBC29\uC1A1\uC2DC\uAC04(\uCD08)",-1),Xe=t("div",{class:"text-caption text-red",style:{"text-align":"right"}}," \uCD5C\uB300 \uBC29\uC1A1 \uC2DC\uAC04\uC740 4\uBD84(240\uCD08)\uC73C\uB85C \uC81C\uD55C \uB429\uB2C8\uB2E4. ",-1),Je={__name:"pageLive",setup(o){return(u,c)=>(r(),m(C,null,[t("div",Ye,[e(v,{name:"timer",color:"pink-8",size:"sm"}),We]),e(R,{modelValue:l(i).MaxPageTime,"onUpdate:modelValue":c[0]||(c[0]=d=>l(i).MaxPageTime=d),dense:"",filled:"",options:[30,60,90,120,150,180,210,240]},null,8,["modelValue"]),Xe],64))}},He={class:"row no-wrap justify-between items-center"},et={class:"row no-wrap justify-start items-center q-gutter-x-sm"},tt=t("div",null,"\uD30C\uC77C",-1),st={key:0,class:"bg-grey-2 q-pa-sm q-mt-sm q-gutter-x-sm row no-wrap justify-between items-center",style:{"border-radius":"2px","min-height":"40px"}},ot={key:1,class:"bg-grey-2 q-pa-sm q-mt-sm row justify-start items-center",style:{"border-radius":"2px",height:"40px"}},at=t("span",null," \uC120\uD0DD\uB41C \uD30C\uC77C\uC774 \uC5C6\uC2B5\uB2C8\uB2E4. ",-1),nt=[at],it={__name:"pageFile",props:["file"],emits:["update:value"],setup(o,{emit:u}){const c=o,d=u,a=M(),{fnPlayStart:s}=H(),_=()=>{a.dialog({component:he,componentProps:{file:c.file}}).onOk(p=>{d("update:value",p[0])})};return(p,g)=>(r(),m(C,null,[t("div",He,[t("div",et,[e(v,{name:"save",color:"primary",size:"sm"}),tt]),e(v,{class:"cursor-pointer",name:"add_circle",color:"primary",size:"sm",onClick:_})]),o.file?(r(),m("div",st,[t("div",null,[e(v,{class:"cursor-pointer",name:"play_arrow",color:"primary",size:"xs",onClick:g[0]||(g[0]=y=>l(s)(o.file))}),w(" "+x(o.file.base),1)]),e(v,{class:"cursor-pointer q-mr-sm",name:"cancel",color:"red-10",size:"sm",onClick:g[1]||(g[1]=y=>d("update:value",null))})])):(r(),m("div",ot,nt))],64))}},rt={class:"col q-gutter-y-sm"},lt={class:"row no-wrap justify-between items-center"},ct={class:"row no-wrap justify-between items-center q-gutter-x-sm"},dt=t("div",null,"TTS (Text to Speech)",-1),ut={class:"row no-wrap justify-between items-center"},mt={key:0,class:"row no-wrap justify-between items-center q-gutter-x-sm"},_t={key:1,class:"text-red-10 row items-center"},pt={__name:"pageTts",props:["file"],emits:["update:value"],setup(o,{emit:u}){const{fnDeleteFile:c}=xe(),d=o,a=u,{fnPlayStart:s}=H(),_=M(),p=async()=>{await c(),a("update:value",null)},g=()=>{_.dialog({component:$e,componentProps:{file:d.file}}).onOk(y=>{console.log(y),a("update:value",y)})};return j(async()=>{a("update:value",null)}),(y,f)=>(r(),m("div",rt,[t("div",lt,[t("div",ct,[e(v,{name:"volume_up",color:"primary",size:"sm"}),dt]),e(Q,{round:"",unelevated:"",color:"primary",icon:"mic",size:"sm",onClick:g},{default:n(()=>[e(F,null,{default:n(()=>[w("\uC74C\uC131\uD569\uC131")]),_:1})]),_:1})]),t("div",ut,[o.file?(r(),m("div",mt,[t("div",null,[e(v,{class:"cursor-pointer",name:"play_arrow",color:"primary",size:"sm",onClick:f[0]||(f[0]=b=>l(s)(o.file))}),w(" "+x(o.file.base),1)]),e(v,{class:"cursor-pointer q-mr-sm",name:"cancel",color:"red-10",size:"sm",onClick:p})])):(r(),m("div",_t,[e(v,{name:"warning"}),w(" \uD569\uC131\uB41C \uD30C\uC77C\uC774 \uC5C6\uC2B5\uB2C8\uB2E4. ")]))])]))}};const te=o=>(N("data-v-206d3806"),o=o(),B(),o),vt={class:"q-dialog-plugin bg-trans broadcast-popup"},ft={key:0},gt={class:"row justify-center q-pt-md text-grey"},yt={class:"fit column q-gutter-y-sm",style:{width:"50%"}},wt={style:{"text-align":"right"}},ht=te(()=>t("div",{class:"name"},"\uBC29\uC1A1\uBAA8\uB4DC",-1)),xt={style:{"text-align":"right"}},$t=te(()=>t("div",{class:"name"},"\uBC29\uC1A1\uAD6C\uAC04",-1)),kt={class:"fit row justify-end"},bt={class:"fit row no-wrap justify-center items-center q-mb-md q-gutter-x-sm"},qt={__name:"pageLive",setup(o){const{dialogRef:u,onDialogCancel:c,onDialogOK:d}=W(),{fnZoneActive:a}=X(),s=I(!1),_=I(0);let p=null;const g=async()=>{s.value=!0;try{T();const f=await D(i.devices),b=await P.put("/broadcast/active",{devices:f.map(z=>({deviceId:z.deviceId,Zones:z.params.Zones}))});if(console.log(b),b&&b.active)return a();const{data:q}=await P.put("/broadcast/live",{...i,devices:f,zones:i.zones});G.value=q.idx}catch(f){console.error(f)}p=setInterval(()=>{_.value++},1e3)},y=async()=>{try{const f=await P.get("/broadcast/stop",{params:{idx:G.value}});console.log(f)}catch(f){console.error(f)}s.value=!1,clearInterval(p),p=null,_.value=0};return j(()=>{T()}),(f,b)=>(r(),h(J,{ref_key:"dialogRef",ref:u,persistent:""},{default:n(()=>[t("div",vt,[e(v,{class:"floatingIcon cursor-pointer",name:"cancel",color:"red",size:"md",onClick:l(c)},{default:n(()=>[e(F,null,{default:n(()=>[w("Close")]),_:1})]),_:1},8,["onClick"]),e(U,{class:"transBG"},{default:n(()=>[e($,null,{default:n(()=>[t("div",{class:re(["q-pa-md row no-wrap text-grey-2",s.value?"justify-between":"justify-end"]),style:{height:"90%","min-height":"400px","font-family":"'NanumSquare'"}},[s.value?(r(),m("div",ft,[e(le,{color:"primary",size:"14rem",thickness:8}),t("div",gt," \uBC29\uC1A1\uC911 "+x(_.value)+"\uCD08 \uACBD\uACFC ",1)])):k("",!0),t("div",yt,[t("div",wt,[ht,t("div",null,x(l(i).Mode),1)]),t("div",xt,[$t,t("div",kt,[(r(!0),m(C,null,V(l(i).zones,(q,z)=>(r(),h(O,{key:z,class:"q-ml-xs"},{default:n(()=>[w(x(q),1)]),_:2},1024))),128))])]),t("div",null,[(r(!0),m(C,null,V(l(Z),(q,z)=>(r(),m("div",{key:z,style:{"text-align":"right"}},x(l(Z)[z]),1))),128))])])],2)]),_:1}),e(A,null,{default:n(()=>[t("div",bt,[e(Q,{style:{width:"10rem"},unelevated:"",color:"primary",onClick:g},{default:n(()=>[w("\uC2DC\uC791")]),_:1}),e(Q,{style:{width:"10rem"},unelevated:"",color:"red-10",onClick:y},{default:n(()=>[w("\uC911\uC9C0")]),_:1})])]),_:1})]),_:1})])]),_:1},512))}};var zt=L(qt,[["__scopeId","data-v-206d3806"]]);const Ct=[S("circle",{cx:"50",cy:"50",r:"48",fill:"none","stroke-width":"4","stroke-miterlimit":"10",stroke:"currentColor"}),S("line",{"stroke-linecap":"round","stroke-width":"4","stroke-miterlimit":"10",stroke:"currentColor",x1:"50",y1:"50",x2:"85",y2:"50.5"},[S("animateTransform",{attributeName:"transform",type:"rotate",from:"0 50 50",to:"360 50 50",dur:"2s",repeatCount:"indefinite"})]),S("line",{"stroke-linecap":"round","stroke-width":"4","stroke-miterlimit":"10",stroke:"currentColor",x1:"50",y1:"50",x2:"49.5",y2:"74"},[S("animateTransform",{attributeName:"transform",type:"rotate",from:"0 50 50",to:"360 50 50",dur:"15s",repeatCount:"indefinite"})])];var St=ce({name:"QSpinnerClock",props:de,setup(o){const{cSize:u,classes:c}=ue(o);return()=>S("svg",{class:c.value,width:u.value,height:u.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg"},Ct)}});const Qt=o=>(N("data-v-b1c8a5fc"),o=o(),B(),o),Pt={class:"q-dialog-plugin bg-trans broadcast-popup"},It={class:"row no-wrap justify-start items-center q-gutter-x-sm"},Mt=Qt(()=>t("div",{class:"font-main text-grey-2"},"\uBA54\uC2DC\uC9C0 \uBC29\uC1A1",-1)),jt={key:0,class:"text-grey-5 row no-wrap items-center q-gutter-x-sm q-px-md"},Vt={style:{"font-size":"2rem"}},Zt={class:"text-white description q-pa-md"},Tt={class:"fit row no-wrap justify-center q-gutter-x-sm"},Dt={__name:"pageMessage",setup(o){const u=new AbortController,{dialogRef:c,onDialogCancel:d,onDialogOK:a}=W(),s=I(3),_=I(!1);let p=null;const g=()=>{p&&clearInterval(p),u.abort(),d()};return j(async()=>{try{T(),K({deviceId:"all",message:`\uD30C\uC77C \uC774\uB984: ${i.file.base}`}),await me(u)}catch(y){console.error(y)}_.value=!0,K({deviceId:"all",message:"\uBC29\uC1A1\uC744 \uC2DC\uC791\uD569\uB2C8\uB2E4."}),p=setInterval(()=>{s.value>0?s.value-=1:(clearInterval(p),a(i))},1e3)}),(y,f)=>(r(),h(J,{ref_key:"dialogRef",ref:c,persistent:""},{default:n(()=>[t("div",Pt,[e(U,{class:"transBG"},{default:n(()=>[e($,null,{default:n(()=>[t("div",It,[e(v,{name:"mic",color:"primary",size:"md"}),Mt])]),_:1}),e($,{style:{"min-height":"200px"}},{default:n(()=>[_.value?(r(),m("div",jt,[e(St,{size:"md"}),t("span",Vt,x(s.value),1)])):k("",!0),t("div",Zt,[(r(!0),m(C,null,V(l(Z),(b,q)=>(r(),m("div",{key:q},x(l(Z)[q]),1))),128))])]),_:1}),e(A,null,{default:n(()=>[t("div",Tt,[_.value?(r(),h(Q,{key:0,style:{width:"8rem"},color:"primary",onClick:f[0]||(f[0]=b=>l(a)(l(i)))},{default:n(()=>[w("\uC2DC\uC791")]),_:1})):k("",!0),e(Q,{style:{width:"8rem"},color:"red-10",onClick:g},{default:n(()=>[w("\uCDE8\uC18C")]),_:1})])]),_:1})]),_:1})])]),_:1},512))}};var Nt=L(Dt,[["__scopeId","data-v-b1c8a5fc"]]);const Bt={class:"full-width q-px-sm q-mb-md"},Ut={__name:"pageStart",props:["zones"],setup(o){const u=o,{fnNoZones:c,fnNoFile:d,fnZoneActive:a}=X(),s=M(),_=()=>{if(i.devices===null||i.devices.length===0)return c();if(i.Mode!=="live"&&(i.file===null||Object.keys(i.file).length===0))return d();switch(i.Mode){case"live":s.dialog({component:zt,componentProps:{zones:u.zones}});break;case"message":case"tts":s.dialog({component:Nt}).onOk(async p=>{const g=await D(p.devices),y=await P.put("/broadcast/active",{devices:g.map(f=>({deviceId:f.deviceId,Zones:f.params.Zones}))});y&&y.active&&(a(),await E()),await P.put("/broadcast/live/message",{...p,devices:await D(p.devices),zones:i.zones})}).onCancel(async()=>{await E()});break}};return(p,g)=>(r(),m("div",Bt,[e(Q,{class:"full-width",color:"primary",label:"\uBC29\uC1A1\uC2DC\uC791",onClick:_})]))}},At={class:"borderd"},Ft={class:"q-px-lg q-py-sm row no-wrap justify-between items-center bg-grey-2"},Ot={class:"row no-wrap items-center q-gutter-x-sm q-py-xs"},Rt=t("div",{class:"font-main"},"\uC2E4\uC2DC\uAC04 \uBC29\uC1A1",-1),Lt={class:"q-pa-xs"},Gt={class:"q-pa-sm row justify-center"},ms={__name:"LivePage",setup(o){const u=M(),c=I(40);return j(async()=>{u.loading.show(),await _e(),u.loading.hide()}),(d,a)=>(r(),h(fe,{class:"page"},{default:n(()=>[t("div",At,[t("div",Ft,[t("div",Ot,[e(v,{name:"mic",color:"primary",size:"md"}),Rt])]),t("div",null,[e(ve,{modelValue:c.value,"onUpdate:modelValue":a[5]||(a[5]=s=>c.value=s)},{before:n(()=>[t("div",Lt,[e(Ce)])]),after:n(()=>[t("div",Gt,[e(U,{flat:"",style:{width:"450px"}},{default:n(()=>[e($,null,{default:n(()=>[e(Ie)]),_:1}),e($,null,{default:n(()=>[e(Be)]),_:1}),e($,null,{default:n(()=>[e(Ze,{preamble:l(i).Preamble,"onUpdate:value":a[0]||(a[0]=s=>l(i).Preamble=s)},null,8,["preamble"])]),_:1}),e($,null,{default:n(()=>[e(Ee,{devices:l(i).devices,zones:l(i).zones,"onUpdate:devices":a[1]||(a[1]=s=>l(i).devices=s),"onUpdate:zones":a[2]||(a[2]=s=>l(i).zones=s)},null,8,["devices","zones"])]),_:1}),l(i).Mode==="live"?(r(),h($,{key:0},{default:n(()=>[e(Je)]),_:1})):k("",!0),l(i).Mode==="message"?(r(),h($,{key:1},{default:n(()=>[e(it,{file:l(i).file,"onUpdate:value":a[3]||(a[3]=s=>l(i).file=s)},null,8,["file"])]),_:1})):k("",!0),l(i).Mode==="tts"?(r(),h($,{key:2},{default:n(()=>[e(pt,{file:l(i).file,"onUpdate:value":a[4]||(a[4]=s=>l(i).file=s)},null,8,["file"])]),_:1})):k("",!0),e(A,null,{default:n(()=>[e(Ut)]),_:1})]),_:1})])]),_:1},8,["modelValue"])])])]),_:1}))}};export{ms as default};
