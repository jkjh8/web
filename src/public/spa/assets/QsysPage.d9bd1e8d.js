import{ay as P,y as h,z as q,A as a,j as e,N as R,O as V,P as y,B as n,C as i,S as K,U as _,V as m,W as s,G as l,D as g,bw as E,bE as O,az as U,K as w,R as F,aP as M,r as N,o as T,b5 as L,aW as Y,I as Z,F as W,b3 as X,aU as j,aR as H,aS as J,aX as C,b1 as ee,b2 as ae,v as te,aQ as S,bz as le,aZ as ne}from"./index.9135e184.js";import{Q as $}from"./QTooltip.3fe8f753.js";import{Q as oe}from"./QBadge.e2f58d37.js";import{Q as se,a as z}from"./QTable.9d326ce5.js";import{Q as de}from"./QPage.6a46673d.js";import{_ as ie}from"./DialogConfirm.cfff0bd3.js";import{_ as re,a as ce}from"./editDevice.9e8a8a2f.js";import{Q as ue}from"./QSelect.040b8d3a.js";import{Q as fe}from"./QForm.2de6dd44.js";import{_ as me}from"./plugin-vue_export-helper.21dcd24c.js";import"./position-engine.20896df7.js";import"./useRules.38532059.js";import"./QMenu.e9960093.js";const _e=[{name:"name",label:"\uC774\uB984",align:"center",field:"name",sortable:!0},{name:"deviceId",label:"Device ID",align:"center",field:"deviceId",sortable:!0},{name:"ipaddress",label:"IP Address",align:"center",field:"ipaddress",sortable:!0},{name:"amx",label:"\uD1B5\uD569\uC81C\uC5B4 \uC8FC\uC7A5\uCE58",align:"center",field:"amx",sortable:!0},{name:"actions",label:"\uAE30\uB2A5",align:"center"}],pe=n("div",{class:"dialog-name"},"Q-SYS INFO",-1),ve={class:"caption font-sans"},ge={class:"q-px-md"},he=["href"],ye=["href"],be={class:"q-pl-sm text-black"},we={__name:"infoQsys",props:["device"],emits:[...P.emits],setup(o,{emit:c}){const{dialogRef:x,onDialogOK:b,onDialogCancel:k}=P();return(D,Q)=>(h(),q(F,{ref_key:"dialogRef",ref:x},{default:a(()=>[e(R,{class:"q-dialog-plugin bg-trans",style:{"border-radius":"8px"}},{default:a(()=>[e(V,{class:"row no-wrap q-gutter-sm items-center"},{default:a(()=>[e(y,{style:{"margin-top":"10px"},name:"img:qsys.svg",size:"1.5rem"}),n("div",null,[pe,n("div",ve,i(o.device.deviceId),1)])]),_:1}),e(V,null,{default:a(()=>[n("div",ge,[e(K,{dense:""},{default:a(()=>[e(_,{dense:""},{default:a(()=>[e(m,null,{default:a(()=>[e(s,null,{default:a(()=>[l("\uC7A5\uCE58 \uC774\uB984")]),_:1}),e(s,{caption:""},{default:a(()=>[l(i(o.device.name),1)]),_:1})]),_:1})]),_:1}),e(_,{dense:""},{default:a(()=>[e(m,null,{default:a(()=>[e(s,null,{default:a(()=>[l("IP Address")]),_:1}),e(s,{caption:""},{default:a(()=>[n("a",{href:`http://${o.device.ipaddress}`,target:"_blank"},[l(i(o.device.ipaddress)+" ",1),e(y,{class:"cursor-pointer",name:"launch",color:"primary"})],8,he)]),_:1})]),_:1})]),_:1}),e(_,{dense:""},{default:a(()=>[e(m,null,{default:a(()=>[e(s,null,{default:a(()=>[l("\uD1B5\uD569\uC81C\uC5B4 \uC8FC\uC7A5\uCE58")]),_:1}),o.device.amx?(h(),q(s,{key:1,caption:""},{default:a(()=>[n("a",{href:`http://${o.device.amx}`,target:"_blank"},[l(i(o.device.amx)+" ",1),e(y,{class:"cursor-pointer",name:"launch",color:"primary"})],8,ye)]),_:1})):(h(),q(s,{key:0,caption:""},{default:a(()=>[l("\uD1B5\uD569\uC81C\uC5B4 \uC8FC\uC7A5\uCE58 \uC5C6\uC74C")]),_:1}))]),_:1})]),_:1}),e(_,{dense:""},{default:a(()=>[e(m,null,{default:a(()=>[e(s,null,{default:a(()=>[l("\uC5F0\uACB0 \uC0C1\uD0DC")]),_:1}),e(s,{caption:""},{default:a(()=>[l(i(o.device.connected),1)]),_:1})]),_:1})]),_:1}),e(_,{dense:""},{default:a(()=>[e(m,null,{default:a(()=>[e(s,null,{default:a(()=>[l("\uCF54\uC5B4 \uD50C\uB7AB\uD3FC")]),_:1}),e(s,{caption:""},{default:a(()=>[l(i(o.device.EngineStatus.Platform),1)]),_:1})]),_:1})]),_:1}),e(_,{dense:""},{default:a(()=>[e(m,null,{default:a(()=>[e(s,null,{default:a(()=>[l("\uCF54\uC5B4 \uC0C1\uD0DC")]),_:1}),e(s,{caption:""},{default:a(()=>[l(i(o.device.EngineStatus.State),1)]),_:1})]),_:1})]),_:1}),e(_,{dense:""},{default:a(()=>[e(m,null,{default:a(()=>[e(s,null,{default:a(()=>[l("PA \uC2E4\uC2DC\uAC04 \uB370\uC774\uD130 \uC5F0\uB3D9")]),_:1}),e(s,{caption:""},{default:a(()=>[l(i(o.device.ZoneStatusConfigure),1)]),_:1})]),_:1})]),_:1}),e(_,{dense:""},{default:a(()=>[e(m,null,{default:a(()=>[e(s,null,{default:a(()=>[l("\uC800\uC7A5\uC18C \uC815\uBCF4(\uB0A8\uC740\uB7C9/\uC804\uCCB4)")]),_:1}),e(s,{caption:""},{default:a(()=>[l(i(g(E).humanStorageSize(o.device.storage.free))+" / "+i(g(E).humanStorageSize(o.device.storage.total))+" ",1),n("span",be,i(Math.round(o.device.storage.free/o.device.storage.total*100))+"% \uC5EC\uC720 ",1)]),_:1})]),_:1})]),_:1}),e(_,{dense:""},{default:a(()=>[e(m,null,{default:a(()=>[e(s,null,{default:a(()=>[l("\uB9C8\uC9C0\uB9C9 \uC5C5\uB370\uC774\uD2B8")]),_:1}),e(s,{caption:""},{default:a(()=>[l(i(g(O).formatDate(o.device.updatedAt,"YYYY-MM-DD hh:mm:ss A")),1)]),_:1})]),_:1})]),_:1}),e(_,{dense:""},{default:a(()=>[e(m,null,{default:a(()=>[e(s,null,{default:a(()=>[l("\uC7A5\uCE58 \uB4F1\uB85D \uC2DC\uAC04")]),_:1}),e(s,{caption:""},{default:a(()=>[l(i(g(O).formatDate(o.device.createdAt,"YYYY-MM-DD hh:mm:ss A")),1)]),_:1})]),_:1})]),_:1})]),_:1})])]),_:1}),e(U,{align:"right"},{default:a(()=>[e(w,{round:"",flat:"","no-caps":"",color:"primary",icon:"check_circle",onClick:g(b)},null,8,["onClick"])]),_:1})]),_:1})]),_:1},512))}};const G=o=>(ee("data-v-de0dd02e"),o=o(),ae(),o),xe={class:"dialog-name row no-wrap items-center q-gutter-x-sm"},ke=G(()=>n("div",null,"\uBC29\uC1A1\uAD6C\uAC04\uC774\uB984 \uC218\uC815",-1)),$e={class:"text-caption"},Qe={class:"table-header-line"},Ie=G(()=>n("thead",null,[n("tr",null,[n("th",{style:{width:"50px"}},"\uC9C0\uC5ED"),n("th",{style:{width:"260px"}},"\uC774\uB984"),n("th",{style:{width:"260px"}},"\uB124\uD2B8\uC6CC\uD06C \uC218\uC2E0\uAE30 \uC120\uD0DD")])],-1)),Se={style:{"text-align":"center",width:"50px"}},Ce={style:{width:"260px"}},qe={style:{width:"260px"}},De={__name:"editZoneSettings",props:["device"],emits:[...P.emits],setup(o,{emit:c}){const x=o,{dialogRef:b,onDialogCancel:k,onDialogOK:D}=P(),{fnNotiWarn:Q,fnNotiError:B}=M(),p=N([]),I=N([]),A=(d,t,u)=>{t(()=>{I.value=Y.value.filter(v=>v.name.indexOf(d)>-1)})},r=async(d,t)=>{if(d===null)return p.value[t].destination="";const u=p.value.findIndex(f=>f.destination===d);if(t!==-1&&t!==u)return p.value[t].destination="",Q("\uC774\uBBF8 \uC120\uD0DD\uB41C \uB124\uD2B8\uC6CC\uD06C \uC218\uC2E0\uAE30\uC785\uB2C8\uB2E4.");const v=await C.get("/devices/qsys/existszones",{params:{id:d,deviceId:x.device.deviceId}});if(v.data&&v.data.value&&v.data.value.length)return v.data.value.findIndex(f=>f.deviceId===x.device.deviceId),p.value[t].destination="",Q("\uC774\uBBF8 \uC120\uD0DD\uB41C \uB124\uD2B8\uC6CC\uD06C \uC218\uC2E0\uAE30\uC785\uB2C8\uB2E4.")};return T(async()=>{await L(),p.value=[...x.device.ZoneStatus.map(d=>({name:d.name?d.name:"",Zone:d.Zone,destination:d.destination&&d.destination._id?d.destination._id:""}))],I.value=Y.value}),(d,t)=>(h(),q(F,{ref_key:"dialogRef",ref:b,persistent:""},{default:a(()=>[e(R,{class:"q-dialog-plugin bg-trans",style:{"border-radius":"8px","max-width":"1000px",width:"650px"}},{default:a(()=>[e(V,null,{default:a(()=>[n("div",xe,[e(y,{name:"add_circle",color:"primary",size:"sm"}),n("div",null,[ke,n("div",$e,i(o.device.name)+" "+i(o.device.ipaddress),1)])])]),_:1}),e(fe,{onSubmit:t[0]||(t[0]=u=>g(D)(p.value))},{default:a(()=>[e(V,{class:"row justify-center"},{default:a(()=>[n("table",Qe,[Ie,n("tbody",null,[(h(!0),Z(W,null,X(p.value,(u,v)=>(h(),Z("tr",{key:v},[n("td",Se,i(u.Zone),1),n("td",Ce,[e(j,{filled:"",dense:"",modelValue:u.name,"onUpdate:modelValue":f=>u.name=f,label:`\uCC44\uB110 ${u.Zone}`},null,8,["modelValue","onUpdate:modelValue","label"])]),n("td",qe,[e(ue,{filled:"",dense:"",clearable:"",modelValue:u.destination,"onUpdate:modelValue":[f=>u.destination=f,f=>r(f,v)],options:I.value,label:`\uCC44\uB110 ${u.Zone} \uB124\uD2B8\uC6CC\uD06C \uC218\uC2E0\uAE30 \uC120\uD0DD`,"option-value":"_id","option-label":"name","hide-selected":"","use-input":"","fill-input":"","input-debounce":"0","emit-value":"","map-options":"",onFilter:A},{prepend:a(()=>[e(y,{name:"place"})]),option:a(f=>[e(_,H(J(f.itemProps)),{default:a(()=>[e(m,{avatar:""},{default:a(()=>[e(y,{name:"storage"})]),_:1}),e(m,null,{default:a(()=>[e(s,null,{default:a(()=>[l(i(f.opt.name),1)]),_:2},1024),e(s,{caption:""},{default:a(()=>[l(i(f.opt.ipaddress),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:2},1032,["modelValue","onUpdate:modelValue","options","label"])])]))),128))])])]),_:1}),e(U,{align:"right"},{default:a(()=>[e(w,{round:"",flat:"",color:"red-10",icon:"cancel",onClick:g(k)},null,8,["onClick"]),e(w,{round:"",flat:"","no-caps":"",color:"primary",icon:"check_circle",type:"submit"})]),_:1})]),_:1})]),_:1})]),_:1},512))}};var ze=me(De,[["__scopeId","data-v-de0dd02e"]]);const Pe={class:"borderd"},Ve={class:"q-px-lg q-py-sm row no-wrap justify-between items-center bg-grey-2"},Ze={class:"row no-wrap items-center q-gutter-x-sm"},Ae=n("div",{class:"font-main"},"\uC5C5\uBB34\uBC29\uC1A1 \uC8FC\uC7A5\uCE58",-1),Ne=["href"],Be=["href"],Ee={key:1,class:"text-caption text-grey"},He={__name:"QsysPage",setup(o){const c=te(),{fnNotiInfo:x,fnNotiError:b}=M(),k=N(""),D=()=>{c.dialog({component:re,componentProps:{title:"\uC5C5\uBB34\uBC29\uC1A1\uC8FC\uC7A5\uCE58 \uCD94\uAC00",type:"qsys"}}).onOk(async r=>{try{c.loading.show(),await C.post("/devices/qsys",{...r})}catch{b({message:"\uC5C5\uBB34\uBC29\uC1A1 \uC8FC\uC7A5\uCE58 \uCD94\uAC00 \uC624\uB958",caption:"\uC7A0\uC2DC\uD6C4\uC5D0 \uB2E4\uC2DC \uC2DC\uB3C4\uD574 \uC8FC\uC138\uC694."})}finally{await S(),c.loading.hide()}})},Q=r=>{c.dialog({component:we,componentProps:{device:r}})},B=r=>{c.dialog({component:ce,componentProps:{title:"\uC5C5\uBB34\uBC29\uC1A1\uC8FC\uC7A5\uCE58 \uC218\uC815",type:"qsys",device:r}}).onOk(async d=>{try{c.loading.show(),await C.put("/devices/qsys/edit",{...d})}catch{b({message:"\uC5C5\uBB34\uBC29\uC1A1 \uC8FC\uC7A5\uCE58 \uC218\uC815 \uC624\uB958",caption:"\uC7A0\uC2DC\uD6C4\uC5D0 \uB2E4\uC2DC \uC2DC\uB3C4\uD574 \uC8FC\uC138\uC694."})}finally{S(),c.loading.hide()}})},p=r=>{c.dialog({component:ze,componentProps:{device:r}}).onOk(async d=>{try{c.loading.show(),await C.put("/devices/qsys/updatenames",{deviceId:r.deviceId,arr:d})}catch{b({message:"\uBC29\uC1A1\uAD6C\uAC04 \uC218\uC815 \uC624\uB958",caption:"\uC7A0\uC2DC\uD6C4\uC5D0 \uB2E4\uC2DC \uC2DC\uB3C4\uD574 \uC8FC\uC138\uC694."})}finally{S(),c.loading.hide()}})},I=r=>{x(`${r.name}\uC758 \uC804\uCCB4 \uC124\uC815 \uAC12 \uAC31\uC2E0\uC744 \uC2DC\uC791\uD569\uB2C8\uB2E4.`,"\uC7A0\uC2DC\uB9CC \uAE30\uB2E4\uB824\uC8FC\uC138\uC694."),ne("zone:set:device",{...r})},A=r=>{c.dialog({component:ie,componentProps:{icon:"delete",iconColor:"red-10",title:"\uC5C5\uBB34\uBC29\uC1A1 \uC8FC\uC7A5\uCE58 \uC0AD\uC81C",message:`${r.name} ${r.ipaddress}`}}).onOk(async()=>{try{c.loading.show(),await C.delete("/devices/qsys",{data:{...r}}),c.loading.hide()}catch{b({message:"\uC5C5\uBB34\uBC29\uC1A1 \uC8FC\uC7A5\uCE58 \uC0AD\uC81C \uC624\uB958",caption:"\uC7A0\uC2DC\uD6C4\uC5D0 \uB2E4\uC2DC \uC2DC\uB3C4\uD574 \uC8FC\uC138\uC694."})}finally{await S(),c.loading.hide()}})};return T(async()=>{try{c.loading.show(),await S()}catch{}finally{c.loading.hide()}}),(r,d)=>(h(),q(de,{class:"page"},{default:a(()=>[n("div",Pe,[n("div",Ve,[n("div",Ze,[e(y,{name:"img:qsys.svg",color:"primary",size:"sm"}),Ae,n("div",null,[e(y,{class:"cursor-pointer",name:"add_circle",size:"sm",color:"primary",onClick:D},{default:a(()=>[e($,null,{default:a(()=>[l("\uC7A5\uCE58 \uCD94\uAC00")]),_:1})]),_:1})])]),e(j,{modelValue:k.value,"onUpdate:modelValue":d[0]||(d[0]=t=>k.value=t),borderless:"",dense:"",debounce:"300",placeholder:"Search",clearable:""},{append:a(()=>[e(y,{class:"cursor-pointer",name:"search"})]),_:1},8,["modelValue"])]),e(se,{columns:g(_e),rows:g(le),filter:k.value},{"body-cell-name":a(t=>[e(z,{props:t},{default:a(()=>[n("div",null,[e(oe,{rounded:"",color:t.row.connected?"primary":"red-10"},null,8,["color"]),l(" "+i(t.value),1)])]),_:2},1032,["props"])]),"body-cell-ipaddress":a(t=>[e(z,{props:t},{default:a(()=>[n("a",{href:`http://${t.value}`,target:"_blank"},i(t.value),9,Ne)]),_:2},1032,["props"])]),"body-cell-amx":a(t=>[e(z,{props:t},{default:a(()=>[t.row.amx?(h(),Z("a",{key:0,href:`http://${t.value}`,target:"_blank"},i(t.value),9,Be)):(h(),Z("div",Ee," \uD1B5\uD569\uC81C\uC5B4 \uC8FC\uC7A5\uCE58 \uC5C6\uC74C "))]),_:2},1032,["props"])]),"body-cell-actions":a(t=>[e(z,{props:t},{default:a(()=>[n("div",null,[e(w,{round:"",flat:"",color:"primary",icon:"info",size:"sm",onClick:u=>Q(t.row)},{default:a(()=>[e($,null,{default:a(()=>[l("\uC0C1\uC138\uC815\uBCF4")]),_:1})]),_:2},1032,["onClick"]),e(w,{round:"",flat:"",color:"primary",icon:"edit",size:"sm",onClick:u=>B(t.row)},{default:a(()=>[e($,null,{default:a(()=>[l("\uC218\uC815")]),_:1})]),_:2},1032,["onClick"]),e(w,{round:"",flat:"",color:"blue",icon:"edit_note",size:"sm",onClick:u=>p(t.row)},{default:a(()=>[e($,null,{default:a(()=>[l("\uBC29\uC1A1\uAD6C\uAC04\uC218\uC815")]),_:1})]),_:2},1032,["onClick"]),e(w,{round:"",flat:"",color:"primary",icon:"refresh",size:"sm",onClick:u=>I(t.row)},{default:a(()=>[e($,null,{default:a(()=>[l("\uC7AC\uC124\uC815")]),_:1})]),_:2},1032,["onClick"]),e(w,{round:"",flat:"",color:"red-10",icon:"delete",size:"sm",onClick:u=>A(t.row)},{default:a(()=>[e($,null,{default:a(()=>[l("\uC0AD\uC81C")]),_:1})]),_:2},1032,["onClick"])])]),_:2},1032,["props"])]),_:1},8,["columns","rows","filter"])])]),_:1}))}};export{He as default};
