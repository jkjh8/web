import{v as F,r as $,o as M,z as p,A as v,B as a,j as e,P as j,R as V,C as t,Q as f,J as u,aH as E,aI as G,M as g,aJ as H,aF as J,I as B,D as P,O as K,U as T,aK as W,aL as L,aM as X,aN as Y,G as y,aO as N,H as Z,F as A,aP as ee,N as D,aQ as te,E as k,V as ae,W as ne}from"./index.e0d07856.js";import{Q as oe}from"./QPage.c4d0540a.js";import{Q as se,a as ie,b as x,c as I}from"./QSelect.f2893ea1.js";import{Q as le}from"./QExpansionItem.5def6eb3.js";import{u as re}from"./use-dialog-plugin-component.120c15cd.js";import{f as O,b as q}from"./useBarix.6d8e3ad6.js";import{_ as de}from"./plugin-vue_export-helper.21dcd24c.js";import"./QMenu.34174ba2.js";import"./format.cbf00d5d.js";import"./QSlideTransition.afd30094.js";const ce={class:"row no-wrap items-center q-gutter-x-md"},ue=t("div",{class:"dialog-name"},"\uBC29\uC1A1\uC9C0\uC5ED\uC124\uC815",-1),me={class:"dialog-caption"},pe={__name:"setSigleChannel",props:["device","zone"],setup(d){const{dialogRef:_,onDialogCancel:w,onDialogOK:Q}=re(),c=d,b=F(),h=$([]),n=$(null),m=$(0),i=(s,r,o)=>{r(()=>{h.value=q.value.filter(C=>C.name.indexOf(s)>-1)})},S=async s=>{let r="";if(s!==null){const o=await T.get("/devices/qsys/existszone",{params:{id:s}});if(r=q.value[q.value.findIndex(C=>C._id===s)].ipaddress,o.data&&o.data.value&&o.data.value.length)return o.data.value[0].ZoneStatus.findIndex(U=>U.destination===s)===c.zone.Zone-1?void 0:(n.value=null,b.notify({type:"negative",icon:"warning",position:"top",message:"\uB2E4\uB978 \uBC29\uC1A1 \uAD6C\uAC04\uC5D0\uC11C \uC774\uBBF8 \uC0AC\uC6A9\uC911\uC785\uB2C8\uB2E4."}))}await W({deviceId:c.device.deviceId,zone:c.zone.Zone,destination:s,ipaddress:r}),await L()},l=s=>{X({deviceId:c.device.deviceId,zone:c.zone.Zone,volume:s})},z=s=>{Y({deviceId:c.device.deviceId,zone:c.zone.Zone,mute:s})};return M(async()=>{await O(),h.value=q.value,m.value=c.zone.gain,c.zone.destination&&c.zone.destination._id&&(n.value=c.zone.destination._id)}),(s,r)=>(p(),v(K,{ref_key:"dialogRef",ref:_},{default:a(()=>[e(j,{class:"q-dialog-plugin",style:{"border-radius":"8px"}},{default:a(()=>[e(V,null,{default:a(()=>{var o;return[t("div",ce,[e(f,{name:"location_on",color:"primary",size:"1.5rem"}),t("div",null,[ue,t("div",me,u(`${d.device.name} ${d.zone.Zone}. ${(o=d.zone.name)!=null?o:"No name"} \uCC44\uB110 `),1)])])]}),_:1}),e(V,null,{default:a(()=>[e(se,{filled:"",dense:"",clearable:"",modelValue:n.value,"onUpdate:modelValue":[r[0]||(r[0]=o=>n.value=o),S],options:h.value,label:"\uB124\uD2B8\uC6CC\uD06C \uC218\uC2E0\uAE30 \uC120\uD0DD","option-value":"_id","option-label":"name","hide-selected":"","use-input":"","fill-input":"","input-debounce":"0","emit-value":"","map-options":"",onFilter:i},{option:a(o=>[e(ie,E(G(o.itemProps)),{default:a(()=>[e(x,{avatar:""},{default:a(()=>[e(f,{name:"storage"})]),_:1}),e(x,null,{default:a(()=>[e(I,null,{default:a(()=>[g(u(o.opt.name),1)]),_:2},1024),e(I,{caption:""},{default:a(()=>[g(u(o.opt.ipaddress),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options"])]),_:1}),e(V,null,{default:a(()=>[t("div",null,[e(H,{modelValue:m.value,"onUpdate:modelValue":[r[2]||(r[2]=o=>m.value=o),l],filled:"",dense:"",label:"\uBCFC\uB968",type:"number"},{append:a(()=>[e(f,{class:"cursor-pointer",name:d.zone.mute?"volume_off":"volume_up",color:d.zone.mute?"red-10":"primary",onClick:r[1]||(r[1]=o=>z(!d.zone.mute))},null,8,["name","color"])]),_:1},8,["modelValue"])])]),_:1}),e(J,{align:"right"},{default:a(()=>[e(B,{round:"",flat:"",color:"red-10",icon:"cancel",onClick:P(w)},null,8,["onClick"]),e(B,{round:"",flat:"","no-caps":"",color:"primary",icon:"check_circle",onClick:r[3]||(r[3]=o=>P(Q)(s.inputText))})]),_:1})]),_:1})]),_:1},512))}};const R=d=>(ae("data-v-614e24b2"),d=d(),ne(),d),fe={class:"row no-wrap justify-start items-center q-gutter-x-sm header-font"},_e=R(()=>t("span",null,"\uC9C0\uC5ED \uBC29\uC1A1\uC911",-1)),ve={class:"row q-pa-md q-gutter-sm"},ge={class:"floating-position q-gutter-x-xs row no-wrap items-center"},he={class:"floating-font"},ye={class:""},xe={key:0},we={class:"column items-end text-caption"},be={class:"row q-gutter-x-xs"},Ce={key:1},ke={class:"column items-end text-caption"},qe=R(()=>t("div",null,"Local",-1)),Ie={class:"row q-gutter-x-xs"},Qe={__name:"broadcastStatus",setup(d){const _=F(),w=n=>{let m=0;for(let i=0;i<n.length;i++)n[i].Active&&(m+=1);return m},Q=n=>{switch(n){case 1:case 2:return"bg-red text-white";case 3:case 4:return"bg-yellow";case 5:return"bg-green-4 text-white";default:return""}},c=n=>n&&n.status?n.streamurl?"green":"yellow":"red",b=n=>{if(k.value.isAdmin)return!0;if(k.value.zones&&k.value.zones.length){for(let m of k.value.zones)if(m===n)return!0}return!1},h=(n,m)=>{_.dialog({component:pe,componentProps:{device:n,zone:m}})};return M(async()=>{_.loading.show(),await L(),await O(),_.loading.hide()}),(n,m)=>(p(!0),y(A,null,N(P(te),(i,S)=>(p(),v(le,{key:S,"header-class":"bg-grey-1"},{header:a(()=>[e(x,{avatar:""},{default:a(()=>[e(f,{color:i.connected?"primary":"ref-10",name:"location_on"},null,8,["color"])]),_:2},1024),e(x,null,{default:a(()=>[e(I,null,{default:a(()=>[t("div",null,[g(u(i.name)+" ",1),b(i.deviceId)?(p(),v(f,{key:0,class:"q-ml-sm cursor-pointer",color:"grey",name:"settings"})):Z("",!0)])]),_:2},1024),e(I,{caption:""},{default:a(()=>[g(u(i.ipaddress),1)]),_:2},1024)]),_:2},1024),e(x,{side:""},{default:a(()=>[t("div",fe,[g(u(w(i.ZoneStatus))+" ",1),_e])]),_:2},1024)]),default:a(()=>[t("div",ve,[(p(!0),y(A,null,N(i.ZoneStatus,(l,z)=>{var s;return p(),y("div",{key:z},[t("div",{class:ee(["borderd q-pt-md q-px-sm q-pb-sm q-gutter-sx",l.Active?Q(l.Priority):""]),style:{position:"relative"}},[t("div",ge,[t("span",he,u(l.gain),1),l.mute?(p(),v(f,{key:0,name:"volume_off",color:"red-10"})):Z("",!0),b(i.deviceId)?(p(),v(f,{key:1,class:"cursor-pointer",name:"settings",color:"primary",onClick:r=>h(i,l)},null,8,["onClick"])):Z("",!0)]),t("div",ye,[t("span",null,u(l.Zone)+". ",1),t("span",null,u((s=l.name)!=null?s:"No Name"),1)]),l.destination?(p(),y("div",xe,[t("div",null,[e(D,{class:"q-my-sm"})]),t("div",we,[t("div",be,[g(u(l.destination.name)+" ",1),e(f,{name:"circle",color:c(l.destination)},null,8,["color"])]),t("div",null,u(l.destination.ipaddress),1)])])):(p(),y("div",Ce,[t("div",null,[e(D,{class:"q-my-sm"})]),t("div",ke,[qe,t("div",Ie,"Channel "+u(l.Zone),1)])]))],2)])}),128))])]),_:2},1024))),128))}};var Se=de(Qe,[["__scopeId","data-v-614e24b2"]]);const ze={class:"borderd"},$e={class:"q-px-lg q-py-sm row no-wrap justify-between items-center bg-grey-2"},Ve={class:"row no-wrap items-center q-gutter-x-sm"},Ze=t("div",{class:"font-main",style:{"font-size":"16px","font-weight":"bold"}},"\uBC29\uC1A1 \uC0C1\uD0DC",-1),je={__name:"StatusPage",setup(d){return(_,w)=>(p(),v(oe,{padding:""},{default:a(()=>[t("div",ze,[t("div",$e,[t("div",Ve,[e(f,{name:"location_on",color:"primary",size:"sm"}),Ze])]),e(Se)])]),_:1}))}};export{je as default};
