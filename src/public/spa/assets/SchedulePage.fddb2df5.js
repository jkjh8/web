import{a6 as Mt,aG as St,bN as $t,aH as Vt,bO as Pt,r as K,c as P,bT as qe,bL as ue,w as Ne,n as zt,c8 as Tt,bQ as Ht,as as Ot,h as V,g as It,bU as Qt,ce as At,q as jt,p as $e,L as Y,v as Ze,aS as Yt,aR as lt,bl as Ut,k as Nt,y as f,z as Z,A as n,j as a,O as nt,P as Ve,B as i,R as z,M as ne,be as Wt,aX as Ce,D as S,bf as Ue,aT as Me,bJ as We,H as m,C as _,K as N,ch as Bt,J as T,F as de,b3 as Pe,aW as ot,aY as st,S as Ft,c2 as Zt,a4 as Kt,N as oe,b6 as it,b7 as rt,I as Lt,cc as et,o as ut,b4 as ze,U as Rt,V as ae,W as le,X as j,bt as tt,a3 as Et,f as Gt}from"./index.953e4a1c.js";import{Q as L}from"./QTooltip.2350c7ec.js";import{Q as Jt}from"./QPage.23229818.js";import{a as te,Q as Xt}from"./QTable.d809d4ef.js";import{Q as ea}from"./QTr.cbf4c56a.js";import{Q as ta}from"./QPagination.db90f861.js";import{h as A,C as Be}from"./ClosePopup.990afbd0.js";import{u as aa,b as la,c as na,g as oa,w as sa,Q as Fe,a as ia,l as Ke,m as at}from"./locale.70112ea1.js";import{u as Le}from"./usePlayer.c8e80308.js";import{T as ra}from"./QTree.d4e4d245.js";import{Q as ua}from"./QBadge.3de37d4c.js";import{_ as da,a as ca,D as ma,b as va}from"./DialogTtsVoiceware.a5ecb2a1.js";import{_ as Te}from"./plugin-vue_export-helper.21dcd24c.js";import"./QSlideTransition.0c3f928a.js";import"./QExpansionItem.59828008.js";import"./useFiles.16586c32.js";import"./QCircularProgress.a25f8684.js";import"./QBanner.b8eaa35e.js";function fa(t,w){if(t.hour!==null){if(t.minute===null)return"minute";if(w===!0&&t.second===null)return"second"}return"hour"}function ya(){const t=new Date;return{hour:t.getHours(),minute:t.getMinutes(),second:t.getSeconds(),millisecond:t.getMilliseconds()}}var _a=Mt({name:"QTime",props:{...St,...$t,...aa,mask:{default:null},format24h:{type:Boolean,default:null},defaultDate:{type:String,validator:t=>/^-?[\d]+\/[0-1]\d\/[0-3]\d$/.test(t)},options:Function,hourOptions:Array,minuteOptions:Array,secondOptions:Array,withSeconds:Boolean,nowBtn:Boolean},emits:la,setup(t,{slots:w,emit:H}){const x=It(),{$q:k}=x.proxy,R=Vt(t,k),{tabindex:U,headerClass:M,getLocale:O,getCurrentDate:v}=na(t,k),u=Pt(t),c=Qt(u);let q,y;const e=K(null),D=P(()=>mt()),I=P(()=>O()),E=P(()=>vt()),W=qe(t.modelValue,D.value,I.value,t.calendar,E.value),h=K(fa(W)),r=K(W),$=K(W.hour===null||W.hour<12),C=P(()=>`q-time q-time--${t.landscape===!0?"landscape":"portrait"}`+(R.value===!0?" q-time--dark q-dark":"")+(t.disable===!0?" disabled":t.readonly===!0?" q-time--readonly":"")+(t.bordered===!0?" q-time--bordered":"")+(t.square===!0?" q-time--square no-border-radius":"")+(t.flat===!0?" q-time--flat no-shadow":"")),p=P(()=>{const l=r.value;return{hour:l.hour===null?"--":o.value===!0?ue(l.hour):String($.value===!0?l.hour===0?12:l.hour:l.hour>12?l.hour-12:l.hour),minute:l.minute===null?"--":ue(l.minute),second:l.second===null?"--":ue(l.second)}}),o=P(()=>t.format24h!==null?t.format24h:k.lang.date.format24h),B=P(()=>{const l=h.value==="hour",s=l===!0?12:60,d=r.value[h.value];let Q=`rotate(${Math.round(d*(360/s))-180}deg) translateX(-50%)`;return l===!0&&o.value===!0&&r.value.hour>=12&&(Q+=" scale(.7)"),{transform:Q}}),ee=P(()=>r.value.hour!==null),He=P(()=>ee.value===!0&&r.value.minute!==null),se=P(()=>t.hourOptions!==void 0?l=>t.hourOptions.includes(l):t.options!==void 0?l=>t.options(l,null,null):null),ce=P(()=>t.minuteOptions!==void 0?l=>t.minuteOptions.includes(l):t.options!==void 0?l=>t.options(r.value.hour,l,null):null),he=P(()=>t.secondOptions!==void 0?l=>t.secondOptions.includes(l):t.options!==void 0?l=>t.options(r.value.hour,r.value.minute,l):null),X=P(()=>{if(se.value===null)return null;const l=we(0,11,se.value),s=we(12,11,se.value);return{am:l,pm:s,values:l.values.concat(s.values)}}),me=P(()=>ce.value!==null?we(0,59,ce.value):null),ve=P(()=>he.value!==null?we(0,59,he.value):null),ge=P(()=>{switch(h.value){case"hour":return X.value;case"minute":return me.value;case"second":return ve.value}}),dt=P(()=>{let l,s,d=0,b=1;const Q=ge.value!==null?ge.value.values:void 0;h.value==="hour"?o.value===!0?(l=0,s=23):(l=0,s=11,$.value===!1&&(d=12)):(l=0,s=55,b=5);const G=[];for(let g=l,F=l;g<=s;g+=b,F++){const ie=g+d,qt=Q!==void 0&&Q.includes(ie)===!1,Ct=h.value==="hour"&&g===0?o.value===!0?"00":"12":g;G.push({val:ie,index:F,disable:qt,label:Ct})}return G}),ct=P(()=>[[ra,ft,void 0,{stop:!0,prevent:!0,mouse:!0}]]);Ne(()=>t.modelValue,l=>{const s=qe(l,D.value,I.value,t.calendar,E.value);(s.dateHash!==r.value.dateHash||s.timeHash!==r.value.timeHash)&&(r.value=s,s.hour===null?h.value="hour":$.value=s.hour<12)}),Ne([D,I],()=>{zt(()=>{Ye()})});function Re(){const l={...v(),...ya()};Ye(l),Object.assign(r.value,l),h.value="hour"}function we(l,s,d){const b=Array.apply(null,{length:s+1}).map((Q,G)=>{const g=G+l;return{index:g,val:d(g)===!0}}).filter(Q=>Q.val===!0).map(Q=>Q.index);return{min:b[0],max:b[b.length-1],values:b,threshold:s+1}}function Ee(l,s,d){const b=Math.abs(l-s);return Math.min(b,d-b)}function Oe(l,{min:s,max:d,values:b,threshold:Q}){if(l===s)return s;if(l<s||l>d)return Ee(l,s,Q)<=Ee(l,d,Q)?s:d;const G=b.findIndex(ie=>l<=ie),g=b[G-1],F=b[G];return l-g<=F-l?g:F}function mt(){return t.calendar!=="persian"&&t.mask!==null?t.mask:`HH:mm${t.withSeconds===!0?":ss":""}`}function vt(){if(typeof t.defaultDate!="string"){const l=v(!0);return l.dateHash=oa(l),l}return qe(t.defaultDate,"YYYY/MM/DD",void 0,t.calendar)}function Ie(){return At(x)===!0||ge.value!==null&&(ge.value.values.length===0||h.value==="hour"&&o.value!==!0&&X.value[$.value===!0?"am":"pm"].values.length===0)}function Qe(){const l=e.value,{top:s,left:d,width:b}=l.getBoundingClientRect(),Q=b/2;return{top:s+Q,left:d+Q,dist:Q*.7}}function ft(l){if(Ie()!==!0){if(l.isFirst===!0){q=Qe(),y=ke(l.evt,q);return}y=ke(l.evt,q,y),l.isFinal===!0&&(q=!1,y=null,Ge())}}function Ge(){h.value==="hour"?h.value="minute":t.withSeconds&&h.value==="minute"&&(h.value="second")}function ke(l,s,d){const b=Tt(l),Q=Math.abs(b.top-s.top),G=Math.sqrt(Math.pow(Math.abs(b.top-s.top),2)+Math.pow(Math.abs(b.left-s.left),2));let g,F=Math.asin(Q/G)*(180/Math.PI);if(b.top<s.top?F=s.left<b.left?90-F:270+F:F=s.left<b.left?F+90:270-F,h.value==="hour"){if(g=F/30,X.value!==null){const ie=o.value!==!0?$.value===!0:X.value.am.values.length!==0&&X.value.pm.values.length!==0?G>=s.dist:X.value.am.values.length!==0;g=Oe(g+(ie===!0?0:12),X.value[ie===!0?"am":"pm"])}else g=Math.round(g),o.value===!0?G<s.dist?g<12&&(g+=12):g===12&&(g=0):$.value===!0&&g===12?g=0:$.value===!1&&g!==12&&(g+=12);o.value===!0&&($.value=g<12)}else g=Math.round(F/6)%60,h.value==="minute"&&me.value!==null?g=Oe(g,me.value):h.value==="second"&&ve.value!==null&&(g=Oe(g,ve.value));return d!==g&&bt[h.value](g),g}const Ae={hour(){h.value="hour"},minute(){h.value="minute"},second(){h.value="second"}};function yt(l){l.keyCode===13&&Je()}function _t(l){l.keyCode===13&&Xe()}function pt(l){Ie()!==!0&&(k.platform.is.desktop!==!0&&ke(l,Qe()),Ge())}function ht(l){Ie()!==!0&&ke(l,Qe())}function gt(l){if(l.keyCode===13)h.value="hour";else if([37,39].includes(l.keyCode)){const s=l.keyCode===37?-1:1;if(X.value!==null){const d=o.value===!0?X.value.values:X.value[$.value===!0?"am":"pm"].values;if(d.length===0)return;if(r.value.hour===null)be(d[0]);else{const b=(d.length+d.indexOf(r.value.hour)+s)%d.length;be(d[b])}}else{const d=o.value===!0?24:12,b=o.value!==!0&&$.value===!1?12:0,Q=r.value.hour===null?-s:r.value.hour;be(b+(24+Q+s)%d)}}}function wt(l){if(l.keyCode===13)h.value="minute";else if([37,39].includes(l.keyCode)){const s=l.keyCode===37?-1:1;if(me.value!==null){const d=me.value.values;if(d.length===0)return;if(r.value.minute===null)xe(d[0]);else{const b=(d.length+d.indexOf(r.value.minute)+s)%d.length;xe(d[b])}}else{const d=r.value.minute===null?-s:r.value.minute;xe((60+d+s)%60)}}}function kt(l){if(l.keyCode===13)h.value="second";else if([37,39].includes(l.keyCode)){const s=l.keyCode===37?-1:1;if(ve.value!==null){const d=ve.value.values;if(d.length===0)return;if(r.value.seconds===null)De(d[0]);else{const b=(d.length+d.indexOf(r.value.second)+s)%d.length;De(d[b])}}else{const d=r.value.second===null?-s:r.value.second;De((60+d+s)%60)}}}function be(l){r.value.hour!==l&&(r.value.hour=l,fe())}function xe(l){r.value.minute!==l&&(r.value.minute=l,fe())}function De(l){r.value.second!==l&&(r.value.second=l,fe())}const bt={hour:be,minute:xe,second:De};function Je(){$.value===!1&&($.value=!0,r.value.hour!==null&&(r.value.hour-=12,fe()))}function Xe(){$.value===!0&&($.value=!1,r.value.hour!==null&&(r.value.hour+=12,fe()))}function je(l){const s=t.modelValue;h.value!==l&&s!==void 0&&s!==null&&s!==""&&typeof s!="string"&&(h.value=l)}function fe(){if(se.value!==null&&se.value(r.value.hour)!==!0){r.value=qe(),je("hour");return}if(ce.value!==null&&ce.value(r.value.minute)!==!0){r.value.minute=null,r.value.second=null,je("minute");return}if(t.withSeconds===!0&&he.value!==null&&he.value(r.value.second)!==!0){r.value.second=null,je("second");return}r.value.hour===null||r.value.minute===null||t.withSeconds===!0&&r.value.second===null||Ye()}function Ye(l){const s=Object.assign({...r.value},l),d=t.calendar==="persian"?ue(s.hour)+":"+ue(s.minute)+(t.withSeconds===!0?":"+ue(s.second):""):Ht(new Date(s.year,s.month===null?null:s.month-1,s.day,s.hour,s.minute,s.second,s.millisecond),D.value,I.value,s.year,s.timezoneOffset);s.changed=d!==t.modelValue,H("update:modelValue",d,s)}function xt(){const l=[V("div",{class:"q-time__link "+(h.value==="hour"?"q-time__link--active":"cursor-pointer"),tabindex:U.value,onClick:Ae.hour,onKeyup:gt},p.value.hour),V("div",":"),V("div",ee.value===!0?{class:"q-time__link "+(h.value==="minute"?"q-time__link--active":"cursor-pointer"),tabindex:U.value,onKeyup:wt,onClick:Ae.minute}:{class:"q-time__link"},p.value.minute)];t.withSeconds===!0&&l.push(V("div",":"),V("div",He.value===!0?{class:"q-time__link "+(h.value==="second"?"q-time__link--active":"cursor-pointer"),tabindex:U.value,onKeyup:kt,onClick:Ae.second}:{class:"q-time__link"},p.value.second));const s=[V("div",{class:"q-time__header-label row items-center no-wrap",dir:"ltr"},l)];return o.value===!1&&s.push(V("div",{class:"q-time__header-ampm column items-between no-wrap"},[V("div",{class:"q-time__link "+($.value===!0?"q-time__link--active":"cursor-pointer"),tabindex:U.value,onClick:Je,onKeyup:yt},"AM"),V("div",{class:"q-time__link "+($.value!==!0?"q-time__link--active":"cursor-pointer"),tabindex:U.value,onClick:Xe,onKeyup:_t},"PM")])),V("div",{class:"q-time__header flex flex-center no-wrap "+M.value},s)}function Dt(){const l=r.value[h.value];return V("div",{class:"q-time__content col relative-position"},[V(jt,{name:"q-transition--scale"},()=>V("div",{key:"clock"+h.value,class:"q-time__container-parent absolute-full"},[V("div",{ref:e,class:"q-time__container-child fit overflow-hidden"},[$e(V("div",{class:"q-time__clock cursor-pointer non-selectable",onClick:pt,onMousedown:ht},[V("div",{class:"q-time__clock-circle fit"},[V("div",{class:"q-time__clock-pointer"+(r.value[h.value]===null?" hidden":t.color!==void 0?` text-${t.color}`:""),style:B.value}),dt.value.map(s=>V("div",{class:`q-time__clock-position row flex-center q-time__clock-pos-${s.index}`+(s.val===l?" q-time__clock-position--active "+M.value:s.disable===!0?" q-time__clock-position--disable":"")},[V("span",s.label)]))])]),ct.value)])])),t.nowBtn===!0?V(Y,{class:"q-time__now-button absolute",icon:k.iconSet.datetime.now,unelevated:!0,size:"sm",round:!0,color:t.color,textColor:t.textColor,tabindex:U.value,onClick:Re}):null])}return x.proxy.setNow=Re,()=>{const l=[Dt()],s=Ot(w.default);return s!==void 0&&l.push(V("div",{class:"q-time__actions"},s)),t.name!==void 0&&t.disable!==!0&&c(l,"push"),V("div",{class:C.value,tabindex:-1},[xt(),V("div",{class:"q-time__main col overflow-auto"},l)])}}});const J=t=>(it("data-v-217bda0c"),t=t(),rt(),t),pa={class:"row no-wrap justify-between items-center"},ha={class:"dialog-name row no-wrap items-center q-gutter-x-sm"},ga=J(()=>i("div",{class:"font-main"},"\uC608\uC57D\uBC29\uC1A1 \uCD94\uAC00",-1)),wa={class:"row no-wrap"},ka={class:"q-gutter-y-sm",style:{"min-width":"300px"}},ba={class:"q-gutter-y-sm"},xa={class:"row items-center q-gutter-x-xs"},Da=J(()=>i("span",null,"\uC774\uB984",-1)),qa={class:"q-gutter-y-sm"},Ca={class:"row no-wrap items-center q-gutter-x-xs"},Ma=J(()=>i("span",null,"\uBC18\uBCF5 \uC124\uC815",-1)),Sa={class:"q-pa-xs"},$a={class:"row items-center justify-end"},Va={class:"row items-center justify-end"},Pa={class:"q-gutter-y-sm",style:{"min-width":"300px"}},za={class:"q-gutter-y-sm"},Ta={class:"row no-wrap justify-between items-center"},Ha={class:"row no-wrap items-center q-gutter-x-xs"},Oa=J(()=>i("span",null,"\uBC29\uC1A1 \uAD6C\uAC04",-1)),Ia=J(()=>i("span",null," \uC120\uD0DD\uB41C \uBC29\uC1A1\uAD6C\uAC04\uC774 \uC5C6\uC2B5\uB2C8\uB2E4. ",-1)),Qa=[Ia],Aa={class:"q-gutter-y-sm"},ja={class:"row no-wrap items-center q-gutter-x-xs"},Ya=J(()=>i("span",null,"\uBC29\uC1A1 \uC124\uC815",-1)),Ua={class:"row no-wrap justify-between items-center q-mb-md"},Na={class:"row no-wrap items-center q-gutter-x-xs"},Wa=J(()=>i("span",null,"\uCC60\uC784",-1)),Ba={class:"q-gutter-y-sm"},Fa={key:0,class:"q-gutter-y-sm"},Za=J(()=>i("div",{class:"text-caption text-red",style:{"text-align":"right"}}," \uBC29\uC1A1\uC2DC\uAC04\uC740 \uCD5C\uB300 60\uBD84\uC785\uB2C8\uB2E4. ",-1)),Ka={key:1},La={key:0,class:"row no-wrap justify-between items-center"},Ra={class:"row no-wrap items-center q-gutter-x-xs"},Ea=J(()=>i("span",null,"\uD30C\uC77C",-1)),Ga={class:"q-gutter-x-sm"},Ja={key:1,class:"row no-wrap justify-between items-center"},Xa={class:"row no-wrap items-center q-gutter-x-xs"},el=J(()=>i("span",null,"\uC74C\uC131 \uD569\uC131",-1)),tl={class:"q-gutter-x-sm"},al={key:2,class:"panel q-py-sm q-px-sm q-mt-sm q-gutter-x-sm row justify-start items-center"},ll={key:3,class:"panel q-pa-sm q-mt-sm row justify-start items-center"},nl=J(()=>i("span",null," \uC120\uD0DD\uB41C \uD30C\uC77C\uC774 \uC5C6\uC2B5\uB2C8\uB2E4. ",-1)),ol=[nl],sl={__name:"DialogAddSchedule",setup(t){A.locale("ko");const w=Ze(),{dialogRef:H,onDialogOK:x,onDialogCancel:k}=Yt(),{fnNotiInfo:R,fnNotiWarn:U,fnNotiError:M}=lt(),{fnExistsSchedule:O}=pe(),{fnPlayStart:v,modal:u}=Le(),{fnDeleteFile:c}=Ut(),q=P({get(){return e.Preamble==="Chime ascending triple.wav"},set(){return e.Preamble?e.Preamble="":e.Preamble="Chime ascending triple.wav"}}),y=P({get(){return e.MaxPageTime/60},set(C){e.MaxPageTime=C*60}}),e=Nt({active:!0,name:"",repeat:"once",weekDays:[],date:A().format("YYYY-MM-DD"),time:A().format("HH:mm"),MaxPageTime:60,Preamble:"",devices:[],zones:[],file:null,MessageDelete:!1,Mode:"tts",description:""});K(!1);const D=()=>{w.dialog({component:da,componentProps:{selected:e.devices}}).onOk(async C=>{e.devices=C,e.zones=await Zt(C)})},I=()=>{w.dialog({component:ca,componentProps:{file:e.file}}).onOk(async C=>{e.file=C[0],e.MaxPageTime=await W(C[0].fullpath)})},E=()=>{Kt.ttsMode==="sapi"?w.dialog({component:ma,componentProps:{file:e.file}}).onOk(async C=>{e.file=C,e.MaxPageTime=await W(C.fullpath)}):w.dialog({component:va,componentProps:{file:e.file}}).onOk(async C=>{e.file=C,e.MaxPageTime=await W(C.fullpath)})},W=async C=>{const{data:p}=await oe.get("/files/duration",{params:{file:encodeURIComponent(C)}});return Math.ceil(p.duration)},h=async()=>{e.Mode==="tts"&&(u.value=!1,await c()),e.file=null},r=C=>{C==="workDays"&&(e.weekDays=[1,2,3,4,5])},$=async()=>{w.loading.show({message:"\uC608\uC57D\uBC29\uC1A1 \uB0B4\uC6A9\uC744 \uD655\uC778 \uC911\uC785\uB2C8\uB2E4."});try{if(e.repeat!=="once"&&(e.date=""),!e.file&&e.Mode!=="live")return M("\uD30C\uC77C\uC744 \uC120\uD0DD\uD574\uC8FC\uC138\uC694.","\uC2A4\uCF00\uC904 \uB4F1\uB85D\uC5D0 \uD544\uC694\uD55C \uD30C\uC77C\uC744 \uC120\uD0DD\uD574 \uC8FC\uC138\uC694.");if(e.devices.length==0)return M("\uBC29\uC1A1\uAD6C\uAC04\uC744 \uC120\uD0DD\uD574\uC8FC\uC138\uC694.","\uC2A4\uCF00\uC904 \uB4F1\uB85D\uC5D0 \uD544\uC694\uD55C \uBC29\uC1A1\uAD6C\uAC04\uC744 \uC120\uD0DD\uD574 \uC8FC\uC138\uC694.");const C=await O(e);if(C&&C.length)return M("\uC911\uBCF5\uB41C \uC2A4\uCF00\uC904\uC774 \uC874\uC7AC\uD569\uB2C8\uB2E4.","\uD574\uB2F9 \uC2DC\uAC04\uACFC \uC9C0\uC5ED\uC758 \uC608\uC57D \uBC29\uC1A1\uC774 \uC774\uBBF8 \uC874\uC7AC\uD569\uB2C8\uB2E4.");if(e.repeat==="once"){const p=A(`${e.date} ${e.time}`);if(A().isAfter(p))return M("\uC608\uC57D \uC2DC\uAC04\uC774 \uC774\uBBF8 \uC9C0\uB098\uAC14\uC2B5\uB2C8\uB2E4.","\uC608\uC57D \uC2DC\uAC04\uC744 \uB2E4\uC2DC \uD655\uC778 \uD574\uC8FC\uC138\uC694.")}e.repeat==="everyWeek"&&e.repeat==="workDays"&&e.weekDays.sort((p,o)=>p-o),x(e)}catch(C){M(C.message,C.caption)}finally{w.loading.hide()}};return(C,p)=>(f(),Z(Ft,{ref_key:"dialogRef",ref:H,persistent:""},{default:n(()=>[a(nt,{class:"q-dialog-plugin bg-trans schedule_dialog",style:{"border-radius":"8px",width:"650px"}},{default:n(()=>[a(Ve,{class:"q-py-md"},{default:n(()=>[i("div",pa,[i("div",ha,[a(z,{name:"add_circle",color:"primary",size:"sm"}),ga])])]),_:1}),a(ne),a(Wt,{onSubmit:$},{default:n(()=>[a(Ve,null,{default:n(()=>[i("div",wa,[i("span",ka,[i("div",ba,[i("div",xa,[a(z,{name:"label",color:"primary",size:"sm"}),Da]),a(Ce,{modelValue:e.name,"onUpdate:modelValue":p[0]||(p[0]=o=>e.name=o),dense:"",filled:"",label:"\uC774\uB984",rules:[S(Ue)],"lazy-rules":""},null,8,["modelValue","rules"])]),a(ne),i("div",qa,[i("div",Ca,[a(z,{name:"schedule",color:"primary",size:"sm"}),Ma]),a(Me,{modelValue:e.repeat,"onUpdate:modelValue":[p[1]||(p[1]=o=>e.repeat=o),r],options:[{label:"\uD55C\uBC88",value:"once"},{label:"\uB9E4\uC77C",value:"everyDay"},{label:"\uB9E4\uC8FC",value:"everyWeek"},{label:"\uC6D4~\uAE08",value:"workDays"}],dense:"",filled:"","emit-value":"","map-options":"",label:"\uBC18\uBCF5 \uBAA8\uB4DC",rules:[S(Ue)],"lazy-rules":""},null,8,["modelValue","rules"]),e.repeat==="everyWeek"||e.repeat==="workDays"?(f(),Z(Me,{key:0,modelValue:e.weekDays,"onUpdate:modelValue":p[2]||(p[2]=o=>e.weekDays=o),options:S(sa),dense:!e.weekDays.length,filled:"","stack-label":"","use-chips":"",multiple:"","emit-value":"","map-options":"",label:"\uC694\uC77C \uC120\uD0DD",rules:[o=>o.length||"\uD544\uC218 \uC785\uB825 \uD56D\uBAA9\uC785\uB2C8\uB2E4"],"lazy-rules":""},{"selected-item":n(o=>[i("div",Sa,[a(We,{dense:"",removable:"",onRemove:B=>o.removeAtIndex(o.index),tabindex:o.tabindex,color:"white","text-color":"primary",class:"q-ma-none"},{default:n(()=>[m(_(o.opt.label),1)]),_:2},1032,["onRemove","tabindex"])])]),_:1},8,["modelValue","options","dense","rules"])):N("",!0),e.repeat==="once"?(f(),Z(Ce,{key:1,dense:"",filled:"",modelValue:e.date,"onUpdate:modelValue":p[4]||(p[4]=o=>e.date=o),label:"\uB0A0\uC9DC",rules:[S(Bt)],"lazy-rules":""},{append:n(()=>[a(z,{name:"event",class:"cursor-pointer"},{default:n(()=>[a(Fe,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:n(()=>[a(ia,{modelValue:e.date,"onUpdate:modelValue":p[3]||(p[3]=o=>e.date=o),mask:"YYYY-MM-DD",rules:["date"],"today-btn":"",locale:S(Ke)},{default:n(()=>[i("div",$a,[$e(a(Y,{label:"Close",color:"primary",flat:""},null,512),[[Be]])])]),_:1},8,["modelValue","locale"])]),_:1})]),_:1})]),_:1},8,["modelValue","rules"])):N("",!0),a(Ce,{dense:"",filled:"",modelValue:e.time,"onUpdate:modelValue":p[6]||(p[6]=o=>e.time=o),label:"\uC2DC\uAC04",mask:"time",rules:[S(Ue),"time"],"lazy-rules":""},{append:n(()=>[a(z,{name:"access_time",class:"cursor-pointer"},{default:n(()=>[a(Fe,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:n(()=>[a(_a,{modelValue:e.time,"onUpdate:modelValue":p[5]||(p[5]=o=>e.time=o),format24h:""},{default:n(()=>[i("div",Va,[$e(a(Y,{label:"Close",color:"primary",flat:""},null,512),[[Be]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue","rules"])])]),a(ne,{vertical:"",class:"q-mx-sm"}),i("span",Pa,[i("div",za,[i("div",Ta,[i("div",Ha,[a(z,{name:"location_on",color:"primary",size:"sm"}),Oa]),a(z,{class:"cursor-pointer",name:"add_circle",color:"primary",size:"sm",onClick:D},{default:n(()=>[a(L,null,{default:n(()=>[m("\uBC29\uC1A1\uAD6C\uAC04\uC120\uD0DD")]),_:1})]),_:1})]),e.zones&&e.zones.length?(f(),T("div",{key:0,class:"panel q-gutter-x-sm row justify-start items-center cursor-pointer",onClick:D},[(f(!0),T(de,null,Pe(e.zones,(o,B)=>(f(),Z(ua,{key:B},{default:n(()=>[m(_(o),1)]),_:2},1024))),128))])):(f(),T("div",{key:1,class:"panel q-pa-sm q-mt-sm row justify-start items-center cursor-pointer",onClick:D},Qa))]),a(ne),i("div",Aa,[i("div",ja,[a(z,{name:"schedule_send",color:"primary",size:"sm"}),Ya]),a(Me,{class:"q-mt-sm",modelValue:e.Mode,"onUpdate:modelValue":p[7]||(p[7]=o=>e.Mode=o),options:[{label:"TTS",value:"tts"},{label:"\uBA54\uC2DC\uC9C0",value:"message"},{label:"\uC2E4\uC2DC\uAC04",value:"live"}],dense:"",filled:"","emit-value":"","map-options":"",label:"\uBC29\uC1A1 \uBAA8\uB4DC"},null,8,["modelValue"])]),i("div",Ua,[i("div",Na,[a(z,{name:"notifications",color:"primary",size:"sm"}),Wa]),a(ot,{modelValue:q.value,"onUpdate:modelValue":p[8]||(p[8]=o=>q.value=o)},null,8,["modelValue"])]),i("div",Ba,[e.Mode==="live"?(f(),T("div",Fa,[a(Ce,{modelValue:y.value,"onUpdate:modelValue":p[9]||(p[9]=o=>y.value=o),dense:"",filled:"",type:"number",min:"1",max:"60",label:"\uBC29\uC1A1 \uC2DC\uAC04(\uBD84)"},null,8,["modelValue"]),Za])):N("",!0),e.Mode!=="live"?(f(),T("div",Ka,[e.Mode==="message"?(f(),T("div",La,[i("div",Ra,[a(z,{name:"save",color:"primary",size:"sm"}),Ea]),i("div",Ga,[a(z,{class:"cursor-pointer",name:"add_circle",color:"primary",size:"sm",onClick:I},{default:n(()=>[a(L,null,{default:n(()=>[m("\uD30C\uC77C\uC120\uD0DD")]),_:1})]),_:1})])])):(f(),T("div",Ja,[i("div",Xa,[a(z,{name:"save",color:"primary",size:"sm"}),el]),i("div",tl,[a(z,{class:"cursor-pointer",name:"volume_up",color:"blue-10",size:"sm",onClick:E},{default:n(()=>[a(L,null,{default:n(()=>[m("\uC74C\uC131\uD569\uC131")]),_:1})]),_:1})])])),e.file?(f(),T("div",al,[i("div",null,[a(z,{class:"cursor-pointer",name:"play_arrow",color:"primary",size:"xs",onClick:p[10]||(p[10]=o=>S(v)(e.file))}),m(" "+_(e.file.base),1)]),a(z,{class:"cursor-pointer q-mr-sm",name:"cancel",color:"red-10",size:"sm",onClick:h})])):(f(),T("div",ll,ol))])):N("",!0)])])])]),_:1}),a(ne),a(st,{align:"right"},{default:n(()=>[a(Y,{round:"",flat:"",color:"red-10",icon:"cancel",onClick:S(k)},null,8,["onClick"]),a(Y,{round:"",flat:"","no-caps":"",color:"primary",icon:"check_circle",type:"submit"})]),_:1})]),_:1})]),_:1})]),_:1},512))}};var il=Te(sl,[["__scopeId","data-v-217bda0c"]]);A.locale("ko");const ye=K("list"),re=K([]),Se=K(!1);K([]);P(()=>re.value.filter(t=>t.devices.some(w=>Lt.value.zones.includes(w.deviceId))));const _e=async t=>{const w=await oe.get(`/broadcast/schedule?options=${JSON.stringify(t)}`);re.value=w.data.schedules},rl=t=>{const w=at.findIndex(H=>H.value===t);return w!==-1?at[w].label:""},ul=t=>(t.sort((w,H)=>w-H),t.map(w=>Ke.daysShort[w])),dl=async t=>{const{devices:w}=t,H=w.map(x=>({deviceId:x.deviceId,ipaddress:x.ipaddress,amx:x.amx,Zones:x.value.map(k=>{if(typeof k=="number")return k;if(typeof k=="object")return k.Zone})}));return await oe.post("/broadcast/schedule",{...t,devices:H})},cl=async t=>await oe.get("/broadcast/schedule/sync",{params:{idx:t}}),pe=()=>{const t=Ze(),{fnNotiInfo:w,fnNotiWarn:H,fnNotiError:x}=lt(),k=async()=>{t.dialog({component:il}).onOk(async u=>{try{t.loading.show({message:"\uBC29\uC1A1 \uC608\uC57D\uC744 \uB4F1\uB85D \uC911\uC785\uB2C8\uB2E4."});const{data:c}=await dl(u);t.loading.hide(),t.loading.show({message:"\uD30C\uC77C\uC744 \uC5C5\uBB34\uBC29\uC1A1 \uC8FC\uC7A5\uCE58\uB85C \uC804\uC1A1\uC911 \uC785\uB2C8\uB2E4"}),u.Mode!=="live"&&await cl(c.idx)}catch(c){console.error(c),x("\uBC29\uC1A1 \uC608\uC57D \uC911 \uC624\uB958\uAC00 \uBC1C\uC0DD\uD588\uC2B5\uB2C8\uB2E4","\uC7A0\uC2DC\uD6C4\uC5D0 \uB2E4\uC2DC \uC2DC\uB3C4\uD574\uC8FC\uC138\uC694.")}finally{await _e(),t.loading.hide()}})},R=u=>{t.dialog({component:et,componentProps:{icon:"delete",iconColor:"red-10",title:"\uC120\uD0DD\uD55C \uBC29\uC1A1 \uC608\uC57D\uC744 \uC0AD\uC81C \uD569\uB2C8\uB2E4.",caption:`${u.name} \uBC29\uC1A1 \uC608\uC57D\uC744 \uC0AD\uC81C \uD569\uB2C8\uB2E4.`}}).onOk(async()=>{try{t.loading.show(),await oe.delete("/broadcast/schedule",{data:{schedule:u}}),await _e()}catch(c){console.error(c)}finally{t.loading.hide()}})},U=async u=>{try{t.loading.show({message:"\uD30C\uC77C \uB3D9\uAE30\uD654 \uC911..."}),await oe.get("/broadcast/schedule/sync",{params:{idx:u}})}catch(c){console.error(c)}finally{t.loading.hide()}},M=async u=>{t.dialog({component:et,componentProps:{icon:"check_circle",iconColor:u.active?"warning":"primary",title:`${u.active?"\uBE44\uD65C\uC131\uD654":"\uD65C\uC131\uD654"} \uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?`,caption:`${u.name} \uBC29\uC1A1 \uC608\uC57D\uC744 ${u.active?"\uBE44\uD65C\uC131\uD654":"\uD65C\uC131\uD654"} \uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?`}}).onOk(async()=>{try{t.loading.show();let c=[];if(!u.active){if(u.repeat==="once"&&A().isAfter(A(`${u.date} ${u.time}`)))return t.loading.hide(),x("\uC608\uC57D \uC2DC\uAC04\uC774 \uC774\uBBF8 \uC9C0\uB098\uAC14\uC2B5\uB2C8\uB2E4","\uC608\uC57D \uC2DC\uAC04\uC744 \uB2E4\uC2DC \uD655\uC778 \uD574\uC8FC\uC138\uC694");if(c=await O(u),c&&c.length)return t.loading.hide(),x("\uC608\uC57D\uBC29\uC1A1\uC774 \uC774\uBBF8 \uC874\uC7AC \uD569\uB2C8\uB2E4",`\uD574\uB2F9 \uC2DC\uAC04\uACFC \uC9C0\uC5ED\uC758 \uC608\uC57D \uBC29\uC1A1\uC774 \uC774\uBBF8 \uC874\uC7AC\uD569\uB2C8\uB2E4. ${c.join(",")}`)}await oe.put("/broadcast/schedule/active",{...u,active:!u.active}),await _e(),u.active?H(`${u.name} \uBC29\uC1A1 \uC608\uC57D\uC774 \uBE44\uD65C\uC131\uD654 \uB418\uC5C8\uC2B5\uB2C8\uB2E4.`):w(`${u.name} \uBC29\uC1A1 \uC608\uC57D\uC774 \uD65C\uC131\uD654 \uB418\uC5C8\uC2B5\uB2C8\uB2E4.`)}catch(c){x(c)}finally{t.loading.hide()}})},O=async u=>{try{let c=[];const{_id:q,time:y,MaxPageTime:e,repeat:D,date:I,weekDays:E,devices:W}=u,{data:h}=await oe.get("/broadcast/schedule/exists",{params:{devices:W.map(o=>o.deviceId)}}),r=A(y,"HH:mm");let $=A(A(y,"HH:mm").add(e+30,"seconds").format("HH:mm"),"HH:mm");const p=h.schedules.filter(o=>{const B=A(o.time,"HH:mm"),ee=A(A(o.time,"HH:mm").add(o.MaxPageTime+30,"seconds").format("HH:mm"),"HH:mm");ee.add(o.MaxPageTime+30,"seconds");const He=B.isSame(r)||B.isSame($)||ee.isSame(r)||ee.isSame($),se=v(W,o.devices);return He&&se||B.isBetween(r,$)||ee.isBetween(r,$)||r.isBetween(B,ee)||$.isBetween(B,ee)}).filter(o=>!o._id&&o.active||o._id!==q&&o.active);console.log("exist",p);for(let o of p)if(D==="once"&&(o.repeat==="everyDay"||o.repeat==="once"&&o.date===I||o.repeat==="everyWeek"&&o.weekDays.includes(new Date(I).getDay())||o.repeat==="workDays"&&o.weekDays.includes(new Date(I).getDay()))&&c.push(o),D==="everyDay"&&(["everyDay","everyWeek","workDays"].includes(o.repeat)&&c.push(o),o.repeat==="once"&&o.date===I&&c.push(o)),D==="everyWeek"||D==="workDays"){if(o.repeat==="everyDay"&&c.push(o),o.repeat==="once"&&E.includes(new Date(o.date).getDay())&&c.push(o),o.repeat==="everyWeek"||o.repeat==="workDays")for(let B of E)o.weekDays.includes(B)&&c.push(o);if(D==="workDays"&&o.repeat==="workDays")for(let B of E)o.weekDays.includes(B)&&c.push(o)}return c.length?c.map(o=>o.name):!1}catch(c){throw c}},v=(u,c)=>{const q=u.map(e=>{let D=[];if(e.value&&e.value.length)return D=e.value.map(I=>{if(typeof I=="number")return I;if(typeof I=="object")return I.Zone}),{deviceId:e.deviceId,Zones:D};if(e.Zones&&e.Zones.length)return{deviceId:e.deviceId,Zones:e.Zones}});return c.some(e=>q.some(D=>D.deviceId===e.deviceId&&D.Zones.some(I=>e.Zones.includes(I))))};return{fnAddSchedule:k,fnDeleteSchedule:R,fnSyncFileSchedule:U,fnActiveSchedule:M,fnExistsSchedule:O,fnCheckZones:v}};const ml=t=>(it("data-v-7fc8e948"),t=t(),rt(),t),vl={key:0},fl={class:"start-time"},yl={key:1},_l={class:"start-time"},pl={key:2},hl={style:{"max-width":"200px"}},gl={class:"start-time"},wl={key:0},kl={key:1},bl={key:2},xl={key:0,class:"row no-wrap items-center"},Dl={class:"row justify-center q-py-md",style:{position:"relative"}},ql={class:"row items-center q-px-md",style:{position:"absolute",right:"0",top:"1px","font-size":"0.8rem"}},Cl=ml(()=>i("span",null,"\uD398\uC774\uC9C0\uB2F9 \uD45C\uC2DC",-1)),Ml={__name:"listView",setup(t){A.locale("ko");const w=[{name:"name",label:"\uC774\uB984",align:"center",field:"name",sortable:!0},{name:"user",label:"\uC0AC\uC6A9\uC790",align:"center",field:"user",sortable:!0},{name:"active",label:"\uD65C\uC131\uD654",align:"center",field:"active",sortable:!0},{name:"repeat",label:"\uBC18\uBCF5",align:"center",field:"repeat",sortable:!0},{name:"time",label:"\uC2DC\uAC04",align:"center",sortable:!0},{name:"zones",label:"\uBC29\uC1A1\uAD6C\uAC04",align:"center",field:"zones",sortable:!0},{name:"mode",label:"\uBC29\uC1A1\uBAA8\uB4DC",align:"center",field:"Mode",sortable:!0},{name:"file",label:"\uD30C\uC77C",align:"center",field:"file",sortable:!0},{name:"actions",label:"\uAE30\uB2A5",align:"center"}],H=Ze(),{fnPlayStart:x}=Le(),{fnDeleteSchedule:k,fnActiveSchedule:R,fnSyncFileSchedule:U}=pe(),M=K({sortBy:"",descending:!1,page:1,rowsPerPage:10}),O=P(()=>v.value&&v.value.length>0?Math.ceil(v.value.length/M.value.rowsPerPage):1),v=P(()=>{if(Se.value){const q=A().format("YYYY-MM-DD");return re.value.filter(y=>!(y.repeat==="once"&&y.date!==q||(y.repeat==="everyWeek"||y.repeat==="workDays")&&!y.weekDays.includes(A().day())))}return re.value}),u=q=>{if(q.active==!1)return!1;if(q.repeat==="once"){const y=A(`${q.date} ${q.time}`);if(A().isAfter(y))return!1}return!0},c=(q,y)=>A(q,"HH:mm").add(y+30,"seconds").format("HH:mm");return ut(async()=>{H.loading.show();try{await _e(),console.log("schedules.value",re.value)}catch(q){console.error(q)}finally{H.loading.hide()}}),(q,y)=>(f(),T(de,null,[a(Xt,{columns:w,rows:v.value,pagination:M.value,"onUpdate:pagination":y[0]||(y[0]=e=>M.value=e),"wrap-cells":"",flat:"","hide-pagination":""},{body:n(e=>[a(ea,{props:e,class:ze(u(e.row)?"":"text-grey-5")},{default:n(()=>[a(te,{key:"name",props:e},{default:n(()=>[m(_(e.row.name)+" ",1),a(L,{delay:2e3},{default:n(()=>[m(_(e.row.idx),1)]),_:2},1024)]),_:2},1032,["props"]),a(te,{key:"user",props:e},{default:n(()=>[m(_(e.row.user),1)]),_:2},1032,["props"]),a(te,{key:"active",props:e},{default:n(()=>[a(Y,{flat:"",round:"",icon:e.row.active?"check_circle":"block",color:e.row.active?"positive":"negative",size:"sm",onClick:D=>S(R)(e.row)},{default:n(()=>[a(L,null,{default:n(()=>[m(_(e.row.active?"\uD65C\uC131\uD654":"\uBE44\uD65C\uC131\uD654"),1)]),_:2},1024)]),_:2},1032,["icon","color","onClick"])]),_:2},1032,["props"]),a(te,{key:"repeat",props:e},{default:n(()=>[m(_(S(rl)(e.row.repeat)),1)]),_:2},1032,["props"]),a(te,{key:"time",props:e},{default:n(()=>{var D,I,E;return[i("div",null,[e.row.repeat==="once"?(f(),T("div",vl,[i("div",null,_(e.row.date),1),i("div",null,[i("span",fl,_(e.row.time),1),m(" ~ "+_(c(e.row.time,(D=e.row.MaxPageTime)!=null?D:60)),1)])])):N("",!0),e.row.repeat==="everyDay"?(f(),T("div",yl,[i("span",_l,_(e.row.time),1),m(" ~ "+_(c(e.row.time,(I=e.row.MaxPageTime)!=null?I:60)),1)])):N("",!0),e.row.repeat==="everyWeek"||e.row.repeat==="workDays"?(f(),T("div",pl,[i("div",hl,[(f(!0),T(de,null,Pe(e.row.weekDays,W=>(f(),Z(We,{key:W,color:"primary","text-color":"white",size:"sm"},{default:n(()=>[m(_(S(Ke).days[W]),1)]),_:2},1024))),128))]),i("div",null,[i("span",gl,_(e.row.time),1),m(" ~ "+_(c(e.row.time,(E=e.row.MaxPageTime)!=null?E:60)),1)])])):N("",!0)])]}),_:2},1032,["props"]),a(te,{key:"zones",props:e},{default:n(()=>[(f(!0),T(de,null,Pe(e.row.zones,D=>(f(),T("span",{key:D},[a(We,{size:"sm",color:e.row.active?"primary":"grey-5","text-color":"white"},{default:n(()=>[m(_(D),1)]),_:2},1032,["color"])]))),128))]),_:2},1032,["props"]),a(te,{key:"mode",props:e},{default:n(()=>[e.row.Mode==="live"?(f(),T("div",wl,[a(z,{name:"mic",color:"primary",size:"xs"}),m("\uC2E4\uC2DC\uAC04 \uBC29\uC1A1 ")])):e.row.Mode==="message"?(f(),T("div",kl,[a(z,{name:"volume_up",color:"primary",size:"xs"}),m(" \uBA54\uC2DC\uC9C0 \uBC29\uC1A1 ")])):(f(),T("div",bl,"TTS"))]),_:2},1032,["props"]),a(te,{key:"file",props:e},{default:n(()=>[e.row.file?(f(),T("div",xl,[a(Y,{flat:"",round:"",disable:!e.row.active,icon:"play_arrow",size:"sm",color:e.row.active?"primary":"grey-5",onClick:D=>S(x)(e.row.file)},null,8,["disable","color","onClick"]),i("span",null,_(e.row.file.base),1)])):N("",!0)]),_:2},1032,["props"]),a(te,{key:"actions",props:e},{default:n(()=>[i("div",null,[a(Y,{round:"",flat:"",icon:"backup",color:"primary",size:"sm",onClick:D=>S(U)(e.row.idx)},{default:n(()=>[a(L,null,{default:n(()=>[m("\uD30C\uC77C\uB3D9\uAE30\uD654")]),_:1})]),_:2},1032,["onClick"]),a(Y,{round:"",flat:"",icon:"delete",color:"red-10",size:"sm",onClick:D=>S(k)(e.row)},{default:n(()=>[a(L,null,{default:n(()=>[m("\uC0AD\uC81C")]),_:1})]),_:2},1032,["onClick"])])]),_:2},1032,["props"])]),_:2},1032,["props","class"])]),_:1},8,["rows","pagination"]),a(ne),i("div",Dl,[a(ta,{modelValue:M.value.page,"onUpdate:modelValue":y[1]||(y[1]=e=>M.value.page=e),max:O.value,"max-pages":8,size:"12px",flat:"","active-design":"outline","direction-links":"","boundary-links":""},null,8,["modelValue","max"]),i("div",ql,[Cl,a(Me,{style:{"font-size":"0.8rem"},borderless:"","item-aligned":"",dense:"","hide-bottom-space":"","map-options":"",modelValue:M.value.rowsPerPage,"onUpdate:modelValue":y[2]||(y[2]=e=>M.value.rowsPerPage=e),options:[5,10,15,20,25,30,40,50]},null,8,["modelValue"])])])],64))}};var Sl=Te(Ml,[["__scopeId","data-v-7fc8e948"]]);const $l={class:"q-gutter-x-xs"},Vl={class:"start-time"},Pl={__name:"PopupSchedule",props:["event"],setup(t){const{fnDeleteSchedule:w,fnSyncFileSchedule:H,fnActiveSchedule:x}=pe(),{fnPlayStart:k}=Le(),R=M=>{switch(M){case"once":return"\uBC18\uBCF5\uC5C6\uC74C";case"everyDay":return"\uB9E4\uC77C";case"everyWeek":return"\uB9E4\uC8FC";case"workDays":return"\uD3C9\uC77C";default:return"\uBC18\uBCF5\uC5C6\uC74C"}},U=(M,O)=>{const v=A(M,"HH:mm");return v.add(O+30,"seconds"),v.format("HH:mm")};return(M,O)=>(f(),Z(Fe,{style:{"border-radius":"10px"}},{default:n(()=>[a(nt,{class:"popup"},{default:n(()=>[a(Ve,{class:"row no-wrap justify-between items-center q-pt-md q-pb-sm"},{default:n(()=>[i("div",$l,[a(z,{name:"event",color:t.event.active?"primary":"grey-3",size:"sm"},null,8,["color"]),i("span",{class:ze(["font-main",t.event.active?"":"text-grey-3"])},_(t.event.name),3)]),i("div",null,[a(Y,{flat:"",round:"",icon:t.event.active?"check_circle":"block",color:t.event.active?"positive":"negative",size:"sm",onClick:O[0]||(O[0]=v=>S(x)(t.event))},{default:n(()=>[a(L,null,{default:n(()=>[m(_(t.event.active?"\uD65C\uC131\uD654":"\uBE44\uD65C\uC131\uD654"),1)]),_:1})]),_:1},8,["icon","color"]),a(Y,{round:"",flat:"",icon:"backup",size:"sm",color:"primary",onClick:O[1]||(O[1]=v=>S(H)(t.event.idx))},{default:n(()=>[a(L,null,{default:n(()=>[m("\uD30C\uC77C\uB3D9\uAE30\uD654")]),_:1})]),_:1}),a(Y,{round:"",flat:"",icon:"delete",size:"sm",color:"red-10",onClick:O[2]||(O[2]=v=>S(w)(t.event))},{default:n(()=>[a(L,null,{default:n(()=>[m("\uC0AD\uC81C")]),_:1})]),_:1})])]),_:1}),a(ne),a(Ve,{class:"q-py-none"},{default:n(()=>[a(Rt,{class:ze(t.event.active?"":"text-grey-5")},{default:n(()=>[a(ae,null,{default:n(()=>[a(le,null,{default:n(()=>[a(j,null,{default:n(()=>[m("\uC0AC\uC6A9\uC790")]),_:1}),a(j,{caption:""},{default:n(()=>[m(_(t.event.user),1)]),_:1})]),_:1})]),_:1}),a(ae,null,{default:n(()=>[a(le,null,{default:n(()=>[a(j,null,{default:n(()=>[m("\uBC18\uBCF5")]),_:1}),a(j,{caption:""},{default:n(()=>[m(_(R(t.event.repeat)),1)]),_:1})]),_:1})]),_:1}),t.event.repeat==="once"?(f(),Z(ae,{key:0},{default:n(()=>[a(le,null,{default:n(()=>[a(j,null,{default:n(()=>[m("\uB0A0\uC9DC")]),_:1}),a(j,{caption:""},{default:n(()=>[m(_(t.event.date),1)]),_:1})]),_:1})]),_:1})):N("",!0),t.event.repeat==="everyWeek"?(f(),Z(ae,{key:1},{default:n(()=>[a(le,null,{default:n(()=>[a(j,null,{default:n(()=>[m("\uC694\uC77C")]),_:1}),a(j,{caption:""},{default:n(()=>[m(_(S(ul)(t.event.weekDays).join(",")),1)]),_:1})]),_:1})]),_:1})):N("",!0),a(ae,null,{default:n(()=>[a(le,null,{default:n(()=>[a(j,null,{default:n(()=>[m("\uC2DC\uAC04")]),_:1}),a(j,{caption:""},{default:n(()=>{var v;return[i("div",null,[i("span",Vl,_(t.event.time),1),m(" ~ "+_(U(t.event.time,(v=t.event.duration)!=null?v:60)),1)])]}),_:1})]),_:1})]),_:1}),a(ae,null,{default:n(()=>[a(le,null,{default:n(()=>[a(j,null,{default:n(()=>[m("\uBC29\uC1A1\uBAA8\uB4DC")]),_:1}),a(j,{caption:""},{default:n(()=>[m(_(t.event.Mode==="live"?"\uC2E4\uC2DC\uAC04 \uBC29\uC1A1":"")+" "+_(t.event.Mode==="message"?"\uBA54\uC2DC\uC9C0 \uBC29\uC1A1":"")+" "+_(t.event.Mode==="tts"?"TTS":""),1)]),_:1})]),_:1})]),_:1}),t.event.file?(f(),Z(ae,{key:2},{default:n(()=>[a(le,null,{default:n(()=>[a(j,null,{default:n(()=>[m("\uD30C\uC77C")]),_:1}),a(j,{caption:""},{default:n(()=>[a(z,{class:"cursor-pointer",name:"play_arrow",color:"primary",size:"xs",onClick:O[3]||(O[3]=v=>S(k)(t.event.file))}),m(" "+_(t.event.file.base),1)]),_:1})]),_:1})]),_:1})):N("",!0),t.event.description?(f(),Z(ae,{key:3},{default:n(()=>[a(le,null,{default:n(()=>[a(j,null,{default:n(()=>[m("\uC124\uBA85")]),_:1}),a(j,{caption:""},{default:n(()=>[m(_(t.event.description),1)]),_:1})]),_:1})]),_:1})):N("",!0)]),_:1},8,["class"])]),_:1}),a(st,{align:"right",class:"q-pt-none"},{default:n(()=>[$e(a(Y,{flat:"",round:"",icon:"cancel",color:"red-10"},null,512),[[Be]])]),_:1})]),_:1})]),_:1}))}};var zl=Te(Pl,[["__scopeId","data-v-72ea3b10"]]);const Tl={style:{position:"relative"}},Hl={class:"month-view"},Ol={class:"row no-wrap justify-center q-gutter-x-sm"},Il={style:{display:"flex"}},Ql={class:"title q-calendar__ellipsis"},Al={__name:"monthView",setup(t){pe();const w={"--calendar-active-date-background":"#fff","--calendar-border-current":"#3eaf7c 2px solid"},H=K(null),x=K([]),k=K({}),R=K(tt.formatDate(Date.now(),"YYYY-MM-DD"));new Date(R.value).getMonth()+1;const U=(v,u)=>{const c="text-white rounded-border";if(v.active===!1)return"bg-grey-3";switch(v.repeat){case"once":return`bg-blue-5 ${c}`;case"everyDay":return`bg-green-5 ${c}`;case"everyWeek":return`bg-purple-5 ${c}`;case"workDays":return`bg-orange-5 ${c}`}},M=()=>{k.value={};for(let v of re.value)switch(v.repeat){case"once":Object.keys(k.value).includes(v.date)===!1&&(k.value[v.date]=[]),k.value[v.date].push(v);break;case"everyDay":for(let u of x.value)Object.keys(k.value).includes(u.date)===!1&&(k.value[u.date]=[]),k.value[u.date].push(v);break;case"everyWeek":case"workDays":for(let u of x.value)v.weekDays.includes(u.weekday)&&(Object.keys(k.value).includes(u.date)===!1&&(k.value[u.date]=[]),k.value[u.date].push(v));break}},O=v=>{x.value=v.days,M()};return Ne(re,()=>{M()}),ut(()=>{_e()}),(v,u)=>{const c=Et("q-calendar-month");return f(),T(de,null,[i("div",Tl,[i("div",Hl,_(S(tt).formatDate(R.value,"YYYY\uB144 MM\uC6D4")),1),i("div",Ol,[a(Y,{color:"primary",icon:"keyboard_arrow_left",round:"",flat:"",onClick:u[0]||(u[0]=()=>H.value.prev())}),a(Y,{color:"primary",icon:"home",round:"",flat:"",onClick:u[1]||(u[1]=q=>H.value.moveToToday())}),a(Y,{color:"primary",icon:"keyboard_arrow_right",round:"",flat:"",onClick:u[2]||(u[2]=q=>H.value.next())})])]),i("div",Il,[a(c,{ref_key:"calendar",ref:H,style:w,modelValue:R.value,"onUpdate:modelValue":u[3]||(u[3]=q=>R.value=q),locale:"ko-kr",weekdays:[0,1,2,3,4,5,6],"date-type":"rounded","day-min-height":"100","no-active-date":"",animated:"",bordered:"",onChange:O},{day:n(({scope:{timestamp:q}})=>[(f(!0),T(de,null,Pe(k.value[q.date],y=>(f(),T("div",{key:y.id,class:ze(["schedule",U(y,"month")])},[i("div",Ql,_(y.time)+" : "+_(y.name),1),a(L,null,{default:n(()=>[m(_(y.time)+" : "+_(y.name),1)]),_:2},1024),a(zl,{event:y},null,8,["event"])],2))),128))]),_:1},8,["modelValue"])])],64)}}};var jl=Te(Al,[["__scopeId","data-v-6b839482"]]);const Yl={class:"borderd"},Ul={class:"q-px-lg q-py-sm row no-wrap justify-between items-center bg-grey-3"},Nl={class:"row no-wrap items-center q-gutter-x-sm q-py-xs"},Wl=i("div",{class:"font-main"},"\uC2A4\uCF00\uC904 \uBC29\uC1A1",-1),Bl={class:"row no-wrap items-center q-gutter-x-sm"},Fl={class:"q-mr-md"},cn={__name:"SchedulePage",setup(t){const{fnAddSchedule:w}=pe();return(H,x)=>(f(),Z(Jt,{class:"page"},{default:n(()=>[i("div",Yl,[i("div",Ul,[i("div",Nl,[a(z,{name:"today",color:"primary",size:"md"}),Wl,a(z,{class:"cursor-pointer",name:"add_circle",size:"sm",color:"primary",onClick:S(w)},{default:n(()=>[a(L,null,{default:n(()=>[m("\uC608\uC57D\uCD94\uAC00")]),_:1})]),_:1},8,["onClick"])]),i("div",Bl,[i("div",Fl,[S(ye)==="list"?(f(),Z(ot,{key:0,modelValue:S(Se),"onUpdate:modelValue":x[0]||(x[0]=k=>Gt(Se)?Se.value=k:null),size:"sm","left-label":"",label:"\uC624\uB298 \uC2A4\uCF00\uC904\uB9CC \uBCF4\uAE30"},null,8,["modelValue"])):N("",!0)]),a(z,{class:"cursor-pointer",name:"list_alt",size:"sm",color:"primary",onClick:x[1]||(x[1]=()=>ye.value="list")},{default:n(()=>[a(L,null,{default:n(()=>[m("\uB9AC\uC2A4\uD2B8")]),_:1})]),_:1}),a(ne,{vertical:"",color:"grey-4"}),a(z,{class:"cursor-pointer",name:"calendar_month",size:"sm",color:"primary",onClick:x[2]||(x[2]=()=>ye.value="month")},{default:n(()=>[a(L,null,{default:n(()=>[m("\uC6D4\uAC04")]),_:1})]),_:1})])]),i("div",null,[S(ye)==="list"?(f(),Z(Sl,{key:0})):N("",!0),S(ye)==="month"?(f(),Z(jl,{key:1})):N("",!0)])])]),_:1}))}};export{cn as default};
