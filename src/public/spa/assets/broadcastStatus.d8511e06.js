import{aD as ee,v as N,r as C,o as E,aK as S,y as c,z as $,A as o,j as n,N as ne,O as Z,B as a,R as u,G as f,C as d,U as te,aL as ae,aM as oe,V as k,W as q,aN as se,D as z,aO as ie,aP as le,aE as re,K as B,P as de,aQ as A,aR as ce,aS as D,I as h,J as F,aT as R,L as U,aU as M,aV as j,aW as L,aX as ue,F as O,aY as me,H as V}from"./index.a5e6215c.js";import{Q as ve}from"./QExpansionItem.d6dea7f3.js";import{Q as fe}from"./QTooltip.cc5706de.js";import{Q as pe}from"./QSelect.1c9d1a69.js";import{_ as _e}from"./editSingleName.bdf5c5f7.js";import{f as G,b,u as ge}from"./useBarix.f6818c4f.js";import{u as K}from"./useNotify.6007da9b.js";import{_ as T}from"./plugin-vue_export-helper.21dcd24c.js";const ze={class:"row no-wrap justify-between items-center"},he={class:"row no-wrap items-center q-gutter-x-md"},ye=a("div",{class:"dialog-name"},"\uBC29\uC1A1\uC9C0\uC5ED\uC124\uC815",-1),xe={class:"dialog-caption row no-wrap items-center cursor-pointer"},we={__name:"setSigleChannel",props:["device","zone"],setup(e){const{fnNotiWarn:_,fnNotiError:y}=K(),{dialogRef:x,onDialogCancel:m,onDialogOK:i}=ee(),t=e,v=N(),p=C([]),g=C(null),I=C(0),w=C(""),W=(l,r,s)=>{r(()=>{p.value=b.value.filter(Q=>Q.name.indexOf(l)>-1)})},H=async()=>{try{const l=await v.dialog({component:_e,componentProps:{title:"\uC9C0\uC5ED \uC774\uB984 \uBCC0\uACBD",caption:`${t.device.name} \uC9C0\uC5ED\uC758 ${w.value} \uC9C0\uC5ED \uC774\uB984\uC744 \uBCC0\uACBD\uD569\uB2C8\uB2E4.`,name:w}}).onOk();v.loading.show(),await A.put("/devices/qsys/modifiedzonename",{deviceId:t.device.deviceId,zone:t.zone.Zone,name:l}),w.value=l,await S()}catch{y("\uC9C0\uC5ED \uC774\uB984 \uBCC0\uACBD\uC5D0 \uC2E4\uD328\uD588\uC2B5\uB2C8\uB2E4.","\uC7A0\uC2DC\uD6C4\uC5D0 \uB2E4\uC2DC \uC2DC\uB3C4\uD574\uC8FC\uC138\uC694.")}finally{v.loading.hide()}},J=async l=>{if(l!==null){const r=b.value.findIndex(P=>P._id===l),{data:s}=await A.get("/devices/qsys/existszone",{params:{id:l}});if(s&&s.value&&s.value.length)return s.value[0].ZoneStatus.findIndex(Y=>Y.destination===l)===t.zone.Zone-1?void 0:(g.value=null,_("\uB2E4\uB978 \uBC29\uC1A1 \uAD6C\uAC04\uC5D0\uC11C \uC774\uBBF8 \uC0AC\uC6A9\uC911\uC785\uB2C8\uB2E4"));const Q=b.value[r].ipaddress;await ce({deviceId:t.device.deviceId,zone:t.zone.Zone,destination:l,ipaddress:Q}),await S()}},X=()=>{D("zone:set:channel",{deviceId:t.device.deviceId,...t.zone,gain:I.value})};return E(async()=>{await Promise.all([G(),S()]),p.value=b.value,I.value=t.zone.gain,w.value=t.zone.name,t.zone.destination&&t.zone.destination._id&&(g.value=t.zone.destination._id)}),(l,r)=>(c(),$(de,{ref_key:"dialogRef",ref:x},{default:o(()=>[n(ne,{class:"q-dialog-plugin bg-trans",style:{"border-radius":"8px"}},{default:o(()=>[n(Z,null,{default:o(()=>{var s;return[a("div",ze,[a("div",he,[n(u,{name:"location_on",color:"primary",size:"1.5rem"}),a("div",null,[ye,a("div",xe,[f(d(`${e.device.name} ${e.zone.Zone}. ${(s=w.value)!=null?s:"\uC774\uB984\uC5C6\uC74C"} \uCC44\uB110 `)+" ",1),n(u,{name:"edit",color:"primary",onClick:H})])])]),n(u,{class:"cursor-pointer",name:"refresh",size:"sm",color:"primary",onClick:X},{default:o(()=>[n(fe,null,{default:o(()=>[f("\uC0C8\uB85C\uACE0\uCE68")]),_:1})]),_:1})])]}),_:1}),n(Z,null,{default:o(()=>[n(pe,{filled:"",dense:"",clearable:"",modelValue:g.value,"onUpdate:modelValue":[r[0]||(r[0]=s=>g.value=s),J],options:p.value,label:"\uB124\uD2B8\uC6CC\uD06C \uC218\uC2E0\uAE30 \uC120\uD0DD","option-value":"_id","option-label":"name","hide-selected":"","use-input":"","fill-input":"","input-debounce":"0","emit-value":"","map-options":"",onFilter:W},{option:o(s=>[n(te,ae(oe(s.itemProps)),{default:o(()=>[n(k,{avatar:""},{default:o(()=>[n(u,{name:"storage"})]),_:1}),n(k,null,{default:o(()=>[n(q,null,{default:o(()=>[f(d(s.opt.name),1)]),_:2},1024),n(q,{caption:""},{default:o(()=>[f(d(s.opt.ipaddress),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options"])]),_:1}),n(Z,null,{default:o(()=>[a("div",null,[n(se,{modelValue:I.value,"onUpdate:modelValue":[r[2]||(r[2]=s=>I.value=s),r[3]||(r[3]=s=>z(ie)({deviceId:e.device.deviceId,zone:e.zone.Zone,volume:s}))],filled:"",dense:"",label:"\uBCFC\uB968",type:"number"},{append:o(()=>[n(u,{class:"cursor-pointer",name:e.zone.mute?"volume_off":"volume_up",color:e.zone.mute?"red-10":"primary",onClick:r[1]||(r[1]=s=>z(le)({deviceId:e.device.deviceId,zone:e.zone.Zone,mute:!e.zone.mute}))},null,8,["name","color"])]),_:1},8,["modelValue"])])]),_:1}),n(re,{align:"right"},{default:o(()=>[n(B,{round:"",flat:"",color:"red-10",icon:"cancel",onClick:z(m)},null,8,["onClick"]),n(B,{round:"",flat:"","no-caps":"",color:"primary",icon:"check_circle",onClick:z(i)},null,8,["onClick"])]),_:1})]),_:1})]),_:1},512))}};const ke=e=>(M("data-v-03443116"),e=e(),j(),e),Ie={class:"floating-position q-gutter-x-xs row no-wrap items-center"},Ce={class:"floating-font"},be={class:""},Se={key:0},$e={class:"column items-end text-caption"},qe={class:"row q-gutter-x-xs cursor-pointer"},Qe=["href"],Ze={key:1},Ve={class:"column items-end text-caption"},De=ke(()=>a("div",null,"Local",-1)),Ne={class:"row q-gutter-x-xs"},Pe={__name:"statusDevice",props:["zone","device"],setup(e){ge();const _=N(),y=i=>i&&i.status?i.streamurl?"green":"yellow":"red",x=i=>{switch(i){case 1:case 2:return"bg-red text-white";case 3:case 4:return"bg-green-2"}},m=(i,t)=>{_.dialog({component:we,componentProps:{device:i,zone:t}})};return(i,t)=>{var v;return c(),h("div",{class:R(["borderd q-pt-md q-px-sm q-pb-sm q-gutter-sx",e.zone.Active?x(e.zone.Priority):""]),style:{position:"relative","min-width":"100px"}},[a("div",Ie,[a("span",Ce,d(e.zone.gain),1),e.zone.mute?(c(),$(u,{key:0,name:"volume_off",color:"red-10"})):F("",!0),n(u,{class:"cursor-pointer",name:"settings",color:"primary",onClick:t[0]||(t[0]=p=>m(e.device,e.zone))})]),a("div",be,[a("span",null,d(e.zone.Zone)+". ",1),a("span",{class:R(e.zone.name?"text-black text-bold":"text-grey-5")},d((v=e.zone.name)!=null?v:"\uC774\uB984\uC5C6\uC74C"),3)]),e.zone.destination?(c(),h("div",Se,[a("div",null,[n(U,{class:"q-my-sm"})]),a("div",$e,[a("div",qe,[f(d(e.zone.destination.name)+" ",1),n(u,{name:"circle",color:y(e.zone.destination)},null,8,["color"])]),a("a",{href:`http://${e.zone.destination.ipaddress}`,target:"_blank"},d(e.zone.destination.ipaddress),9,Qe)])])):(c(),h("div",Ze,[a("div",null,[n(U,{class:"q-my-sm"})]),a("div",Ve,[De,a("div",Ne,"Channel "+d(e.zone.Zone),1)])]))],2)}}};var Be=T(Pe,[["__scopeId","data-v-03443116"]]);const Ae=e=>(M("data-v-6812ab10"),e=e(),j(),e),Re={class:"row no-wrap justify-start items-center q-gutter-x-sm header-font"},Ue=Ae(()=>a("span",null,"\uC9C0\uC5ED \uBC29\uC1A1\uC911",-1)),Le={class:"row q-pa-md q-gutter-sm"},Oe={__name:"broadcastStatus",setup(e){K();const _=N(),y=m=>m.filter(i=>i.Active).length,x=m=>!!(V.value.isAdmin||V.value.zones&&V.value.zones.includes(m));return E(async()=>{try{_.loading.show(),await S(),await G()}catch{D("\uB370\uC774\uD130 \uCD08\uAE30\uD654 \uC624\uB958","\uC7A0\uC2DC\uD6C4\uC5D0 \uB2E4\uC2DC \uC2DC\uB3C4\uD574 \uC8FC\uC138\uC694.")}finally{_.loading.hide()}}),(m,i)=>(c(!0),h(O,null,L(z(me),(t,v)=>(c(),$(ve,{key:v,"header-class":"bg-grey-1"},{header:o(()=>[n(k,{avatar:""},{default:o(()=>[n(u,{color:t.connected?"primary":"red-10",name:"location_on",size:"md"},null,8,["color"])]),_:2},1024),n(k,null,{default:o(()=>[n(q,null,{default:o(()=>[a("div",null,[f(d(t.name)+" ",1),x(t.deviceId)?(c(),$(u,{key:0,class:"q-ml-sm cursor-pointer",color:"grey",name:"refresh",onClick:ue(p=>z(D)("zone:set:device",t.deviceId),["prevent","stop"])},null,8,["onClick"])):F("",!0)])]),_:2},1024),n(q,{caption:""},{default:o(()=>[f(d(t.ipaddress),1)]),_:2},1024)]),_:2},1024),n(k,{side:""},{default:o(()=>[a("div",Re,[f(d(y(t.ZoneStatus))+" ",1),Ue])]),_:2},1024)]),default:o(()=>[a("div",Le,[(c(!0),h(O,null,L(t.ZoneStatus,(p,g)=>(c(),h("div",{key:g},[n(Be,{zone:p,device:t},null,8,["zone","device"])]))),128))])]),_:2},1024))),128))}};var Je=T(Oe,[["__scopeId","data-v-6812ab10"]]);export{Je as B};
