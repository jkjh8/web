import{h as C,u as H,C as i,D as x,E as s,G as t,j as e,V as p,H as h,a$ as le,I as l,K as y,N as b,b0 as ce,M as m,Y as J,aP as W,aQ as X,Z as V,_ as ee,bG as c,bH as de,c as ue,bp as me,A as M,o as j,F as S,a_ as Z,aY as N,aZ as U,O as Q,aF as te,bI as se,r as I,bJ as D,S as O,U as $,aX as _e,bK as pe,bL as T,aG as A,W as ae,bM as oe,aU as P,bN as G,bO as ve,bP as fe,bQ as K,bR as ge,bS as Y,aO as ye,L as he}from"./index.7d6e6e9a.js";import{Q as we,a as xe}from"./useFiles.3d1b0dce.js";import{Q as $e}from"./QPage.33bcd206.js";import{Q as B}from"./QTooltip.ba2e3f59.js";import{Q as F}from"./QBadge.d32397d0.js";import{u as be}from"./useQsysFunc.a7a6f437.js";import{Q as R}from"./QSelect.227126e2.js";import{f as E,_ as ke,a as qe,D as ze}from"./DialogTts.af2dc911.js";import{_ as L}from"./plugin-vue_export-helper.21dcd24c.js";import{u as ne}from"./usePlayer.fadb6c4d.js";import{u as Ce}from"./useTts.d43da63b.js";import"./QMenu.6d6bfec8.js";import"./QSlideTransition.1af4b784.js";import"./DialogInput.05e3bb39.js";import"./DialogConfirm.e935c67b.js";import"./QTable.369673be.js";import"./QExpansionItem.5e78b032.js";import"./QTr.84b6fb99.js";import"./useNotify.7298a91a.js";const Se=C("div",{class:"q-space"});var Qe=H({name:"QSpace",setup(){return()=>Se}});const Pe={class:"row fit items-center q-gutter-x-sm"},Ie={style:{"font-size":"1rem","font-weight":"500"}},Me={class:"text-grey-8"},je={class:"row items-center q-gutter-x-sm text-grey-7"},Ve={__name:"statusTree",setup(o){const{fnBroadcastCancel:u}=be(),d=n=>{let r=0;for(let a=0;a<n.length;a++)n[a].Active&&(r+=1);return r};return(n,r)=>(i(),x(we,{class:"custom-q-tree",nodes:l(ce),"node-key":"_id","children-key":"ZoneStatus","no-node-label":"\uBC29\uC1A1\uAD6C\uAC04\uC774 \uC5C6\uC2B5\uB2C8\uB2E4"},{"header-root":s(a=>[t("div",Pe,[e(p,{color:a.node.connected?"primary":"red-10",name:"location_on",size:"sm"},null,8,["color"]),t("div",Ie,h(a.node.name),1),e(Qe),t("div",Me,h(d(a.node.ZoneStatus))+"\uAC1C \uC9C0\uC5ED \uBC29\uC1A1\uC911 ",1),d(a.node.ZoneStatus)?(i(),x(p,{key:0,class:"cursor-pointer",name:"cancel",color:"red-10",onClick:le(_=>l(u)(a.node),["prevent","stop"])},{default:s(()=>[e(B,null,{default:s(()=>[y("\uBC29\uC1A1\uCDE8\uC18C")]),_:1})]),_:2},1032,["onClick"])):b("",!0)])]),"default-header":s(a=>[t("div",je,[t("div",null,[y(h(a.node.name?a.node.name:"no name")+" ",1),a.node.Active?(i(),x(F,{key:0,color:"green"},{default:s(()=>[y(" ONAIR ")]),_:1})):b("",!0)])])]),_:1},8,["nodes"]))}},Ze={class:"q-gutter-y-xs"},Te={class:"row no-wrap items-center q-gutter-x-xs"},De=t("div",null,"\uBC29\uC1A1\uBAA8\uB4DC",-1),Ne={__name:"pageMode",setup(o){return(u,d)=>(i(),m("div",Ze,[t("div",Te,[e(p,{name:"list",color:"primary",size:"sm"}),De]),e(R,{class:"q-mt-xs",modelValue:l(c).Mode,"onUpdate:modelValue":d[0]||(d[0]=n=>l(c).Mode=n),options:l(de),dense:"",filled:"","map-options":"","emit-value":""},{option:s(n=>[e(J,W(X(n.itemProps)),{default:s(()=>[e(V,{avatar:""},{default:s(()=>[e(p,{name:n.opt.icon},null,8,["name"])]),_:2},1024),e(V,null,{default:s(()=>[e(ee,null,{default:s(()=>[y(h(n.opt.label),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options"])]))}},Ue={class:"row no-wrap justify-between items-center"},Oe={class:"row no-wrap justify-start items-center q-gutter-x-sm"},Ae=t("div",null,"\uCC60\uC784",-1),Be={__name:"pagePreamble",props:["preamble"],emits:["update:value"],setup(o,{emit:u}){const d=o,n=u,r=ue({get(){return d.preamble==="Chime ascending triple.wav"},set(){return d.preamble?n("update:value",""):n("update:value","Chime ascending triple.wav")}});return(a,_)=>(i(),m("div",Ue,[t("div",Oe,[e(p,{name:"notifications_none",color:"green-10",size:"sm"}),Ae]),e(me,{modelValue:r.value,"onUpdate:modelValue":_[0]||(_[0]=v=>r.value=v)},null,8,["modelValue"])]))}},Fe={class:"q-gutter-y-xs"},Re={class:"row no-wrap items-center q-gutter-x-sm"},Le=t("div",null,"\uC6B0\uC120\uC21C\uC704",-1),Ge={__name:"pagePriority",setup(o){return(u,d)=>(i(),m("div",Fe,[t("div",Re,[e(p,{name:"priority_high",color:"lime-10",size:"sm"}),Le]),e(R,{class:"q-mt-xs",modelValue:l(c).Priority,"onUpdate:modelValue":d[0]||(d[0]=n=>l(c).Priority=n),dense:"",filled:"",options:[{value:1,label:"\uAE34\uAE09\uBC29\uC1A1",icon:"priority_high"},{value:3,label:"\uC77C\uBC18\uBC29\uC1A1",icon:"low_priority"}],"emit-value":"","map-options":""},{option:s(n=>[e(J,W(X(n.itemProps)),{default:s(()=>[e(V,{avatar:""},{default:s(()=>[e(p,{name:n.opt.icon},null,8,["name"])]),_:2},1024),e(V,null,{default:s(()=>[e(ee,null,{default:s(()=>[y(h(n.opt.label),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue"])]))}};const re=o=>(N("data-v-79a116d7"),o=o(),U(),o),Ke={class:"row no-wrap justify-between items-center"},Ye={class:"row no-wrap items-center q-gutter-x-xs"},Ee=re(()=>t("div",null,"\uBC29\uC1A1\uAD6C\uAC04",-1)),He={key:0,class:"panel q-py-sm q-px-sm q-mt-sm q-gutter-x-sm row justify-start items-center"},Je={key:1,class:"panel q-pa-sm q-mt-sm row justify-start items-center"},We=re(()=>t("span",null," \uC120\uD0DD\uB41C \uBC29\uC1A1\uAD6C\uAC04\uC774 \uC5C6\uC2B5\uB2C8\uB2E4. ",-1)),Xe=[We],et={__name:"pageZones",props:["devices","zones"],emits:["update:zones","update:devices"],setup(o,{emit:u}){const d=M(),n=o,r=u,a=()=>{d.dialog({component:ke,componentProps:{selected:n.devices}}).onOk(_=>{r("update:devices",_),r("update:zones",E(_))})};return j(()=>{n.devices&&n.devices.length&&r("update:zones",E(n.devices))}),(_,v)=>(i(),m(S,null,[t("div",Ke,[t("div",Ye,[e(p,{name:"location_on",color:"primary",size:"sm"}),Ee]),e(p,{class:"cursor-pointer q-mr-xs",name:"add_circle",color:"primary",size:"sm",onClick:a})]),o.zones&&o.zones.length?(i(),m("div",He,[(i(!0),m(S,null,Z(o.zones,(f,w)=>(i(),x(F,{key:w},{default:s(()=>[y(h(f),1)]),_:2},1024))),128))])):(i(),m("div",Je,Xe))],64))}};var tt=L(et,[["__scopeId","data-v-79a116d7"]]);const st={class:"row no-wrap justify-start items-center q-gutter-x-sm"},at=t("div",null,"\uBC29\uC1A1\uC2DC\uAC04(\uCD08)",-1),ot=t("div",{class:"text-caption text-red",style:{"text-align":"right"}}," \uCD5C\uB300 \uBC29\uC1A1 \uC2DC\uAC04\uC740 4\uBD84(240\uCD08)\uC73C\uB85C \uC81C\uD55C \uB429\uB2C8\uB2E4. ",-1),nt={__name:"pageLive",setup(o){return(u,d)=>(i(),m(S,null,[t("div",st,[e(p,{name:"timer",color:"pink-8",size:"sm"}),at]),e(R,{modelValue:l(c).MaxPageTime,"onUpdate:modelValue":d[0]||(d[0]=n=>l(c).MaxPageTime=n),dense:"",filled:"",options:[30,60,90,120,150,180,210,240]},null,8,["modelValue"]),ot],64))}},rt={class:"row no-wrap justify-between items-center"},it={class:"row no-wrap justify-start items-center q-gutter-x-sm"},lt=t("div",null,"\uD30C\uC77C",-1),ct={key:0,class:"bg-grey-2 q-pa-sm q-mt-sm q-gutter-x-sm row no-wrap justify-between items-center",style:{"border-radius":"2px","min-height":"40px"}},dt={key:1,class:"bg-grey-2 q-pa-sm q-mt-sm row justify-start items-center",style:{"border-radius":"2px",height:"40px"}},ut=t("span",null," \uC120\uD0DD\uB41C \uD30C\uC77C\uC774 \uC5C6\uC2B5\uB2C8\uB2E4. ",-1),mt=[ut],_t={__name:"pageFile",props:["file"],emits:["update:value"],setup(o,{emit:u}){const d=o,n=u,r=M(),{fnPlayStart:a}=ne(),_=()=>{r.dialog({component:qe,componentProps:{file:d.file}}).onOk(v=>{n("update:value",v[0])})};return(v,f)=>(i(),m(S,null,[t("div",rt,[t("div",it,[e(p,{name:"save",color:"primary",size:"sm"}),lt]),e(p,{class:"cursor-pointer",name:"add_circle",color:"primary",size:"sm",onClick:_})]),o.file?(i(),m("div",ct,[t("div",null,[e(p,{class:"cursor-pointer",name:"play_arrow",color:"primary",size:"xs",onClick:f[0]||(f[0]=w=>l(a)(o.file))}),y(" "+h(o.file.base),1)]),e(p,{class:"cursor-pointer q-mr-sm",name:"cancel",color:"red-10",size:"sm",onClick:f[1]||(f[1]=w=>n("update:value",null))})])):(i(),m("div",dt,mt))],64))}},pt={class:"col q-gutter-y-sm"},vt={class:"row no-wrap justify-between items-center"},ft={class:"row no-wrap justify-between items-center q-gutter-x-sm"},gt=t("div",null,"TTS (Text to Speech)",-1),yt={class:"row no-wrap justify-between items-center"},ht={key:0,class:"row no-wrap justify-between items-center q-gutter-x-sm"},wt={key:1,class:"text-red-10 row items-center"},xt={__name:"pageTts",props:["file"],emits:["update:value"],setup(o,{emit:u}){const{fnDeleteFile:d}=Ce(),n=o,r=u,{fnPlayStart:a,modal:_}=ne(),v=M(),f=async()=>{await d(),_.value=!1,r("update:value",null)},w=()=>{v.dialog({component:ze,componentProps:{file:n.file}}).onOk(g=>{r("update:value",g)})};return j(async()=>{r("update:value",null)}),(g,k)=>(i(),m("div",pt,[t("div",vt,[t("div",ft,[e(p,{name:"volume_up",color:"primary",size:"sm"}),gt]),e(Q,{round:"",unelevated:"",color:"primary",icon:"mic",size:"sm",onClick:w},{default:s(()=>[e(B,null,{default:s(()=>[y("\uC74C\uC131\uD569\uC131")]),_:1})]),_:1})]),t("div",yt,[o.file?(i(),m("div",ht,[t("div",null,[e(p,{class:"cursor-pointer",name:"play_arrow",color:"primary",size:"sm",onClick:k[0]||(k[0]=q=>l(a)(o.file))}),y(" "+h(o.file.base),1)]),e(p,{class:"cursor-pointer q-mr-sm",name:"cancel",color:"red-10",size:"sm",onClick:f})])):(i(),m("div",wt,[e(p,{name:"warning"}),y(" \uD569\uC131\uB41C \uD30C\uC77C\uC774 \uC5C6\uC2B5\uB2C8\uB2E4. ")]))])]))}};const ie=o=>(N("data-v-6626935f"),o=o(),U(),o),$t={class:"q-dialog-plugin bg-trans broadcast-popup"},bt={key:0},kt={class:"row justify-center q-pt-md text-grey"},qt={class:"fit column q-gutter-y-sm",style:{width:"50%"}},zt={style:{"text-align":"right"}},Ct=ie(()=>t("div",{class:"name"},"\uBC29\uC1A1\uBAA8\uB4DC",-1)),St={style:{"text-align":"right"}},Qt=ie(()=>t("div",{class:"name"},"\uBC29\uC1A1\uAD6C\uAC04",-1)),Pt={class:"fit row justify-end"},It={class:"fit row no-wrap justify-center items-center q-mb-md q-gutter-x-sm"},Mt={__name:"pageLive",setup(o){const{dialogRef:u,onDialogCancel:d,onDialogOK:n}=te(),{fnZoneActive:r}=se(),a=I(!1),_=I(0);let v=null;const f=async()=>{a.value=!0;try{D();const g=await oe(c.devices),k=await P.put("/broadcast/active",{devices:g.map(z=>({deviceId:z.deviceId,Zones:z.params.Zones}))});if(k&&k.active)return r();const{data:q}=await P.put("/broadcast/live",{...c,devices:g,zones:c.zones});G.value=q.idx}catch(g){console.error(g)}v=setInterval(()=>{_.value++},1e3)},w=async()=>{try{await P.get("/broadcast/stop",{params:{idx:G.value}})}catch(g){console.error(g)}a.value=!1,clearInterval(v),v=null,_.value=0};return j(()=>{D()}),(g,k)=>(i(),x(ae,{ref_key:"dialogRef",ref:u,persistent:""},{default:s(()=>[t("div",$t,[e(p,{class:"floatingIcon cursor-pointer",name:"cancel",color:"red",size:"md",onClick:l(d)},{default:s(()=>[e(B,null,{default:s(()=>[y("Close")]),_:1})]),_:1},8,["onClick"]),e(O,{class:"transBG"},{default:s(()=>[e($,null,{default:s(()=>[t("div",{class:_e(["q-pa-md row no-wrap text-grey-2",a.value?"justify-between":"justify-end"]),style:{height:"90%","min-height":"400px","font-family":"'NanumSquare'"}},[a.value?(i(),m("div",bt,[e(pe,{color:"primary",size:"14rem",thickness:8}),t("div",kt," \uBC29\uC1A1\uC911 "+h(_.value)+"\uCD08 \uACBD\uACFC ",1)])):b("",!0),t("div",qt,[t("div",zt,[Ct,t("div",null,h(l(c).Mode),1)]),t("div",St,[Qt,t("div",Pt,[(i(!0),m(S,null,Z(l(c).zones,(q,z)=>(i(),x(F,{key:z,class:"q-ml-xs"},{default:s(()=>[y(h(q),1)]),_:2},1024))),128))])]),t("div",null,[(i(!0),m(S,null,Z(l(T),(q,z)=>(i(),m("div",{key:z,style:{"text-align":"right"}},h(l(T)[z]),1))),128))])])],2)]),_:1}),e(A,null,{default:s(()=>[t("div",It,[e(Q,{style:{width:"10rem"},unelevated:"",color:"primary",onClick:f},{default:s(()=>[y("\uC2DC\uC791")]),_:1}),e(Q,{style:{width:"10rem"},unelevated:"",color:"red-10",onClick:w},{default:s(()=>[y("\uC911\uC9C0")]),_:1})])]),_:1})]),_:1})])]),_:1},512))}};var jt=L(Mt,[["__scopeId","data-v-6626935f"]]);const Vt=[C("circle",{cx:"50",cy:"50",r:"48",fill:"none","stroke-width":"4","stroke-miterlimit":"10",stroke:"currentColor"}),C("line",{"stroke-linecap":"round","stroke-width":"4","stroke-miterlimit":"10",stroke:"currentColor",x1:"50",y1:"50",x2:"85",y2:"50.5"},[C("animateTransform",{attributeName:"transform",type:"rotate",from:"0 50 50",to:"360 50 50",dur:"2s",repeatCount:"indefinite"})]),C("line",{"stroke-linecap":"round","stroke-width":"4","stroke-miterlimit":"10",stroke:"currentColor",x1:"50",y1:"50",x2:"49.5",y2:"74"},[C("animateTransform",{attributeName:"transform",type:"rotate",from:"0 50 50",to:"360 50 50",dur:"15s",repeatCount:"indefinite"})])];var Zt=H({name:"QSpinnerClock",props:ve,setup(o){const{cSize:u,classes:d}=fe(o);return()=>C("svg",{class:d.value,width:u.value,height:u.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg"},Vt)}});const Tt=o=>(N("data-v-79a17814"),o=o(),U(),o),Dt={class:"q-dialog-plugin bg-trans broadcast-popup"},Nt={class:"row no-wrap justify-start items-center q-gutter-x-sm"},Ut=Tt(()=>t("div",{class:"font-main text-grey-2"},"\uBA54\uC2DC\uC9C0 \uBC29\uC1A1",-1)),Ot={key:0,class:"text-grey-5 row no-wrap items-center q-gutter-x-sm q-px-md"},At={style:{"font-size":"2rem"}},Bt={class:"text-white description q-pa-md"},Ft={class:"fit row no-wrap justify-center q-gutter-x-sm"},Rt={__name:"pageMessage",setup(o){const u=new AbortController,{dialogRef:d,onDialogCancel:n,onDialogOK:r}=te(),a=I(3),_=I(!1);let v=null;const f=()=>{v&&clearInterval(v),u.abort(),n()};return j(async()=>{try{D(),K({deviceId:"all",message:`\uD30C\uC77C \uC774\uB984: ${c.file.base}`}),await ge(u)}catch(w){console.error(w)}_.value=!0,K({deviceId:"all",message:"\uBC29\uC1A1\uC744 \uC2DC\uC791\uD569\uB2C8\uB2E4."}),v=setInterval(()=>{a.value>0?a.value-=1:(clearInterval(v),r(c))},1e3)}),(w,g)=>(i(),x(ae,{ref_key:"dialogRef",ref:d,persistent:""},{default:s(()=>[t("div",Dt,[e(O,{class:"transBG"},{default:s(()=>[e($,null,{default:s(()=>[t("div",Nt,[e(p,{name:"mic",color:"primary",size:"md"}),Ut])]),_:1}),e($,{style:{"min-height":"200px"}},{default:s(()=>[_.value?(i(),m("div",Ot,[e(Zt,{size:"md"}),t("span",At,h(a.value),1)])):b("",!0),t("div",Bt,[(i(!0),m(S,null,Z(l(T),(k,q)=>(i(),m("div",{key:q},h(l(T)[q]),1))),128))])]),_:1}),e(A,null,{default:s(()=>[t("div",Ft,[_.value?(i(),x(Q,{key:0,style:{width:"8rem"},color:"primary",onClick:g[0]||(g[0]=k=>l(r)(l(c)))},{default:s(()=>[y("\uC2DC\uC791")]),_:1})):b("",!0),e(Q,{style:{width:"8rem"},color:"red-10",onClick:f},{default:s(()=>[y("\uCDE8\uC18C")]),_:1})])]),_:1})]),_:1})])]),_:1},512))}};var Lt=L(Rt,[["__scopeId","data-v-79a17814"]]);const Gt={class:"full-width q-px-sm q-mb-md"},Kt={__name:"pageStart",props:["zones"],setup(o){const u=o,{fnNoZones:d,fnNoFile:n,fnZoneActive:r}=se(),a=M(),_=()=>{if(c.devices===null||c.devices.length===0)return d();if(c.Mode!=="live"&&(c.file===null||Object.keys(c.file).length===0))return n();switch(c.Mode){case"live":a.dialog({component:jt,componentProps:{zones:u.zones}});break;case"message":case"tts":a.dialog({component:Lt}).onOk(async v=>{const f=await oe(v.devices),w=await P.put("/broadcast/active",{devices:f.map(g=>({deviceId:g.deviceId,Zones:g.params.Zones}))});w&&w.active&&(r(),await Y()),await P.put("/broadcast/live/message",{...v,devices:f,zones:c.zones})}).onCancel(async()=>{await Y()});break}};return(v,f)=>(i(),m("div",Gt,[e(Q,{class:"full-width",color:"primary",label:"\uBC29\uC1A1\uC2DC\uC791",onClick:_})]))}},Yt={class:"borderd"},Et={class:"q-px-lg q-py-sm row no-wrap justify-between items-center bg-grey-2"},Ht={class:"row no-wrap items-center q-gutter-x-sm q-py-xs"},Jt=t("div",{class:"font-main"},"\uC2E4\uC2DC\uAC04 \uBC29\uC1A1",-1),Wt={class:"q-pa-xs"},Xt={class:"q-pa-sm row justify-center"},hs={__name:"LivePage",setup(o){const u=M(),d=I(40);return j(async()=>{u.loading.show(),await ye(),u.loading.hide()}),(n,r)=>(i(),x($e,{class:"page"},{default:s(()=>[t("div",Yt,[t("div",Et,[t("div",Ht,[e(p,{name:"mic",color:"primary",size:"md"}),Jt])]),t("div",null,[e(xe,{modelValue:d.value,"onUpdate:modelValue":r[5]||(r[5]=a=>d.value=a)},{before:s(()=>[t("div",Wt,[e(Ve)])]),after:s(()=>[t("div",Xt,[e(O,{flat:"",style:{width:"450px"}},{default:s(()=>[e($,null,{default:s(()=>[e(Ne)]),_:1}),l(he).em?(i(),x($,{key:0},{default:s(()=>[e(Ge)]),_:1})):b("",!0),e($,null,{default:s(()=>[e(Be,{preamble:l(c).Preamble,"onUpdate:value":r[0]||(r[0]=a=>l(c).Preamble=a)},null,8,["preamble"])]),_:1}),e($,null,{default:s(()=>[e(tt,{devices:l(c).devices,zones:l(c).zones,"onUpdate:devices":r[1]||(r[1]=a=>l(c).devices=a),"onUpdate:zones":r[2]||(r[2]=a=>l(c).zones=a)},null,8,["devices","zones"])]),_:1}),l(c).Mode==="live"?(i(),x($,{key:1},{default:s(()=>[e(nt)]),_:1})):b("",!0),l(c).Mode==="message"?(i(),x($,{key:2},{default:s(()=>[e(_t,{file:l(c).file,"onUpdate:value":r[3]||(r[3]=a=>l(c).file=a)},null,8,["file"])]),_:1})):b("",!0),l(c).Mode==="tts"?(i(),x($,{key:3},{default:s(()=>[e(xt,{file:l(c).file,"onUpdate:value":r[4]||(r[4]=a=>l(c).file=a)},null,8,["file"])]),_:1})):b("",!0),e(A,null,{default:s(()=>[e(Kt)]),_:1})]),_:1})])]),_:1},8,["modelValue"])])])]),_:1}))}};export{hs as default};
