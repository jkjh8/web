import{aF as V,C as D,D as N,E as a,j as e,S as F,U as Z,W as w,G as t,H as c,X as j,Y as g,Z as _,_ as s,K as n,I as y,b4 as A,aG as H,O as x,V as M,r as z,o as R,M as E,F as K,aY as L,aP as U,aN as W,aO as X,aS as S,aW as J,aX as ee,A as ae,aM as C,bR as te}from"./index.f84341ff.js";import{Q as I}from"./QTooltip.09ec6cf3.js";import{Q as ne}from"./QBadge.ad5332fa.js";import{Q as le,b as Y}from"./QTd.57c1f90c.js";import{Q as oe}from"./QPage.0f0def7e.js";import{c as se,_ as ie,a as de}from"./columns.ead907c6.js";import{_ as ce}from"./DialogConfirm.4b745526.js";import{Q as re}from"./QSelect.557c94c4.js";import{Q as ue}from"./useRules.7cc93492.js";import{f as fe,b as B}from"./useBarix.b08e9f71.js";import{u as G}from"./useNotify.575adf27.js";import{_ as me}from"./plugin-vue_export-helper.21dcd24c.js";import"./QMenu.936a7557.js";import"./QLinearProgress.ea785679.js";const _e=t("div",{class:"dialog-name"},"Q-SYS INFO",-1),pe={class:"caption font-sans"},ve={class:"q-px-md"},ge=["href"],he={__name:"infoQsys",props:["device"],emits:[...V.emits],setup(o,{emit:d}){const{dialogRef:p,onDialogHide:b,onDialogOK:Q,onDialogCancel:q}=V();return(P,k)=>(D(),N(M,{ref_key:"dialogRef",ref:p,onHide:y(b)},{default:a(()=>[e(F,{class:"q-dialog-plugin bg-trans",style:{"border-radius":"8px"}},{default:a(()=>[e(Z,{class:"row no-wrap q-gutter-sm items-center"},{default:a(()=>[e(w,{style:{"margin-top":"10px"},name:"img:qsys.svg",size:"1.5rem"}),t("div",null,[_e,t("div",pe,c(o.device.deviceId),1)])]),_:1}),e(Z,null,{default:a(()=>[t("div",ve,[e(j,{dense:""},{default:a(()=>[e(g,{dense:""},{default:a(()=>[e(_,null,{default:a(()=>[e(s,null,{default:a(()=>[n("\uC7A5\uCE58 \uC774\uB984")]),_:1}),e(s,{caption:""},{default:a(()=>[n(c(o.device.name),1)]),_:1})]),_:1})]),_:1}),e(g,{dense:""},{default:a(()=>[e(_,null,{default:a(()=>[e(s,null,{default:a(()=>[n("IP Address")]),_:1}),e(s,{caption:""},{default:a(()=>[t("a",{href:`http://${o.device.ipaddress}`,target:"_blank"},[n(c(o.device.ipaddress)+" ",1),e(w,{class:"cursor-pointer",name:"launch",color:"primary"})],8,ge)]),_:1})]),_:1})]),_:1}),e(g,{dense:""},{default:a(()=>[e(_,null,{default:a(()=>[e(s,null,{default:a(()=>[n("\uC6B0\uC120\uC21C\uC704")]),_:1}),e(s,{caption:""},{default:a(()=>[n(c(o.device.idx),1)]),_:1})]),_:1})]),_:1}),e(g,{dense:""},{default:a(()=>[e(_,null,{default:a(()=>[e(s,null,{default:a(()=>[n("\uC5F0\uACB0 \uC0C1\uD0DC")]),_:1}),e(s,{caption:""},{default:a(()=>[n(c(o.device.connected),1)]),_:1})]),_:1})]),_:1}),e(g,{dense:""},{default:a(()=>[e(_,null,{default:a(()=>[e(s,null,{default:a(()=>[n("\uCF54\uC5B4 \uD50C\uB7AB\uD3FC")]),_:1}),e(s,{caption:""},{default:a(()=>[n(c(o.device.EngineStatus.Platform),1)]),_:1})]),_:1})]),_:1}),e(g,{dense:""},{default:a(()=>[e(_,null,{default:a(()=>[e(s,null,{default:a(()=>[n("\uCF54\uC5B4 \uC0C1\uD0DC")]),_:1}),e(s,{caption:""},{default:a(()=>[n(c(o.device.EngineStatus.State),1)]),_:1})]),_:1})]),_:1}),e(g,{dense:""},{default:a(()=>[e(_,null,{default:a(()=>[e(s,null,{default:a(()=>[n("PA \uC2E4\uC2DC\uAC04 \uB370\uC774\uD130 \uC5F0\uB3D9")]),_:1}),e(s,{caption:""},{default:a(()=>[n(c(o.device.ZoneStatusConfigure),1)]),_:1})]),_:1})]),_:1}),e(g,{dense:""},{default:a(()=>[e(_,null,{default:a(()=>[e(s,null,{default:a(()=>[n("\uB9C8\uC9C0\uB9C9 \uC5C5\uB370\uC774\uD2B8")]),_:1}),e(s,{caption:""},{default:a(()=>[n(c(y(A).formatDate(o.device.updatedAt,"YYYY-MM-DD hh:mm:ss A")),1)]),_:1})]),_:1})]),_:1}),e(g,{dense:""},{default:a(()=>[e(_,null,{default:a(()=>[e(s,null,{default:a(()=>[n("\uC7A5\uCE58 \uB4F1\uB85D \uC2DC\uAC04")]),_:1}),e(s,{caption:""},{default:a(()=>[n(c(y(A).formatDate(o.device.createdAt,"YYYY-MM-DD hh:mm:ss A")),1)]),_:1})]),_:1})]),_:1})]),_:1})])]),_:1}),e(H,{align:"right"},{default:a(()=>[e(x,{round:"",flat:"","no-caps":"",color:"primary",icon:"check_circle",onClick:y(Q)},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["onHide"]))}};const T=o=>(J("data-v-4c173bc4"),o=o(),ee(),o),ye={class:"dialog-name row no-wrap items-center q-gutter-x-sm"},we=T(()=>t("div",null,"\uBC29\uC1A1\uAD6C\uAC04\uC774\uB984 \uC218\uC815",-1)),be={class:"text-caption"},xe={class:"table-header-line"},Qe=T(()=>t("thead",null,[t("tr",null,[t("th",{style:{width:"50px"}},"\uC9C0\uC5ED"),t("th",{style:{width:"260px"}},"\uC774\uB984"),t("th",{style:{width:"260px"}},"\uB124\uD2B8\uC6CC\uD06C \uC218\uC2E0\uAE30 \uC120\uD0DD")])],-1)),ke={style:{"text-align":"center",width:"50px"}},$e={style:{width:"260px"}},Ce={style:{width:"260px"}},Ie={__name:"editZoneSettings",props:["device"],emits:[...V.emits],setup(o,{emit:d}){const p=o,{dialogRef:b,onDialogCancel:Q,onDialogHide:q,onDialogOK:P}=V(),{fnNotiWarn:k,fnNotiError:O}=G(),l=z([]),f=z([]),i=(r,v,m)=>{v(()=>{f.value=B.value.filter(h=>h.name.indexOf(r)>-1)})},$=async(r,v)=>{if(r===null)return l.value[v].destination="";const m=l.value.findIndex(u=>u.destination===r);if(v!==-1&&v!==m)return l.value[v].destination="",k("\uC774\uBBF8 \uC120\uD0DD\uB41C \uB124\uD2B8\uC6CC\uD06C \uC218\uC2E0\uAE30\uC785\uB2C8\uB2E4.");const h=await S.get("/devices/qsys/existszones",{params:{id:r,deviceId:p.device.deviceId}});if(h.data&&h.data.value&&h.data.value.length)return h.data.value.findIndex(u=>u.deviceId===p.device.deviceId),l.value[v].destination="",k("\uC774\uBBF8 \uC120\uD0DD\uB41C \uB124\uD2B8\uC6CC\uD06C \uC218\uC2E0\uAE30\uC785\uB2C8\uB2E4.")};return R(async()=>{await fe(),l.value=[...p.device.ZoneStatus.map(r=>({name:r.name?r.name:"",Zone:r.Zone,destination:r.destination&&r.destination._id?r.destination._id:""}))],f.value=B.value}),(r,v)=>(D(),N(M,{ref_key:"dialogRef",ref:b,onHide:y(q),persistent:""},{default:a(()=>[e(F,{class:"q-dialog-plugin bg-trans",style:{"border-radius":"8px","max-width":"1000px",width:"650px"}},{default:a(()=>[e(Z,null,{default:a(()=>[t("div",ye,[e(w,{name:"add_circle",color:"primary",size:"sm"}),t("div",null,[we,t("div",be,c(o.device.name)+" "+c(o.device.ipaddress),1)])])]),_:1}),e(ue,{onSubmit:v[0]||(v[0]=m=>y(P)(l.value))},{default:a(()=>[e(Z,{class:"row justify-center"},{default:a(()=>[t("table",xe,[Qe,t("tbody",null,[(D(!0),E(K,null,L(l.value,(m,h)=>(D(),E("tr",{key:h},[t("td",ke,c(m.Zone),1),t("td",$e,[e(U,{filled:"",dense:"",modelValue:m.name,"onUpdate:modelValue":u=>m.name=u,label:`\uCC44\uB110 ${m.Zone}`},null,8,["modelValue","onUpdate:modelValue","label"])]),t("td",Ce,[e(re,{filled:"",dense:"",clearable:"",modelValue:m.destination,"onUpdate:modelValue":[u=>m.destination=u,u=>$(u,h)],options:f.value,label:`\uCC44\uB110 ${m.Zone} \uB124\uD2B8\uC6CC\uD06C \uC218\uC2E0\uAE30 \uC120\uD0DD`,"option-value":"_id","option-label":"name","hide-selected":"","use-input":"","fill-input":"","input-debounce":"0","emit-value":"","map-options":"",onFilter:i},{prepend:a(()=>[e(w,{name:"place"})]),option:a(u=>[e(g,W(X(u.itemProps)),{default:a(()=>[e(_,{avatar:""},{default:a(()=>[e(w,{name:"storage"})]),_:1}),e(_,null,{default:a(()=>[e(s,null,{default:a(()=>[n(c(u.opt.name),1)]),_:2},1024),e(s,{caption:""},{default:a(()=>[n(c(u.opt.ipaddress),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:2},1032,["modelValue","onUpdate:modelValue","options","label"])])]))),128))])])]),_:1}),e(H,{align:"right"},{default:a(()=>[e(x,{round:"",flat:"",color:"red-10",icon:"cancel",onClick:y(Q)},null,8,["onClick"]),e(x,{round:"",flat:"","no-caps":"",color:"primary",icon:"check_circle",type:"submit"})]),_:1})]),_:1})]),_:1})]),_:1},8,["onHide"]))}};var Se=me(Ie,[["__scopeId","data-v-4c173bc4"]]);const De={class:"borderd"},qe={class:"q-px-lg q-py-sm row no-wrap justify-between items-center bg-grey-2"},Pe={class:"row no-wrap items-center q-gutter-x-sm"},Ve=t("div",{class:"font-main"},"\uC5C5\uBB34\uBC29\uC1A1 \uC8FC\uC7A5\uCE58",-1),Ze=["href"],je={__name:"QsysPage",setup(o){const d=ae(),{fnNotiError:p}=G(),b=z(""),Q=()=>{d.dialog({component:ie,componentProps:{title:"\uC5C5\uBB34\uBC29\uC1A1\uC8FC\uC7A5\uCE58 \uCD94\uAC00",type:"qsys"}}).onOk(async l=>{try{d.loading.show(),await S.post("/devices/qsys",{...l})}catch{p({message:"\uC5C5\uBB34\uBC29\uC1A1 \uC8FC\uC7A5\uCE58 \uCD94\uAC00 \uC624\uB958",caption:"\uC7A0\uC2DC\uD6C4\uC5D0 \uB2E4\uC2DC \uC2DC\uB3C4\uD574 \uC8FC\uC138\uC694."})}finally{await C(),d.loading.hide()}})},q=l=>{d.dialog({component:he,componentProps:{device:l}})},P=l=>{d.dialog({component:de,componentProps:{title:"\uC5C5\uBB34\uBC29\uC1A1\uC8FC\uC7A5\uCE58 \uC218\uC815",type:"qsys",device:l}}).onOk(async f=>{try{d.loading.show(),await S.put("/devices/qsys/edit",{...f})}catch{p({message:"\uC5C5\uBB34\uBC29\uC1A1 \uC8FC\uC7A5\uCE58 \uC218\uC815 \uC624\uB958",caption:"\uC7A0\uC2DC\uD6C4\uC5D0 \uB2E4\uC2DC \uC2DC\uB3C4\uD574 \uC8FC\uC138\uC694."})}finally{C(),d.loading.hide()}})},k=l=>{d.dialog({component:Se,componentProps:{device:l}}).onOk(async f=>{try{d.loading.show(),await S.put("/devices/qsys/updatenames",{deviceId:l.deviceId,arr:f})}catch{p({message:"\uBC29\uC1A1\uAD6C\uAC04 \uC218\uC815 \uC624\uB958",caption:"\uC7A0\uC2DC\uD6C4\uC5D0 \uB2E4\uC2DC \uC2DC\uB3C4\uD574 \uC8FC\uC138\uC694."})}finally{C(),d.loading.hide()}})},O=l=>{d.dialog({component:ce,componentProps:{icon:"delete",iconColor:"red-10",title:"\uC5C5\uBB34\uBC29\uC1A1 \uC8FC\uC7A5\uCE58 \uC0AD\uC81C",message:`${l.name} ${l.ipaddress}`}}).onOk(async()=>{try{d.loading.show(),await S.delete("/devices/qsys",{data:{...l}}),d.loading.hide()}catch{p({message:"\uC5C5\uBB34\uBC29\uC1A1 \uC8FC\uC7A5\uCE58 \uC0AD\uC81C \uC624\uB958",caption:"\uC7A0\uC2DC\uD6C4\uC5D0 \uB2E4\uC2DC \uC2DC\uB3C4\uD574 \uC8FC\uC138\uC694."})}finally{await C(),d.loading.hide()}})};return R(async()=>{try{d.loading.show(),await C()}catch{}finally{d.loading.hide()}}),(l,f)=>(D(),N(oe,{class:"page"},{default:a(()=>[t("div",De,[t("div",qe,[t("div",Pe,[e(w,{name:"img:qsys.svg",color:"primary",size:"sm"}),Ve,t("div",null,[e(w,{class:"cursor-pointer",name:"add_circle",size:"sm",color:"primary",onClick:Q},{default:a(()=>[e(I,null,{default:a(()=>[n("\uC7A5\uCE58 \uCD94\uAC00")]),_:1})]),_:1})])]),e(U,{modelValue:b.value,"onUpdate:modelValue":f[0]||(f[0]=i=>b.value=i),borderless:"",dense:"",debounce:"300",placeholder:"Search",clearable:""},{append:a(()=>[e(w,{class:"cursor-pointer",name:"search"})]),_:1},8,["modelValue"])]),e(le,{columns:y(se),rows:y(te),filter:b.value},{"body-cell-name":a(i=>[e(Y,{props:i},{default:a(()=>[t("div",null,[e(ne,{rounded:"",color:i.row.connected?"primary":"red-10"},null,8,["color"]),n(" "+c(i.value),1)])]),_:2},1032,["props"])]),"body-cell-ipaddress":a(i=>[e(Y,{props:i},{default:a(()=>[t("a",{href:`http://${i.value}`,target:"_blank"},c(i.value),9,Ze)]),_:2},1032,["props"])]),"body-cell-actions":a(i=>[e(Y,{props:i},{default:a(()=>[t("div",null,[e(x,{round:"",flat:"",color:"primary",icon:"info",size:"sm",onClick:$=>q(i.row)},{default:a(()=>[e(I,null,{default:a(()=>[n("\uC0C1\uC138\uC815\uBCF4")]),_:1})]),_:2},1032,["onClick"]),e(x,{round:"",flat:"",color:"primary",icon:"edit",size:"sm",onClick:$=>P(i.row)},{default:a(()=>[e(I,null,{default:a(()=>[n("\uC218\uC815")]),_:1})]),_:2},1032,["onClick"]),e(x,{round:"",flat:"",color:"blue",icon:"edit_note",size:"sm",onClick:$=>k(i.row)},{default:a(()=>[e(I,null,{default:a(()=>[n("\uBC29\uC1A1\uAD6C\uAC04\uC218\uC815")]),_:1})]),_:2},1032,["onClick"]),e(x,{round:"",flat:"",color:"red-10",icon:"delete",size:"sm",onClick:$=>O(i.row)},{default:a(()=>[e(I,null,{default:a(()=>[n("\uC0AD\uC81C")]),_:1})]),_:2},1032,["onClick"])])]),_:2},1032,["props"])]),_:1},8,["columns","rows","filter"])])]),_:1}))}};export{je as default};
