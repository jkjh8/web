import{a as n,Q as y}from"./QTable.4f00f2bc.js";import{Q as _}from"./QTr.69530743.js";import{r as d,A as h,aU as L,o as k,C as z,D as A,E as o,j as r,aX as C,I as i,G as N,H as u,b6 as Q,K as g,f as S}from"./index.9aefe88b.js";const b=d([]),p=d(0),a=d({sortBy:"createdAt",descending:!0,page:1,rowsPerPage:10,rowsNumber:0}),m=d([]),T=()=>{a.value.sortBy="createdAt",a.value.descending=!0,a.value.page=1,a.value.rowsPerPage=10,a.value.rowsNumber=0},x=()=>{const s=h();return{logOptions:m,fnGetLogs:async t=>{var c;try{s.loading.show();const l=await L.get(`/logs?options=${JSON.stringify({pagination:t.pagination,filter:t.filter,level:p.value,options:(c=m.value)!=null?c:m.value})}`);b.value=l.data.current,a.value=l.data.pagination,s.loading.hide()}catch(l){s.loading.hide(),console.error(l)}},fnSetColorLog:t=>{switch(t){case"error":return"bg-red text-white";case"warn":return"bg-yellow-1";case"debug":return"bg-blue-1";case"info":return""}}}},B={style:{"font-size":"0.8rem"}},M={__name:"logTable",props:["mode","filter","level"],setup(s){const v=[{name:"createdAt",label:"Time",align:"center",field:"createdAt",sortable:!0},{name:"level",label:"Level",align:"center",field:"level",sortable:!0},{name:"source",label:"Source",align:"center",field:"source",sortable:!0},{name:"zones",label:"Zones",align:"center",field:"zones",sortable:!0},{name:"message",label:"Message",align:"left",field:"message",sortable:!0}],f=s,{fnGetLogs:t,fnSetColorLog:c}=x();return k(async()=>{T(),p.value=f.level,await t({pagination:a.value,filter:f.filter,level:p.value})}),(l,w)=>(z(),A(y,{flat:"",columns:v,rows:i(b),filter:s.filter,"row-key":"_id","wrap-cells":"",pagination:i(a),"onUpdate:pagination":w[0]||(w[0]=e=>S(a)?a.value=e:null),onRequest:i(t)},{body:o(e=>[r(_,{props:e,class:C(i(c)(e.row.level))},{default:o(()=>[r(n,{key:"createdAt",props:e},{default:o(()=>[N("div",B,u(i(Q).formatDate(e.row.createdAt,"YYYY-MM-DD hh:mm:ss a")),1)]),_:2},1032,["props"]),r(n,{key:"level",props:e},{default:o(()=>[g(u(e.row.level.toUpperCase()),1)]),_:2},1032,["props"]),r(n,{key:"source",props:e},{default:o(()=>[g(u(e.row.source),1)]),_:2},1032,["props"]),r(n,{key:"zones",props:e},{default:o(()=>[g(u(e.row.zones&&e.row.zones.length?e.row.zones.join(","):""),1)]),_:2},1032,["props"]),r(n,{class:"message",key:"message",props:e},{default:o(()=>[g(u(e.row.message),1)]),_:2},1032,["props"])]),_:2},1032,["props","class"])]),_:1},8,["rows","filter","pagination","onRequest"]))}};export{M as _,a as p,x as u};
