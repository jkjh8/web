import{ax as g,bT as w,i as Q,l as P,x as m,y as p,z as n,k as t,L as R,M as b,A as c,N as z,B as $,b_ as B,J as s,aT as o,G as v,az as S,H as x,O as _,o as A}from"./index.0736cdf9.js";function C(d=16){const V="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz1234567890";let r="";for(let f=0;f<d;f++)r+=V[parseInt(Math.random()*V.length)];return r}const M={class:"dialog-name row no-wrap items-center q-gutter-x-sm"},N={class:"q-px-sm q-gutter-y-xs"},j={__name:"addDevice",props:["title","type"],emits:[...g.emits],setup(d,{emit:V}){const{ruleRequired:r,ruleIPv4:f}=w(),I=Q("api"),i=d,{dialogRef:k,onDialogCancel:D,onDialogOK:q}=g(),a=P({name:"",deviceId:C(12),ipaddress:"",port:3030,amx:"",channels:0}),y=async u=>{try{return(await I.get(`/devices/${i.type}/exists`,{params:{value:u}})).data.result?"\uC774\uBBF8 \uC0AC\uC6A9\uC911 \uC785\uB2C8\uB2E4.":!0}catch{return"\uC11C\uBC84 \uC624\uB958, \uC7A0\uC2DC\uD6C4 \uB2E4\uC2DC \uC2DC\uB3C4\uD574\uC8FC\uC138\uC694."}};return(u,e)=>(m(),p(_,{ref_key:"dialogRef",ref:k},{default:n(()=>[t(R,{class:"q-dialog-plugin bg-trans",style:{"border-radius":"8px"}},{default:n(()=>[t(b,null,{default:n(()=>[c("div",M,[t(z,{name:"add_circle",color:"primary",size:"sm"}),c("div",null,$(d.title),1)])]),_:1}),t(B,{onSubmit:e[7]||(e[7]=l=>s(q)(a))},{default:n(()=>[t(b,null,{default:n(()=>[c("div",N,[t(o,{modelValue:a.name,"onUpdate:modelValue":e[0]||(e[0]=l=>a.name=l),filled:"",dense:"",label:"\uC774\uB984",rules:[s(r)],"lazy-rules":""},null,8,["modelValue","rules"]),t(o,{modelValue:a.deviceId,"onUpdate:modelValue":e[2]||(e[2]=l=>a.deviceId=l),filled:"",dense:"",label:"Device ID",rules:[s(r),l=>y({deviceId:l})],"lazy-rules":""},{append:n(()=>[t(z,{class:"cursor-pointer",name:"refresh",color:"primary",onClick:e[1]||(e[1]=l=>a.deviceId=s(C)(12))})]),_:1},8,["modelValue","rules"]),t(o,{modelValue:a.ipaddress,"onUpdate:modelValue":e[3]||(e[3]=l=>a.ipaddress=l),filled:"",dense:"",label:"IP Address",rules:[s(r),s(f),l=>y({ipaddress:l})],"lazy-rules":""},null,8,["modelValue","rules"]),d.type==="barix"?(m(),p(o,{key:0,modelValue:a.port,"onUpdate:modelValue":e[4]||(e[4]=l=>a.port=l),filled:"",dense:"",label:"Port",type:"number",rules:[s(r)],"lazy-rules":""},null,8,["modelValue","rules"])):v("",!0),d.type==="qsys"?(m(),p(o,{key:1,modelValue:a.amx,"onUpdate:modelValue":e[5]||(e[5]=l=>a.amx=l),filled:"",dense:"",label:"\uD1B5\uD569\uC81C\uC5B4 \uC8FC\uC7A5\uCE58",rules:[l=>y({ipaddress:l})],"lazy-rules":""},null,8,["modelValue","rules"])):v("",!0),d.type==="qsys"?(m(),p(o,{key:2,modelValue:a.channels,"onUpdate:modelValue":e[6]||(e[6]=l=>a.channels=l),filled:"",dense:"",type:"number",label:"\uBC29\uC1A1\uCC44\uB110"},null,8,["modelValue"])):v("",!0)])]),_:1}),t(S,{align:"right"},{default:n(()=>[t(x,{round:"",flat:"",color:"red-10",icon:"cancel",onClick:s(D)},null,8,["onClick"]),t(x,{round:"",flat:"","no-caps":"",color:"primary",icon:"check_circle",type:"submit"})]),_:1})]),_:1})]),_:1})]),_:1},512))}},O={class:"dialog-name row no-wrap items-center q-gutter-x-sm"},E=c("div",{class:"text-caption"},"DeviceID\uB294 \uC218\uC815\uC774 \uC548\uB429\uB2C8\uB2E4.",-1),K={class:"q-px-sm q-gutter-y-xs"},F={__name:"editDevice",props:["title","type","device"],emits:[...g.emits],setup(d,{emit:V}){const{ruleRequired:r,ruleIPv4:f}=w(),I=Q("api"),i=d,{dialogRef:k,onDialogCancel:D,onDialogOK:q}=g(),a=P({_id:"",deviceId:"",name:"",deviceId:C(12),ipaddress:"",port:0,amx:"",channels:0}),y=async u=>{try{const e=await I.get(`/devices/${i.type}/exists`,{params:{value:u}});return e.data&&e.data.result&&e.data.result._id!==i.device._id?"\uC774\uBBF8 \uC0AC\uC6A9\uC911 \uC785\uB2C8\uB2E4.":!0}catch{return"\uC11C\uBC84 \uC624\uB958, \uC7A0\uC2DC\uD6C4 \uB2E4\uC2DC \uC2DC\uB3C4\uD574\uC8FC\uC138\uC694."}};return A(()=>{var u,e,l,U;a._id=(u=i.device)==null?void 0:u._id,a.deviceId=i.device.deviceId,a.name=i.device.name,a.ipaddress=i.device.ipaddress,a.amx=(e=i.device)==null?void 0:e.amx,a.port=(l=i.device)==null?void 0:l.port,a.channels=(U=i.device.ZoneStatus)==null?void 0:U.length}),(u,e)=>(m(),p(_,{ref_key:"dialogRef",ref:k},{default:n(()=>[t(R,{class:"q-dialog-plugin bg-trans",style:{"border-radius":"8px"}},{default:n(()=>[t(b,null,{default:n(()=>[c("div",O,[t(z,{name:"edit",color:"primary",size:"sm"}),c("div",null,[c("div",null,$(d.title),1),E])])]),_:1}),t(B,{onSubmit:e[6]||(e[6]=l=>s(q)(a))},{default:n(()=>[t(b,null,{default:n(()=>[c("div",K,[t(o,{modelValue:a.name,"onUpdate:modelValue":e[0]||(e[0]=l=>a.name=l),filled:"",dense:"",label:"\uC774\uB984",rules:[s(r)],"lazy-rules":""},null,8,["modelValue","rules"]),t(o,{modelValue:a.deviceId,"onUpdate:modelValue":e[1]||(e[1]=l=>a.deviceId=l),disable:"",filled:"",dense:"",label:"Device ID",rules:[s(r),l=>y({deviceId:l})],"lazy-rules":""},null,8,["modelValue","rules"]),t(o,{modelValue:a.ipaddress,"onUpdate:modelValue":e[2]||(e[2]=l=>a.ipaddress=l),filled:"",dense:"",label:"IP Address",rules:[s(r),s(f),l=>y({ipaddress:l})],"lazy-rules":""},null,8,["modelValue","rules"]),d.type==="barix"?(m(),p(o,{key:0,modelValue:a.port,"onUpdate:modelValue":e[3]||(e[3]=l=>a.port=l),filled:"",dense:"",label:"Port",type:"number",rules:[s(r)],"lazy-rules":""},null,8,["modelValue","rules"])):v("",!0),d.type==="qsys"?(m(),p(o,{key:1,modelValue:a.amx,"onUpdate:modelValue":e[4]||(e[4]=l=>a.amx=l),filled:"",dense:"",label:"\uD1B5\uD569\uC81C\uC5B4 \uC8FC\uC7A5\uCE58",rules:[l=>y({ipaddress:l})],"lazy-rules":""},null,8,["modelValue","rules"])):v("",!0),d.type==="qsys"?(m(),p(o,{key:2,modelValue:a.channels,"onUpdate:modelValue":e[5]||(e[5]=l=>a.channels=l),filled:"",dense:"",type:"number",label:"\uBC29\uC1A1\uCC44\uB110"},null,8,["modelValue"])):v("",!0)])]),_:1}),t(S,{align:"right"},{default:n(()=>[t(x,{round:"",flat:"",color:"red-10",icon:"cancel",onClick:s(D)},null,8,["onClick"]),t(x,{round:"",flat:"","no-caps":"",color:"primary",icon:"check_circle",type:"submit"})]),_:1})]),_:1})]),_:1})]),_:1},512))}};export{j as _,F as a};
