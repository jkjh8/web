import{P,t as n,v as z,x as t,y as s,j as e,Q as y,G as w,bj as ke,z as l,J as h,D as S,bs as U,r as I,ay as de,aO as A,B as f,F as Q,c as $e,b as ce,aJ as ue,L as E,N as C,aM as B,aD as T,E as V,M as F,bc as O,bt as qe,aN as me,o as K,aH as se,bu as Y,bv as ze,bw as L,bx as pe,R as _e,S as fe,h as j,a2 as Ce,by as Se,bz as Ve,bA as oe,bB as ve}from"./index.854d2d6b.js";import{Q as ge,f as Ie,a as ye,b as R,c as ae}from"./useFiles.6615e96c.js";import{Q as Qe}from"./QPage.013074bc.js";import{u as Z}from"./use-quasar.fba98d94.js";import{Q as Me}from"./QSpace.18098418.js";import{Q as he}from"./QTooltip.0dd2bcea.js";import{Q as W}from"./QBadge.6ff3a17c.js";import{_ as Pe}from"./dialogConfirm.77211406.js";import{Q as G,b as le,c as ne}from"./QSelect.bb125c9c.js";import{a as we,b as H,Q as J}from"./QTable.7ea2ade9.js";import{Q as Ze}from"./QExpansionItem.a832ed44.js";import{u as D}from"./use-dialog-plugin-component.b10ae4ca.js";import{Q as re}from"./QTr.6b406152.js";import{f as je}from"./format.cbf00d5d.js";import{u as X}from"./usePlayer.c25c7e39.js";import{_ as xe}from"./plugin-vue_export-helper.21dcd24c.js";import"./QMenu.de6036a3.js";import"./QSlideTransition.b5d437e2.js";import"./dialogInput.1f1787af.js";import"./QLinearProgress.fd23f41f.js";const Ne=()=>{const r=Z();return{fnBroadcastCancel:a=>{r.dialog({component:Pe,componentProps:{title:"\uBC29\uC1A1 \uCDE8\uC18C",icon:"cancel",iconColor:"red-10",caption:`${a.name} \uC9C0\uC5ED \uBC29\uC1A1\uC744 \uCDE8\uC18C\uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?`}}).onOk(async()=>{try{r.loading.show(),await P.get("/devices/qsys/cancel",{params:{device:{name:a.name,deviceId:a.deviceId,ipaddress:a.ipaddress,pageId:a.pageId}}}),r.loading.hide()}catch(i){console.error(i)}})}}},Ue={class:"row fit tiems-center q-gutter-x-sm"},Be={class:"row items-center q-gutter-x-sm"},De={__name:"statusTree",setup(r){const{fnBroadcastCancel:u}=Ne(),a=i=>{let m=0;for(let o=0;o<i.length;o++)i[o].Active&&(m+=1);return m};return(i,m)=>(n(),z(ge,{nodes:l(U),"node-key":"_id","children-key":"ZoneStatus","no-node-label":"\uBC29\uC1A1\uAD6C\uAC04\uC774 \uC5C6\uC2B5\uB2C8\uB2E4"},{"header-root":t(o=>[s("div",Ue,[e(y,{color:o.node.connected?"primary":"red-10",name:"location_on",size:"xs"},null,8,["color"]),s("div",null,w(o.node.name),1),e(Me),s("div",null,w(a(o.node.ZoneStatus))+"\uAC1C \uC9C0\uC5ED \uBC29\uC1A1\uC911",1),a(o.node.ZoneStatus)?(n(),z(y,{key:0,class:"cursor-pointer",name:"cancel",color:"red-10",onClick:ke(p=>l(u)(o.node),["prevent","stop"])},{default:t(()=>[e(he,null,{default:t(()=>[h("\uBC29\uC1A1\uCDE8\uC18C")]),_:1})]),_:2},1032,["onClick"])):S("",!0)])]),"default-header":t(o=>[s("div",Be,[s("div",null,[h(w(o.node.name?o.node.name:"no name")+" ",1),o.node.Active?(n(),z(W,{key:0,color:"green"},{default:t(()=>[h(" ONAIR ")]),_:1})):S("",!0)])])]),_:1},8,["nodes"]))}};I("");const d=de({Mode:"message",Priority:3,MaxPageTime:5,Station:1,Preamble:"",file:null,devices:[]}),Te=[{value:"tts",label:"TTS"},{value:"live",label:"\uC2E4\uC2DC\uAC04 \uBC29\uC1A1"},{value:"message",label:"\uBA54\uC2DC\uC9C0 \uC1A1\uCD9C"}],ie=r=>{let u=[];for(let a of r){let i=A.value.findIndex(m=>m.deviceId===a.deviceId);if(i!==-1&&a.value&&a.value.length)if(a.value.length===A.value[i].ZoneStatus.length)u.push(`${A.value[i].name} - ALL`);else{let m=[];for(let o of a.value)o.name?m.push(o.name):m.push(o.Zone);u.push(`${A.value[i].name} - ${m.join(", ")}`)}}return u},ee=()=>{const r=Z();return{fnNoZones:()=>{r.notify({message:"\uC120\uD0DD\uB41C \uBC29\uC1A1\uAD6C\uAC04\uC774 \uC5C6\uC2B5\uB2C8\uB2E4.",caption:"\uC120\uD0DD\uB41C \uBC29\uC1A1\uAD6C\uAC04\uC774 \uC5C6\uC2B5\uB2C8\uB2E4. \uB2E4\uC2DC \uD55C\uBC88 \uD655\uC778\uD574 \uC8FC\uC138\uC694",color:"negative",icon:"warning",position:"top"})},fnNoFile:()=>{r.notify({message:"\uD30C\uC77C\uC744 \uC120\uD0DD\uD574 \uC8FC\uC138\uC694.",caption:"\uC120\uD0DD\uB41C \uD30C\uC77C\uC774 \uC5C6\uC2B5\uB2C8\uB2E4. \uB2E4\uC2DC \uD55C\uBC88 \uD655\uC778\uD574 \uC8FC\uC138\uC694",color:"negative",icon:"warning",position:"top"})}}},Fe={class:"row no-wrap justify-start items-center q-gutter-x-sm"},Ae=s("div",{class:"card-name"},"\uBC29\uC1A1\uBAA8\uB4DC",-1),Re={__name:"pageMode",setup(r){return(u,a)=>(n(),f(Q,null,[s("div",Fe,[e(y,{name:"list",color:"primary",size:"sm"}),Ae]),e(G,{modelValue:l(d).Mode,"onUpdate:modelValue":a[0]||(a[0]=i=>l(d).Mode=i),options:l(Te),filled:"","map-options":"","emit-value":""},null,8,["modelValue","options"])],64))}},Oe={class:"row no-wrap justify-start items-center q-gutter-x-sm"},Le=s("div",{class:"card-name"},"\uC6B0\uC120\uC21C\uC704",-1),Ee={__name:"pagePriority",setup(r){return(u,a)=>(n(),f(Q,null,[s("div",Oe,[e(y,{name:"priority_high",color:"primary",size:"sm"}),Le]),e(G,{modelValue:l(d).Priority,"onUpdate:modelValue":a[0]||(a[0]=i=>l(d).Priority=i),filled:"",options:[{value:1,label:"EM"},{value:3,label:"Nomal"}],"emit-value":"","map-options":""},null,8,["modelValue"])],64))}},Ke={class:"row no-wrap items-center q-gutter-x-md"},Ge=s("div",{class:"dialog-name"},"\uBC29\uC1A1\uAD6C\uAC04\uC120\uD0DD",-1),He={class:"dialog-caption"},Je={class:"q-pa-sm"},Ye={class:"q-px-sm"},We={__name:"selectBrocastZones",props:["sel"],emits:[...D.emits],setup(r,{emit:u}){const{dialogRef:a,onDialogCancel:i,onDialogHide:m,onDialogOK:o}=D(),p=r,_=I({}),b=I([]),$=$e(()=>{let v=0;for(let g in _.value)v+=_.value[g].length;return v}),c=(v,g,q)=>{v?_.value[g.deviceId]=[...g.ZoneStatus]:_.value[g.deviceId]=[]},x=(v,g,q)=>{v&&v.length?v.length===g.ZoneStatus.length?b.value[q]=!0:b.value[q]=null:b.value[q]=!1},N=()=>{let v=[];for(let g in _.value)_.value[g].length&&v.push({deviceId:g,value:_.value[g]});o(v)};return ce(async()=>{await ue();for(let v=0;v<U.value.length;v++){let g=U.value[v].deviceId,q=p.sel.findIndex(M=>M.deviceId===g);q!==-1?(_.value[g]=[...p.sel[q].value],_.value[g].length===U.value[v].ZoneStatus.length?b.value[v]=!0:b.value[v]=null):(_.value[g]=[],b.value[v]=!1)}}),(v,g)=>(n(),z(E,{ref_key:"dialogRef",ref:a,persistent:""},{default:t(()=>[e(F,{style:{"max-width":"900px",width:"80%","min-width":"500px","border-radius":"6px"}},{default:t(()=>[e(C,null,{default:t(()=>[s("div",Ke,[e(y,{name:"location_on",color:"primary",size:"1.5rem"}),s("div",null,[Ge,s("div",He,w($.value)+"\uAC1C \uBC29\uC1A1\uAD6C\uAC04 \uC120\uD0DD",1)])])]),_:1}),e(C,null,{default:t(()=>[(n(!0),f(Q,null,B(l(U),(q,M)=>(n(),f("div",{key:M,class:"q-px-md"},[e(Ze,{class:"q-pa-xs col-xs-6 col-sm-3 col-md-2 bg-grey-1"},{header:t(()=>[e(le,{avatar:""},{default:t(()=>[e(O,{modelValue:b.value[M],"onUpdate:modelValue":[k=>b.value[M]=k,k=>c(k,q,M)]},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(le,null,{default:t(()=>[e(ne,null,{default:t(()=>[h(w(q.name),1)]),_:2},1024),e(ne,{caption:""},{default:t(()=>[h(w(q.ipaddress),1)]),_:2},1024)]),_:2},1024)]),default:t(()=>[e(we,{rows:q.ZoneStatus,columns:[],"row-key":"Zone",selection:"multiple",selected:_.value[q.deviceId],"onUpdate:selected":[k=>_.value[q.deviceId]=k,k=>x(k,q,M)],grid:"",pagination:{rowsPerPage:0},"hide-header":"","hide-bottom":""},{item:t(k=>[s("div",{class:"q-pa-xs col-xs-6 col-sm-3 col-md-2 grid-style-transition",style:qe(k.selected?"transform: scale(0.95);":"")},[s("div",{class:me(["border",k.selected?v.$q.dark.isActive?"bg-grey-10":"bg-grey-3":""])},[s("div",Je,[e(O,{dense:"",modelValue:k.selected,"onUpdate:modelValue":be=>k.selected=be,label:k.row.name?`${k.row.Zone}. ${k.row.name}`:`${k.row.Zone}. No Name`},null,8,["modelValue","onUpdate:modelValue","label"])])],2)],4)]),_:2},1032,["rows","selected","onUpdate:selected"])]),_:2},1024)]))),128))]),_:1}),e(T,{align:"right"},{default:t(()=>[s("div",Ye,[e(V,{round:"",flat:"",color:"red-10",icon:"cancel",onClick:l(i)},null,8,["onClick"]),e(V,{round:"",flat:"","no-caps":"",color:"primary",icon:"check_circle",onClick:N})])]),_:1})]),_:1})]),_:1},512))}},Xe={class:"row no-wrap justify-between items-center"},et={class:"row no-wrap justify-start items-center q-gutter-x-sm"},tt=s("div",{class:"card-name"},"\uBC29\uC1A1\uAD6C\uAC04",-1),st={key:0,class:"bg-grey-2 q-py-md q-px-sm q-mt-sm q-gutter-x-sm",style:{"border-radius":"2px","min-height":"56px"}},ot={key:1,class:"bg-grey-2 q-py-md q-px-sm q-mt-sm",style:{"border-radius":"2px",height:"56px"}},at={__name:"pageZones",props:["zones"],emits:["updateZones"],setup(r,{emit:u}){const a=Z(),i=u,m=()=>{a.dialog({component:We,componentProps:{sel:d.devices}}).onOk(o=>{console.log(o),d.devices=o,i("updateZones",ie(d.devices))})};return d.devices&&d.devices.length&&i("updateZones",ie(d.devices)),(o,p)=>(n(),f(Q,null,[s("div",Xe,[s("div",et,[e(y,{name:"location_on",color:"primary",size:"sm"}),tt]),e(y,{class:"cursor-pointer",name:"add_circle",color:"primary",size:"sm",onClick:m})]),r.zones&&r.zones.length?(n(),f("div",st,[(n(!0),f(Q,null,B(r.zones,(_,b)=>(n(),z(W,{key:b},{default:t(()=>[h(w(_),1)]),_:2},1024))),128))])):(n(),f("div",ot," \uC120\uD0DD\uB41C \uBC29\uC1A1\uAD6C\uAC04\uC774 \uC5C6\uC2B5\uB2C8\uB2E4. "))],64))}},lt={class:"row no-wrap justify-start items-center q-gutter-x-sm"},nt=s("div",{class:"card-name"},"\uBC29\uC1A1\uC2DC\uAC04(\uCD08)",-1),rt=s("div",{class:"text-caption text-red",style:{"text-align":"right"}}," \uCD5C\uB300 \uBC29\uC1A1 \uC2DC\uAC04\uC740 4\uBD84(240\uCD08)\uC73C\uB85C \uC81C\uD55C \uB429\uB2C8\uB2E4. ",-1),it={__name:"pageLive",setup(r){return(u,a)=>(n(),f(Q,null,[s("div",lt,[e(y,{name:"timer",color:"primary",size:"sm"}),nt]),e(G,{modelValue:l(d).MaxPageTime,"onUpdate:modelValue":a[0]||(a[0]=i=>l(d).MaxPageTime=i),filled:"",options:[30,60,90,120,150,180,210,240]},null,8,["modelValue"]),rt],64))}},dt={class:"row no-wrap items-center q-gutter-x-md"},ct=s("div",null,[s("div",{class:"dialog-name"},"\uD30C\uC77C\uC120\uD0DD")],-1),ut={key:0},mt=["onClick"],pt={key:2},_t={__name:"selectFile",props:["file"],setup(r){const{dialogRef:u,onDialogCancel:a,onDialogOK:i}=D(),m=r,{fnPlayStart:o}=X(),p=I(25),_=I([]);return ce(async()=>{await Ie(),m.file&&(_.value[0]=m.file)}),(b,$)=>(n(),z(E,{ref_key:"dialogRef",ref:u,persistent:""},{default:t(()=>[e(F,{class:"q-dialog-plugin",style:{"border-radius":"8px",width:"90%","max-width":"800px"}},{default:t(()=>[e(C,null,{default:t(()=>[s("div",dt,[e(y,{name:"save",color:"primary",size:"1.5rem"}),ct])]),_:1}),e(C,null,{default:t(()=>[e(ye,{modelValue:p.value,"onUpdate:modelValue":$[2]||($[2]=c=>p.value=c)},{before:t(()=>[e(ge,{nodes:l(R).folders,selected:l(R).selectedFolder,"onUpdate:selected":[$[0]||($[0]=c=>l(R).selectedFolder=c),l(ae)],"node-key":"path","no-selection-unset":"","selected-color":"primary"},null,8,["nodes","selected","onUpdate:selected"])]),after:t(()=>[e(we,{columns:[{name:"name",label:"NAME",field:"name",align:"left",sortable:!0},{name:"size",label:"SIZE",field:"size",sortable:!0}],rows:l(R).files,flat:"",dense:"","row-key":"name",selection:"single",selected:_.value,"onUpdate:selected":$[1]||($[1]=c=>_.value=c),pagination:{rowsPerPage:0},"hide-bottom":""},{header:t(c=>[e(re,{props:c},{default:t(()=>[e(H,{style:{width:"2rem"}},{default:t(()=>[e(O,{size:"22px",modelValue:c.selected,"onUpdate:modelValue":x=>c.selected=x},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(H,{key:"name",props:c},{default:t(()=>[h(" NAME ")]),_:2},1032,["props"]),e(H,{key:"size",props:c,style:{width:"2.5rem"}},{default:t(()=>[h(" SIZE ")]),_:2},1032,["props"])]),_:2},1032,["props"])]),body:t(c=>[e(re,{props:c},{default:t(()=>[e(J,{style:{width:"2rem"}},{default:t(()=>[c.row.type!=="folder"?(n(),z(O,{key:0,size:"22px",modelValue:c.selected,"onUpdate:modelValue":x=>c.selected=x},null,8,["modelValue","onUpdate:modelValue"])):S("",!0)]),_:2},1024),e(J,{key:"name",props:c},{default:t(()=>[c.row.type==="folder"?(n(),f("span",ut,[e(y,{name:"folder_open",color:"primary",size:"16px"})])):S("",!0),c.row.type==="folder"?(n(),f("span",{key:1,class:"q-ml-xs cursor-pointer",onClick:x=>l(ae)(c.row.fullpath)},w(c.row.name),9,mt)):(n(),f("span",pt,[h(w(c.row.name)+" ",1),e(V,{flat:"",round:"",size:"xs",color:"primary",icon:"play_arrow",onClick:x=>l(o)(c.row)},null,8,["onClick"])]))]),_:2},1032,["props"]),e(J,{key:"size",props:c,style:{width:"2.5rem"}},{default:t(()=>[h(w(c.row.type!=="folder"?l(je).humanStorageSize(c.row.size):""),1)]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","selected"])]),_:1},8,["modelValue"])]),_:1}),e(T,{align:"right"},{default:t(()=>[e(V,{round:"",flat:"",color:"red-10",icon:"cancel",onClick:l(a)},null,8,["onClick"]),e(V,{round:"",flat:"","no-caps":"",color:"primary",icon:"check_circle",onClick:$[3]||($[3]=c=>l(i)(_.value))})]),_:1})]),_:1})]),_:1},512))}},ft={class:"row no-wrap justify-between items-center"},vt={class:"row no-wrap justify-start items-center q-gutter-x-sm"},gt=s("div",{class:"card-name"},"\uD30C\uC77C",-1),yt={key:0,class:"bg-grey-2 q-py-md q-px-sm q-mt-sm q-gutter-x-sm row no-wrap justify-between items-center",style:{"border-radius":"2px","min-height":"56px"}},ht={key:1,class:"bg-grey-2 q-py-md q-px-sm q-mt-sm",style:{"border-radius":"2px",height:"56px"}},wt={__name:"pageFile",setup(r){const u=Z(),{fnPlayStart:a}=X(),i=()=>{u.dialog({component:_t,componentProps:{file:d.file}}).onOk(m=>{d.file=m[0]})};return(m,o)=>(n(),f(Q,null,[s("div",ft,[s("div",vt,[e(y,{name:"save",color:"primary",size:"sm"}),gt]),e(y,{class:"cursor-pointer",name:"add_circle",color:"primary",size:"sm",onClick:i})]),l(d).file?(n(),f("div",yt,[s("div",null,[e(y,{class:"cursor-pointer",name:"play_arrow",color:"primary",size:"xs",onClick:o[0]||(o[0]=p=>l(a)(l(d).file))}),h(" "+w(l(d).file.base),1)]),e(y,{class:"cursor-pointer q-mr-sm",name:"cancel",color:"red-10",size:"sm",onClick:o[1]||(o[1]=p=>l(d).file=null)})])):(n(),f("div",ht," \uC120\uD0DD\uB41C \uD30C\uC77C\uC774 \uC5C6\uC2B5\uB2C8\uB2E4. "))],64))}},xt={class:"col q-gutter-y-sm"},bt={class:"row no-wrap justify-between items-center"},kt={class:"row no-wrap justify-between items-center q-gutter-x-sm"},$t=s("div",{class:"card-name"},"\uBA54\uC2DC\uC9C0",-1),qt={class:"row justify-between items-center"},zt={key:0},Ct={key:1,class:"text-red-10 row items-center"},St={__name:"pageTts",setup(r){Z();const{fnPlayStart:u}=X(),a=de({voices:[],voice:"",rate:200,text:""}),i=async()=>{const m=await P.get("/broadcast/tts");a.voices=m.data.value.voices,a.rate=m.data.value.rate};return K(async()=>{d.file=null,await i()}),(m,o)=>(n(),f("div",xt,[s("div",bt,[s("div",kt,[e(y,{name:"volume_up",color:"primary",size:"sm"}),$t])]),e(G,{options:a.voices,modelValue:a.voice,"onUpdate:modelValue":o[0]||(o[0]=p=>a.voice=p),"option-value":"id","option-label":"name",filled:"",dense:"",label:"\uC74C\uC131"},null,8,["options","modelValue"]),e(se,{modelValue:a.rate,"onUpdate:modelValue":o[1]||(o[1]=p=>a.rate=p),type:"number",filled:"",dense:"",label:"\uC74C\uC131\uC18D\uB3C4"},null,8,["modelValue"]),e(se,{modelValue:a.text,"onUpdate:modelValue":o[2]||(o[2]=p=>a.text=p),filled:"",type:"textarea",placeholder:"\uBA54\uC2DC\uC9C0\uB97C \uC785\uB825\uD558\uC138\uC694.",label:"\uBA54\uC2DC\uC9C0"},null,8,["modelValue"]),s("div",qt,[l(d).file?(n(),f("div",zt,[s("div",null,[e(y,{class:"cursor-pointer",name:"play_arrow",color:"primary",size:"xs",onClick:o[3]||(o[3]=p=>l(u)(l(d).file))}),h(" "+w(l(d).file.base),1)]),e(y,{class:"cursor-pointer q-mr-sm",name:"cancel",color:"red-10",size:"sm",onClick:o[4]||(o[4]=p=>l(d).file=null)})])):(n(),f("div",Ct,[e(y,{name:"warning"}),h(" \uD569\uC131\uB41C \uD30C\uC77C\uC774 \uC5C6\uC2B5\uB2C8\uB2E4. ")])),e(V,{rounded:"",unelevated:"",color:"primary"},{default:t(()=>[h("\uC74C\uC131 \uD569\uC131")]),_:1})])]))}};const te=r=>(_e("data-v-f9db305a"),r=r(),fe(),r),Vt={class:"q-dialog-plugin broadcast-popup"},It={key:0},Qt={class:"row justify-center q-pt-md text-grey"},Mt={class:"fit column q-gutter-y-sm",style:{width:"50%"}},Pt={style:{"text-align":"right"}},Zt=te(()=>s("div",{class:"name"},"\uBC29\uC1A1\uBAA8\uB4DC",-1)),jt={style:{"text-align":"right"}},Nt=te(()=>s("div",{class:"name"},"\uBC29\uC1A1\uAD6C\uAC04",-1)),Ut={class:"fit row justify-end"},Bt={key:0,style:{"text-align":"right"}},Dt=te(()=>s("div",{class:"name"},"\uD30C\uC77C",-1)),Tt={class:"fit row no-wrap justify-center items-center q-mb-md q-gutter-x-sm"},Ft={__name:"pageLive",props:["zones"],setup(r){const{dialogRef:u,onDialogCancel:a,onDialogOK:i}=D(),{pageIdx:m,live:o}=ee(),p=r,_=I(!1),b=I(0),$=async()=>{_.value=!0;try{Y();const x=await P.put("/broadcast/live",{...o,devices:await pe(o.devices),zones:p.zones});m.value=x.data.idx,console.log("page index = ",m.value)}catch(x){console.error(x)}setInterval(()=>{b.value++},1e3)},c=async()=>{try{const x=await P.get("/broadcast/stop",{params:{idx:m.value}});console.log(x)}catch(x){console.error(x)}_.value=!1,b.value=0};return K(()=>{Y()}),(x,N)=>(n(),z(E,{ref_key:"dialogRef",ref:u,persistent:""},{default:t(()=>[s("div",Vt,[e(y,{class:"floatingIcon cursor-pointer",name:"cancel",color:"red",size:"sm",onClick:l(a)},{default:t(()=>[e(he,null,{default:t(()=>[h("Close")]),_:1})]),_:1},8,["onClick"]),e(F,{class:"transBG"},{default:t(()=>[e(C,null,{default:t(()=>[s("div",{class:me(["q-pa-md row no-wrap text-grey-2",_.value?"justify-between":"justify-end"]),style:{height:"90%","min-height":"300px","font-family":"'NotoSansKR'"}},[_.value?(n(),f("div",It,[e(ze,{color:"primary",size:"14rem",thickness:8}),s("div",Qt,"\uBC29\uC1A1\uC911 "+w(b.value)+"\uCD08 \uACBD\uACFC",1)])):S("",!0),s("div",Mt,[s("div",Pt,[Zt,s("div",null,w(l(o).mode),1)]),s("div",jt,[Nt,s("div",Ut,[(n(!0),f(Q,null,B(r.zones,(v,g)=>(n(),z(W,{key:g,class:"q-ml-xs"},{default:t(()=>[h(w(v),1)]),_:2},1024))),128))])]),l(o).file?(n(),f("div",Bt,[Dt,s("div",null,w(l(o).file.base),1)])):S("",!0),s("div",null,[(n(!0),f(Q,null,B(l(L),(v,g)=>(n(),f("div",{key:g,style:{"text-align":"right"}},w(l(L)[g]),1))),128))])])],2)]),_:1}),e(T,null,{default:t(()=>[s("div",Tt,[e(V,{style:{width:"10rem"},unelevated:"",color:"primary",onClick:$},{default:t(()=>[h("\uC2DC\uC791")]),_:1}),e(V,{style:{width:"10rem"},unelevated:"",color:"red-10",onClick:c},{default:t(()=>[h("\uC911\uC9C0")]),_:1})])]),_:1})]),_:1})])]),_:1},512))}};var At=xe(Ft,[["__scopeId","data-v-f9db305a"]]);const Rt=[j("circle",{cx:"50",cy:"50",r:"48",fill:"none","stroke-width":"4","stroke-miterlimit":"10",stroke:"currentColor"}),j("line",{"stroke-linecap":"round","stroke-width":"4","stroke-miterlimit":"10",stroke:"currentColor",x1:"50",y1:"50",x2:"85",y2:"50.5"},[j("animateTransform",{attributeName:"transform",type:"rotate",from:"0 50 50",to:"360 50 50",dur:"2s",repeatCount:"indefinite"})]),j("line",{"stroke-linecap":"round","stroke-width":"4","stroke-miterlimit":"10",stroke:"currentColor",x1:"50",y1:"50",x2:"49.5",y2:"74"},[j("animateTransform",{attributeName:"transform",type:"rotate",from:"0 50 50",to:"360 50 50",dur:"15s",repeatCount:"indefinite"})])];var Ot=Ce({name:"QSpinnerClock",props:Se,setup(r){const{cSize:u,classes:a}=Ve(r);return()=>j("svg",{class:a.value,width:u.value,height:u.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg"},Rt)}});const Lt=r=>(_e("data-v-4e67f7eb"),r=r(),fe(),r),Et={class:"q-dialog-plugin broadcast-popup"},Kt={class:"row no-wrap justify-start items-center q-gutter-x-sm"},Gt=Lt(()=>s("div",{class:"name text-grey-2"},"\uBA54\uC2DC\uC9C0 \uBC29\uC1A1",-1)),Ht={key:0,class:"text-grey-5 row no-wrap items-center q-gutter-x-sm q-px-md"},Jt={style:{"font-size":"2rem"}},Yt={class:"text-white description q-pa-md"},Wt={class:"fit row no-wrap justify-center q-gutter-x-sm"},Xt={__name:"pageMessage",setup(r){const u=new AbortController,{dialogRef:a,onDialogCancel:i,onDialogOK:m}=D(),o=I(3),p=I(!1);let _=null;const b=()=>{_&&clearInterval(_),u.abort(),i()};return K(async()=>{try{Y(),oe({deviceId:"all",message:`\uD30C\uC77C \uC774\uB984: ${d.file.base}`}),console.log(await P.post("/broadcast/file",{addr:"live",devices:ve(d)},{signal:u.signal}))}catch($){console.error($)}p.value=!0,oe({deviceId:"all",message:"\uBC29\uC1A1\uC744 \uC2DC\uC791\uD569\uB2C8\uB2E4."}),_=setInterval(()=>{o.value>0?o.value-=1:(clearInterval(_),m(d))},1e3)}),($,c)=>(n(),z(E,{ref_key:"dialogRef",ref:a,persistent:""},{default:t(()=>[s("div",Et,[e(F,{class:"transBG"},{default:t(()=>[e(C,null,{default:t(()=>[s("div",Kt,[e(y,{name:"mic",color:"primary",size:"sm"}),Gt])]),_:1}),e(C,{style:{"min-height":"200px"}},{default:t(()=>[p.value?(n(),f("div",Ht,[e(Ot,{size:"md"}),s("span",Jt,w(o.value),1)])):S("",!0),s("div",Yt,[(n(!0),f(Q,null,B(l(L),(x,N)=>(n(),f("div",{key:N},w(l(L)[N]),1))),128))])]),_:1}),e(T,null,{default:t(()=>[s("div",Wt,[p.value?(n(),z(V,{key:0,style:{width:"8rem"},color:"primary",onClick:c[0]||(c[0]=x=>l(m)(l(d)))},{default:t(()=>[h("\uC2DC\uC791")]),_:1})):S("",!0),e(V,{style:{width:"8rem"},color:"red-10",onClick:b},{default:t(()=>[h("\uCDE8\uC18C")]),_:1})])]),_:1})]),_:1})])]),_:1},512))}};var es=xe(Xt,[["__scopeId","data-v-4e67f7eb"]]);const ts={class:"full-width q-px-sm q-mb-md"},ss={__name:"pageStart",props:["zones"],setup(r){const u=r,{fnNoZones:a,fnNoFile:i}=ee(),m=Z(),o=()=>{if(d.devices===null||d.devices.length===0)return a();if(d.Mode!=="live"&&(d.file===null||Object.keys(d.file).length===0))return i();switch(d.Mode){case"live":m.dialog({component:At,componentProps:{zones:u.zones}});break;case"message":case"tts":console.log("tts or message"),m.dialog({component:es}).onOk(async p=>{await P.put("/broadcast/live/message",{...p,devices:await pe(p.devices),zones:u.zones})}).onCancel(async()=>{await P.delete("/broadcast/file",{data:{addr:"live",devices:ve(d)}})});break}};return(p,_)=>(n(),f("div",ts,[e(V,{class:"full-width",color:"primary",label:"\uBC29\uC1A1\uC2DC\uC791",onClick:o})]))}},os={class:"borderd"},as={class:"q-px-lg row no-wrap justify-between items-center bg-grey-2"},ls={class:"row no-wrap items-center q-gutter-x-sm q-py-sm"},ns=s("div",{class:"font-main",style:{"font-size":"16px","font-weight":"bold"}},"\uC2E4\uC2DC\uAC04 \uBC29\uC1A1",-1),rs={class:"q-pa-xs"},is={class:"q-pa-sm row justify-center"},Vs={__name:"LivePage",setup(r){const u=Z();ee();const a=I(40),i=I([]);return K(async()=>{u.loading.show(),await ue(),u.loading.hide()}),(m,o)=>(n(),z(Qe,{class:"q-pa-md"},{default:t(()=>[s("div",os,[s("div",as,[s("div",ls,[e(y,{name:"mic",color:"primary",size:"24px"}),ns])]),s("div",null,[e(ye,{modelValue:a.value,"onUpdate:modelValue":o[1]||(o[1]=p=>a.value=p)},{before:t(()=>[s("div",rs,[e(De)])]),after:t(()=>[s("div",is,[e(F,{flat:"",style:{width:"450px"}},{default:t(()=>[e(C,null,{default:t(()=>[e(Re)]),_:1}),e(C,null,{default:t(()=>[e(Ee)]),_:1}),e(C,null,{default:t(()=>[e(at,{zones:i.value,onUpdateZones:o[0]||(o[0]=p=>i.value=p)},null,8,["zones"])]),_:1}),l(d).Mode==="live"?(n(),z(C,{key:0},{default:t(()=>[e(it)]),_:1})):S("",!0),l(d).Mode==="message"?(n(),z(C,{key:1},{default:t(()=>[e(wt)]),_:1})):S("",!0),l(d).Mode==="tts"?(n(),z(C,{key:2},{default:t(()=>[e(St)]),_:1})):S("",!0),e(T,null,{default:t(()=>[e(ss,{zones:i.value},null,8,["zones"])]),_:1})]),_:1})])]),_:1},8,["modelValue"])])])]),_:1}))}};export{Vs as default};
