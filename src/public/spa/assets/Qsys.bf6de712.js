import{ax as U,x as w,y as V,z as a,k as e,L as G,M as A,N as b,A as l,B as r,S as W,U as p,V as m,W as i,D as o,J as h,bB as R,ay as E,az as N,H as x,O as F,i as T,r as C,o as j,aS as H,b_ as J,E as B,F as X,a$ as ee,aT as L,aP as K,aQ as ae,aR as te,aU as Q,aZ as le,a_ as ne,u as oe,K as se,Z as $,c as ie,I as de,aW as re,bU as ce}from"./index.0736cdf9.js";import{Q as I}from"./QTooltip.ddc34b6b.js";import{Q as ue}from"./QBadge.896f6a10.js";import{Q as fe,a as Z}from"./QTable.77636e67.js";import{Q as me}from"./QPagination.002036cf.js";import{Q as pe}from"./QPage.1f33576b.js";import{_ as _e,a as ve}from"./editDevice.18a57dca.js";import{_ as ge}from"./plugin-vue_export-helper.21dcd24c.js";const ye=[{name:"name",label:"\uC774\uB984",align:"center",field:"name",sortable:!0},{name:"deviceId",label:"Device ID",align:"center",field:"deviceId",sortable:!0},{name:"ipaddress",label:"IP Address",align:"center",field:"ipaddress",sortable:!0},{name:"amx",label:"\uD1B5\uD569\uC81C\uC5B4 \uC8FC\uC7A5\uCE58",align:"center",field:"amx",sortable:!0},{name:"actions",label:"\uAE30\uB2A5",align:"center"}],he=l("div",{class:"dialog-name"},"Q-SYS INFO",-1),we={class:"caption"},be={class:"q-px-md"},xe=["href"],ke=["href"],$e={class:"q-pl-sm text-black"},Qe={__name:"infoQsys",props:["device"],emits:[...U.emits],setup(s,{emit:k}){const{dialogRef:d,onDialogOK:_,onDialogCancel:S}=U();return(v,z)=>(w(),V(F,{ref_key:"dialogRef",ref:d},{default:a(()=>[e(G,{class:"q-dialog-plugin bg-trans",style:{"border-radius":"8px"}},{default:a(()=>[e(A,{class:"row no-wrap q-gutter-sm items-center"},{default:a(()=>[e(b,{style:{"margin-top":"10px"},name:"img:qsys.svg",size:"1.5rem"}),l("div",null,[he,l("div",we,r(s.device.deviceId),1)])]),_:1}),e(A,null,{default:a(()=>[l("div",be,[e(W,{dense:""},{default:a(()=>[e(p,{dense:""},{default:a(()=>[e(m,null,{default:a(()=>[e(i,null,{default:a(()=>[o("\uC7A5\uCE58 \uC774\uB984")]),_:1}),e(i,{caption:""},{default:a(()=>[o(r(s.device.name),1)]),_:1})]),_:1})]),_:1}),e(p,{dense:""},{default:a(()=>[e(m,null,{default:a(()=>[e(i,null,{default:a(()=>[o("IP Address")]),_:1}),e(i,{caption:""},{default:a(()=>[l("a",{href:`http://${s.device.ipaddress}`,target:"_blank"},[o(r(s.device.ipaddress)+" ",1),e(b,{class:"cursor-pointer",name:"launch",color:"primary"})],8,xe)]),_:1})]),_:1})]),_:1}),e(p,{dense:""},{default:a(()=>[e(m,null,{default:a(()=>[e(i,null,{default:a(()=>[o("\uD1B5\uD569\uC81C\uC5B4 \uC8FC\uC7A5\uCE58")]),_:1}),s.device.amx?(w(),V(i,{key:1,caption:""},{default:a(()=>[l("a",{href:`http://${s.device.amx}`,target:"_blank"},[o(r(s.device.amx)+" ",1),e(b,{class:"cursor-pointer",name:"launch",color:"primary"})],8,ke)]),_:1})):(w(),V(i,{key:0,caption:""},{default:a(()=>[o("\uD1B5\uD569\uC81C\uC5B4 \uC8FC\uC7A5\uCE58 \uC5C6\uC74C")]),_:1}))]),_:1})]),_:1}),e(p,{dense:""},{default:a(()=>[e(m,null,{default:a(()=>[e(i,null,{default:a(()=>[o("\uC5F0\uACB0 \uC0C1\uD0DC")]),_:1}),e(i,{caption:""},{default:a(()=>[o(r(s.device.connected),1)]),_:1})]),_:1})]),_:1}),e(p,{dense:""},{default:a(()=>[e(m,null,{default:a(()=>[e(i,null,{default:a(()=>[o("\uCF54\uC5B4 \uD50C\uB7AB\uD3FC")]),_:1}),e(i,{caption:""},{default:a(()=>[o(r(s.device.EngineStatus.Platform),1)]),_:1})]),_:1})]),_:1}),e(p,{dense:""},{default:a(()=>[e(m,null,{default:a(()=>[e(i,null,{default:a(()=>[o("\uCF54\uC5B4 \uC0C1\uD0DC")]),_:1}),e(i,{caption:""},{default:a(()=>[o(r(s.device.EngineStatus.State),1)]),_:1})]),_:1})]),_:1}),e(p,{dense:""},{default:a(()=>[e(m,null,{default:a(()=>[e(i,null,{default:a(()=>[o("PA \uC2E4\uC2DC\uAC04 \uB370\uC774\uD130 \uC5F0\uB3D9")]),_:1}),e(i,{caption:""},{default:a(()=>[o(r(s.device.ZoneStatusConfigure),1)]),_:1})]),_:1})]),_:1}),e(p,{dense:""},{default:a(()=>[e(m,null,{default:a(()=>[e(i,null,{default:a(()=>[o("\uC800\uC7A5\uC18C \uC815\uBCF4(\uB0A8\uC740\uB7C9/\uC804\uCCB4)")]),_:1}),e(i,{caption:""},{default:a(()=>[o(r(h(R).humanStorageSize(s.device.storage.free))+" / "+r(h(R).humanStorageSize(s.device.storage.total))+" ",1),l("span",$e,r(Math.round(s.device.storage.free/s.device.storage.total*100))+"% \uC5EC\uC720 ",1)]),_:1})]),_:1})]),_:1}),e(p,{dense:""},{default:a(()=>[e(m,null,{default:a(()=>[e(i,null,{default:a(()=>[o("\uB9C8\uC9C0\uB9C9 \uC5C5\uB370\uC774\uD2B8")]),_:1}),e(i,{caption:""},{default:a(()=>[o(r(h(E).formatDate(s.device.updatedAt,"YYYY-MM-DD hh:mm:ss A")),1)]),_:1})]),_:1})]),_:1}),e(p,{dense:""},{default:a(()=>[e(m,null,{default:a(()=>[e(i,null,{default:a(()=>[o("\uC7A5\uCE58 \uB4F1\uB85D \uC2DC\uAC04")]),_:1}),e(i,{caption:""},{default:a(()=>[o(r(h(E).formatDate(s.device.createdAt,"YYYY-MM-DD hh:mm:ss A")),1)]),_:1})]),_:1})]),_:1})]),_:1})])]),_:1}),e(N,{align:"right"},{default:a(()=>[e(x,{round:"",flat:"","no-caps":"",color:"primary",icon:"check_circle",onClick:h(_)},null,8,["onClick"])]),_:1})]),_:1})]),_:1},512))}};const M=s=>(le("data-v-24e7686a"),s=s(),ne(),s),Se={class:"row no-wrap justify-between items-center q-pa-xs"},Ie={class:"dialog-name row no-wrap items-center q-gutter-x-sm"},Ce=M(()=>l("div",null,"\uBC29\uC1A1\uAD6C\uAC04 \uC218\uC815",-1)),qe={class:"text-caption"},Pe=M(()=>l("span",{class:"text-caption"},"\uB3D9\uC77C\uC9C0\uC5ED\uB9CC \uD45C\uC2DC",-1)),Ve={class:"table-header-line"},ze=M(()=>l("thead",null,[l("tr",null,[l("th",{style:{width:"50px"}},"\uC9C0\uC5ED"),l("th",{style:{width:"260px"}},"\uC774\uB984"),l("th",{style:{width:"260px"}},"\uB124\uD2B8\uC6CC\uD06C \uC218\uC2E0\uAE30 \uC120\uD0DD")])],-1)),De={style:{"text-align":"center",width:"50px"}},Ze={style:{width:"260px"}},Ue={style:{width:"260px"}},Ae={__name:"editZoneSettings",props:["device"],emits:[...U.emits],setup(s,{emit:k}){const d=T("api"),_=s,{dialogRef:S,onDialogCancel:v,onDialogOK:z}=U(),g=C([]),q=C([]),P=C([]),D=C(!1),O=(n,t,u)=>{t(()=>{q.value=P.value.filter(y=>y.name.indexOf(n)>-1)})},Y=async n=>{const{data:t}=await d.get(n?`/devices/barix/ip?ip=${n}`:"/devices/barix");return t.devices},c=async(n,t)=>{if(n===null)return g.value[t].destination="";const u=g.value.findIndex(f=>f.destination===n);if(t!==-1&&t!==u)return g.value[t].destination="",Q().warn("\uC774\uBBF8 \uC120\uD0DD\uB41C \uB124\uD2B8\uC6CC\uD06C \uC218\uC2E0\uAE30\uC785\uB2C8\uB2E4.");const y=await d.get("/devices/qsys/existszones",{params:{id:n,deviceId:_.device.deviceId}});if(y.data&&y.data.value&&y.data.value.length)return y.data.value.findIndex(f=>f.deviceId===_.device.deviceId),g.value[t].destination="",Q().warn("\uC774\uBBF8 \uC120\uD0DD\uB41C \uB124\uD2B8\uC6CC\uD06C \uC218\uC2E0\uAE30\uC785\uB2C8\uB2E4.")};return j(async()=>{g.value=[..._.device.ZoneStatus.map(n=>({name:n.name?n.name:"",Zone:n.Zone,destination:n.destination&&n.destination._id?n.destination._id:""}))],P.value=await Y(),q.value=P.value}),(n,t)=>(w(),V(F,{ref_key:"dialogRef",ref:S,persistent:""},{default:a(()=>[e(G,{class:"q-dialog-plugin bg-trans",style:{"border-radius":"8px","max-width":"1000px",width:"650px"}},{default:a(()=>[e(A,null,{default:a(()=>[l("div",Se,[l("div",Ie,[e(b,{name:"add_circle",color:"primary",size:"sm"}),l("div",null,[Ce,l("div",qe,r(s.device.name)+" "+r(s.device.ipaddress),1)])]),l("div",null,[Pe,e(H,{modelValue:D.value,"onUpdate:modelValue":t[0]||(t[0]=u=>D.value=u),size:"xs"},null,8,["modelValue"])])])]),_:1}),e(J,{onSubmit:t[1]||(t[1]=u=>h(z)(g.value))},{default:a(()=>[e(A,{class:"row justify-center"},{default:a(()=>[l("table",Ve,[ze,l("tbody",null,[(w(!0),B(X,null,ee(g.value,(u,y)=>(w(),B("tr",{key:y},[l("td",De,r(u.Zone),1),l("td",Ze,[e(L,{filled:"",dense:"",modelValue:u.name,"onUpdate:modelValue":f=>u.name=f,label:`\uCC44\uB110 ${u.Zone}`},null,8,["modelValue","onUpdate:modelValue","label"])]),l("td",Ue,[e(K,{filled:"",dense:"",clearable:"",modelValue:u.destination,"onUpdate:modelValue":[f=>u.destination=f,f=>c(f,y)],options:q.value,label:`\uCC44\uB110 ${u.Zone} \uB124\uD2B8\uC6CC\uD06C \uC218\uC2E0\uAE30 \uC120\uD0DD`,"option-value":"_id","option-label":"name","hide-selected":"","use-input":"","fill-input":"","input-debounce":"0","emit-value":"","map-options":"",onFilter:O},{prepend:a(()=>[e(b,{name:"place"})]),option:a(f=>[e(p,ae(te(f.itemProps)),{default:a(()=>[e(m,{avatar:""},{default:a(()=>[e(b,{name:"storage"})]),_:1}),e(m,null,{default:a(()=>[e(i,null,{default:a(()=>[o(r(f.opt.name),1)]),_:2},1024),e(i,{caption:""},{default:a(()=>[o(r(f.opt.ipaddress),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:2},1032,["modelValue","onUpdate:modelValue","options","label"])])]))),128))])])]),_:1}),e(N,{align:"right"},{default:a(()=>[e(x,{round:"",flat:"",color:"red-10",icon:"cancel",onClick:h(v)},null,8,["onClick"]),e(x,{round:"",flat:"","no-caps":"",color:"primary",icon:"check_circle",type:"submit"})]),_:1})]),_:1})]),_:1})]),_:1},512))}};var Be=ge(Ae,[["__scopeId","data-v-24e7686a"]]);const Oe={class:"borderd"},Ye={class:"q-px-lg q-py-sm row no-wrap justify-between items-center bg-grey-3"},Me={class:"row no-wrap items-center q-gutter-x-sm"},Re=l("div",{class:"font-main"},"\uC5C5\uBB34\uBC29\uC1A1 \uC8FC\uC7A5\uCE58",-1),Ee=["href"],Ge=["href"],Ne={key:1,class:"text-caption text-grey"},Fe={class:"row justify-center q-py-md",style:{position:"relative"}},Te={class:"row items-center q-px-md",style:{position:"absolute",right:"0",top:"1px","font-size":"0.8rem"}},je=l("span",null,"\uD398\uC774\uC9C0\uB2F9 \uD45C\uC2DC",-1),ta={__name:"Qsys",setup(s){const k=T("api"),d=oe(),{qsys:_}=se($()),S=C(""),v=C({sortBy:"",descending:!1,page:1,rowsPerPage:10}),z=ie(()=>_.value&&_.value.length>0?Math.ceil(_.value.length/v.value.rowsPerPage):1),g=()=>{d.dialog({component:_e,componentProps:{title:"\uC5C5\uBB34\uBC29\uC1A1\uC8FC\uC7A5\uCE58 \uCD94\uAC00",type:"qsys"}}).onOk(async c=>{try{d.loading.show(),await k.post("/devices/qsys",{...c})}catch{Q().error({message:"\uC5C5\uBB34\uBC29\uC1A1 \uC8FC\uC7A5\uCE58 \uCD94\uAC00 \uC624\uB958",caption:"\uC7A0\uC2DC\uD6C4\uC5D0 \uB2E4\uC2DC \uC2DC\uB3C4\uD574 \uC8FC\uC138\uC694."})}finally{await $().fnGetQsys(),d.loading.hide()}})},q=c=>{d.dialog({component:Qe,componentProps:{device:c}})},P=c=>{d.dialog({component:ve,componentProps:{title:"\uC5C5\uBB34\uBC29\uC1A1\uC8FC\uC7A5\uCE58 \uC218\uC815",type:"qsys",device:c}}).onOk(async n=>{try{d.loading.show(),await k.put("/devices/qsys/edit",{...n})}catch{Q().error({message:"\uC5C5\uBB34\uBC29\uC1A1 \uC8FC\uC7A5\uCE58 \uC218\uC815 \uC624\uB958",caption:"\uC7A0\uC2DC\uD6C4\uC5D0 \uB2E4\uC2DC \uC2DC\uB3C4\uD574 \uC8FC\uC138\uC694."})}finally{await $().fnGetQsys(),d.loading.hide()}})},D=c=>{d.dialog({component:Be,componentProps:{device:c}}).onOk(async n=>{try{d.loading.show(),await k.put("/devices/qsys/updatenames",{deviceId:c.deviceId,arr:n})}catch{Q().error({message:"\uBC29\uC1A1\uAD6C\uAC04 \uC218\uC815 \uC624\uB958",caption:"\uC7A0\uC2DC\uD6C4\uC5D0 \uB2E4\uC2DC \uC2DC\uB3C4\uD574 \uC8FC\uC138\uC694."})}finally{await $().fnGetQsys(),d.loading.hide()}})},O=async c=>{Q().info(`${c.name}\uC758 \uC804\uCCB4 \uC124\uC815 \uAC12 \uAC31\uC2E0\uC744 \uC2DC\uC791\uD569\uB2C8\uB2E4.`,"\uC7A0\uC2DC\uB9CC \uAE30\uB2E4\uB824\uC8FC\uC138\uC694."),re("zone:set:device",{...c}),await k.put("/devices/qsys/pagereset",{deviceId:c.deviceId}),await $().fnGetQsys()},Y=c=>{d.dialog({component:ce,componentProps:{icon:"delete",iconColor:"red-10",title:"\uC5C5\uBB34\uBC29\uC1A1 \uC8FC\uC7A5\uCE58 \uC0AD\uC81C",message:`${c.name} ${c.ipaddress}`}}).onOk(async()=>{try{d.loading.show(),await k.delete("/devices/qsys",{data:{...c}}),d.loading.hide()}catch{Q().error({message:"\uC5C5\uBB34\uBC29\uC1A1 \uC8FC\uC7A5\uCE58 \uC0AD\uC81C \uC624\uB958",caption:"\uC7A0\uC2DC\uD6C4\uC5D0 \uB2E4\uC2DC \uC2DC\uB3C4\uD574 \uC8FC\uC138\uC694."})}finally{await $().fnGetQsys(),d.loading.hide()}})};return j(async()=>{try{d.loading.show(),await $().fnGetQsys()}catch{}finally{d.loading.hide()}}),(c,n)=>(w(),V(pe,{class:"page"},{default:a(()=>[l("div",Oe,[l("div",Ye,[l("div",Me,[e(b,{name:"img:qsys.svg",color:"primary",size:"sm"}),Re,l("div",null,[e(b,{class:"cursor-pointer",name:"add_circle",size:"sm",color:"primary",onClick:g},{default:a(()=>[e(I,null,{default:a(()=>[o("\uC7A5\uCE58 \uCD94\uAC00")]),_:1})]),_:1})])]),e(L,{modelValue:S.value,"onUpdate:modelValue":n[0]||(n[0]=t=>S.value=t),label:"Search",borderless:"",dense:"",debounce:"300",placeholder:"Search",clearable:""},{append:a(()=>[e(b,{class:"cursor-pointer",name:"search"})]),_:1},8,["modelValue"])]),e(fe,{columns:h(ye),rows:h(_),filter:S.value,pagination:v.value,"onUpdate:pagination":n[1]||(n[1]=t=>v.value=t),"hide-pagination":"",flat:""},{"body-cell-name":a(t=>[e(Z,{props:t},{default:a(()=>[l("div",null,[e(ue,{rounded:"",color:t.row.connected?"primary":"red-10"},null,8,["color"]),o(" "+r(t.value),1)])]),_:2},1032,["props"])]),"body-cell-ipaddress":a(t=>[e(Z,{props:t},{default:a(()=>[l("a",{href:`http://${t.value}`,target:"_blank"},r(t.value),9,Ee)]),_:2},1032,["props"])]),"body-cell-amx":a(t=>[e(Z,{props:t},{default:a(()=>[t.row.amx?(w(),B("a",{key:0,href:`http://${t.value}`,target:"_blank"},r(t.value),9,Ge)):(w(),B("div",Ne," \uD1B5\uD569\uC81C\uC5B4 \uC8FC\uC7A5\uCE58 \uC5C6\uC74C "))]),_:2},1032,["props"])]),"body-cell-actions":a(t=>[e(Z,{props:t},{default:a(()=>[l("div",null,[e(x,{round:"",flat:"",color:"primary",icon:"info",size:"sm",onClick:u=>q(t.row)},{default:a(()=>[e(I,null,{default:a(()=>[o("\uC0C1\uC138\uC815\uBCF4")]),_:1})]),_:2},1032,["onClick"]),e(x,{round:"",flat:"",color:"primary",icon:"edit",size:"sm",onClick:u=>P(t.row)},{default:a(()=>[e(I,null,{default:a(()=>[o("\uC218\uC815")]),_:1})]),_:2},1032,["onClick"]),e(x,{round:"",flat:"",color:"blue",icon:"edit_note",size:"sm",onClick:u=>D(t.row)},{default:a(()=>[e(I,null,{default:a(()=>[o("\uBC29\uC1A1\uAD6C\uAC04\uC218\uC815")]),_:1})]),_:2},1032,["onClick"]),e(x,{round:"",flat:"",color:"primary",icon:"refresh",size:"sm",onClick:u=>O(t.row)},{default:a(()=>[e(I,null,{default:a(()=>[o("\uC7AC\uC124\uC815")]),_:1})]),_:2},1032,["onClick"]),e(x,{round:"",flat:"",color:"red-10",icon:"delete",size:"sm",onClick:u=>Y(t.row)},{default:a(()=>[e(I,null,{default:a(()=>[o("\uC0AD\uC81C")]),_:1})]),_:2},1032,["onClick"])])]),_:2},1032,["props"])]),_:1},8,["columns","rows","filter","pagination"]),e(de),l("div",Fe,[e(me,{modelValue:v.value.page,"onUpdate:modelValue":n[2]||(n[2]=t=>v.value.page=t),max:z.value,"max-pages":8,size:"12px",flat:"","active-design":"outline","direction-links":"","boundary-links":""},null,8,["modelValue","max"]),l("div",Te,[je,e(K,{style:{"font-size":"0.8rem"},borderless:"","item-aligned":"",dense:"","hide-bottom-space":"","map-options":"",modelValue:v.value.rowsPerPage,"onUpdate:modelValue":n[3]||(n[3]=t=>v.value.rowsPerPage=t),options:[5,10,15,20,25,30,40,50]},null,8,["modelValue"])])])])]),_:1}))}};export{ta as default};
