import{aF as Q,k as j,c as Y,b as ee,b4 as se,bh as x,C as v,D as F,E as a,j as e,S as P,U as q,G as d,V as C,H as V,M as S,F as ne,bg as ie,I as o,Z as G,bp as A,_ as L,K as _,c1 as de,bd as re,aG as R,O as w,W as E,r as O,L as ce,N as K,bt as ue,A as me,o as fe,f as T,b7 as H,be as pe,bf as _e,bw as W}from"./index.817f2c12.js";import{Q as le,b as Z,a as N}from"./QTable.e4614604.js";import{Q as ve}from"./QExpansionItem.260c5742.js";import{Q as M,a as ge}from"./QSelect.bd7cb079.js";import{u as ye,f as U,b as we,a as be,Q as ke,c as J}from"./useFiles.21cceeec.js";import{Q as X}from"./QTr.7cb9d6b9.js";import{u as ae}from"./usePlayer.c9c43e47.js";import{u as he}from"./useTts.f19473b1.js";import{u as xe}from"./useNotify.6ad2b856.js";import{_ as Ce}from"./plugin-vue_export-helper.21dcd24c.js";const Ve={class:"row no-wrap items-center q-gutter-x-md"},Se=d("div",{class:"dialog-name"},"\uBC29\uC1A1\uAD6C\uAC04\uC120\uD0DD",-1),$e={class:"dialog-caption"},Ie={class:"q-pa-sm"},Qe={class:"q-px-sm"},el={__name:"DialogSelectBrocastZones",props:["selected"],emits:[...Q.emits],setup(f,{emit:$}){const{dialogRef:p,onDialogCancel:k,onDialogOK:b}=Q(),g=f,n=j({}),c=j([]),D=Y(()=>{let s=0;for(let t in n)s+=n[t].length;return s}),I=(s,t)=>{s?n[t.deviceId]=[...t.ZoneStatus]:n[t.deviceId]=[]},y=(s,t,l)=>{s&&s.length?s.length===t.ZoneStatus.length?c[l]=!0:c[l]=null:c[l]=!1},u=()=>{let s=[];for(let t in n)if(n[t].length){const l=x.value.findIndex(r=>r.deviceId===t);s.push({deviceId:t,name:x.value[l].name,ipaddress:x.value[l].ipaddress,amx:x.value[l].amx,value:n[t]})}b(s)};return ee(async()=>{await se();for(let s=0;s<x.value.length;s++){let{deviceId:t}=x.value[s],l=g.selected.findIndex(r=>r.deviceId===t);l!==-1?(n[t]=[...g.selected[l].value],n[t].length===x.value[s].ZoneStatus.length?c[s]=!0:c[s]=null):(n[t]=[],c[s]=!1)}}),(s,t)=>(v(),F(E,{ref_key:"dialogRef",ref:p,persistent:""},{default:a(()=>[e(P,{style:{"max-width":"900px",width:"80%","min-width":"500px","border-radius":"6px"}},{default:a(()=>[e(q,null,{default:a(()=>[d("div",Ve,[e(C,{name:"location_on",color:"primary",size:"1.5rem"}),d("div",null,[Se,d("div",$e,V(D.value)+"\uAC1C \uBC29\uC1A1\uAD6C\uAC04 \uC120\uD0DD ",1)])])]),_:1}),e(q,null,{default:a(()=>[(v(!0),S(ne,null,ie(o(x),(l,r)=>(v(),S("div",{key:r,class:"q-px-md"},[e(ve,{class:"q-pa-xs col-xs-6 col-sm-3 col-md-2 bg-grey-1"},{header:a(()=>[e(G,{avatar:""},{default:a(()=>[e(A,{modelValue:c[r],"onUpdate:modelValue":[i=>c[r]=i,i=>I(i,l,r)]},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(G,null,{default:a(()=>[e(L,null,{default:a(()=>[_(V(l.name),1)]),_:2},1024),e(L,{caption:""},{default:a(()=>[_(V(l.ipaddress),1)]),_:2},1024)]),_:2},1024)]),default:a(()=>[e(le,{rows:l.ZoneStatus,columns:[],"row-key":"Zone",selection:"multiple",selected:n[l.deviceId],"onUpdate:selected":[i=>n[l.deviceId]=i,i=>y(i,l,r)],grid:"",pagination:{rowsPerPage:0},"hide-header":"","hide-bottom":""},{item:a(i=>[d("div",{class:"q-pa-xs col-xs-6 col-sm-3 col-md-2 grid-style-transition",style:de(i.selected?"transform: scale(0.95);":"")},[d("div",{class:re(["border",i.selected?s.$q.dark.isActive?"bg-grey-10":"bg-grey-3":""])},[d("div",Ie,[e(A,{dense:"",modelValue:i.selected,"onUpdate:modelValue":z=>i.selected=z,label:i.row.name?`${i.row.Zone}. ${i.row.name}`:`${i.row.Zone}. No Name`},null,8,["modelValue","onUpdate:modelValue","label"])])],2)],4)]),_:2},1032,["rows","selected","onUpdate:selected"])]),_:2},1024)]))),128))]),_:1}),e(R,{align:"right"},{default:a(()=>[d("div",Qe,[e(w,{round:"",flat:"",color:"red-10",icon:"cancel",onClick:o(k)},null,8,["onClick"]),e(w,{round:"",flat:"","no-caps":"",color:"primary",icon:"check_circle",onClick:u})])]),_:1})]),_:1})]),_:1},512))}},qe={class:"row no-wrap justify-between items-center"},De={class:"row no-wrap items-center q-gutter-x-md"},Ue=d("div",null,[d("div",{class:"dialog-name"},"\uD30C\uC77C\uC120\uD0DD")],-1),ze={key:0},Fe=["onClick"],Te={key:2},ll={__name:"DialogSelectFile",props:["file"],emits:[...Q.emits],setup(f,{emit:$}){const{dialogRef:p,onDialogCancel:k,onDialogOK:b}=Q(),g=f,{fnMakeFolder:n,fnUploadFile:c}=ye(),{fnPlayStart:D}=ae(),I=O(25),y=O([]),u=Y(()=>{var s;return((s=U.selectedFolder)==null?void 0:s.includes("/global"))&&!ce.value.isAdmin});return ee(async()=>{await we(),g.file&&(y.value[0]=g.file)}),(s,t)=>(v(),F(E,{ref_key:"dialogRef",ref:p,persistent:""},{default:a(()=>[e(P,{class:"q-dialog-plugin",style:{"border-radius":"8px",width:"90%","max-width":"800px"}},{default:a(()=>[e(q,null,{default:a(()=>[d("div",qe,[d("div",De,[e(C,{name:"save",color:"primary",size:"1.5rem"}),Ue]),d("div",null,[e(w,{disable:u.value,round:"",flat:"",icon:"create_new_folder",color:"primary",size:"12px",onClick:o(n)},{default:a(()=>[e(M,null,{default:a(()=>[_("\uC0C8\uD3F4\uB354")]),_:1})]),_:1},8,["disable","onClick"]),e(w,{disable:u.value,round:"",flat:"",icon:"upload",color:"primary",size:"12px",onClick:o(c)},{default:a(()=>[e(M,null,{default:a(()=>[_("\uD30C\uC77C \uC5C5\uB85C\uB4DC")]),_:1})]),_:1},8,["disable","onClick"])])])]),_:1}),e(q,null,{default:a(()=>[e(be,{modelValue:I.value,"onUpdate:modelValue":t[2]||(t[2]=l=>I.value=l)},{before:a(()=>[e(ke,{nodes:o(U).folders,selected:o(U).selectedFolder,"onUpdate:selected":[t[0]||(t[0]=l=>o(U).selectedFolder=l),o(J)],"node-key":"path","no-selection-unset":"","selected-color":"primary"},null,8,["nodes","selected","onUpdate:selected"])]),after:a(()=>[e(le,{columns:[{name:"name",label:"NAME",field:"name",align:"left",sortable:!0},{name:"size",label:"SIZE",field:"size",sortable:!0}],rows:o(U).files,flat:"","row-key":"name",selection:"single",selected:y.value,"onUpdate:selected":t[1]||(t[1]=l=>y.value=l),pagination:{rowsPerPage:0},"hide-bottom":""},{header:a(l=>[e(X,{props:l},{default:a(()=>[e(Z,{style:{width:"2rem"}}),e(Z,{key:"name",props:l},{default:a(()=>[_(" NAME ")]),_:2},1032,["props"]),e(Z,{key:"size",props:l,style:{width:"2.5rem"}},{default:a(()=>[_(" SIZE ")]),_:2},1032,["props"])]),_:2},1032,["props"])]),body:a(l=>[e(X,{props:l},{default:a(()=>[e(N,null,{default:a(()=>[l.row.type!=="folder"?(v(),F(A,{key:0,modelValue:l.selected,"onUpdate:modelValue":r=>l.selected=r},null,8,["modelValue","onUpdate:modelValue"])):K("",!0)]),_:2},1024),e(N,{key:"name",props:l},{default:a(()=>[l.row.type==="folder"?(v(),S("span",ze,[e(C,{name:"folder_open",color:"primary",size:"sm"})])):K("",!0),l.row.type==="folder"?(v(),S("span",{key:1,class:"q-ml-xs cursor-pointer",onClick:r=>o(J)(l.row.fullpath)},V(l.row.name),9,Fe)):(v(),S("span",Te,[_(V(l.row.name)+" ",1),e(w,{flat:"",round:"",color:"primary",icon:"play_arrow",onClick:r=>o(D)(l.row)},null,8,["onClick"])]))]),_:2},1032,["props"]),e(N,{key:"size",props:l,style:{width:"2.5rem"}},{default:a(()=>[_(V(l.row.type!=="folder"?o(ue).humanStorageSize(l.row.size):""),1)]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","selected"])]),_:1},8,["modelValue"])]),_:1}),e(R,{align:"right"},{default:a(()=>[e(w,{round:"",flat:"",color:"red-10",icon:"cancel",onClick:o(k)},null,8,["onClick"]),e(w,{round:"",flat:"","no-caps":"",color:"primary",icon:"check_circle",onClick:t[3]||(t[3]=l=>o(b)(y.value))})]),_:1})]),_:1})]),_:1},512))}};const Ze=f=>(pe("data-v-1dcbf65b"),f=f(),_e(),f),Ne={class:"row no-wrap items-center q-gutter-x-md"},Ae=Ze(()=>d("div",{class:"card-name"},"\uBA54\uC2DC\uC9C0",-1)),Me={class:"q-gutter-y-sm"},Pe={class:"row justify-between q-px-sm"},Re={key:0,class:"row no-wrap justify-between items-center q-gutter-x-sm"},Ee={key:1,class:"text-red-10 row items-center"},Be={__name:"DialogTts",props:["file"],emits:[...Q.emits],setup(f,{emit:$}){const{dialogRef:p,onDialogCancel:k,onDialogOK:b}=Q(),{fnPlayStart:g,modal:n}=ae(),{fnGetVoices:c,fnGetDefaultVoice:D,fnMakeTts:I,fnDeleteFile:y,currentFile:u,voices:s,voice:t,ttsRate:l,ttsText:r}=he(),{fnNotiError:i}=xe(),z=f,B=me(),te=async()=>{n.value=!1,u.value&&await y(u.value),await I()};return fe(async()=>{try{B.loading.show(),await c(),await D(),z.file&&await y(z.file)}catch{i("TTS \uC870\uD68C \uC624\uB958","\uC7A0\uC2DC\uD6C4\uC5D0 \uB2E4\uC2DC \uC2DC\uB3C4\uD574 \uC8FC\uC138\uC694.")}finally{B.loading.hide()}}),(oe,m)=>(v(),F(E,{ref_key:"dialogRef",ref:p,persistent:""},{default:a(()=>[e(P,{class:"q-dialog-plugin bg-trans wide"},{default:a(()=>[e(q,null,{default:a(()=>[d("div",Ne,[e(C,{name:"volume_up",color:"primary",size:"sm"}),Ae])]),_:1}),e(q,null,{default:a(()=>[d("div",Me,[e(ge,{options:o(s),modelValue:o(t),"onUpdate:modelValue":m[0]||(m[0]=h=>T(t)?t.value=h:null),"map-options":"","emit-value":"","option-value":"id","option-label":"name",filled:"",dense:"",label:"\uC74C\uC131"},null,8,["options","modelValue"]),e(H,{modelValue:o(l),"onUpdate:modelValue":m[1]||(m[1]=h=>T(l)?l.value=h:null),type:"number",filled:"",dense:"",label:"\uC74C\uC131\uC18D\uB3C4"},null,8,["modelValue"]),e(H,{modelValue:o(r),"onUpdate:modelValue":m[2]||(m[2]=h=>T(r)?r.value=h:null),filled:"",type:"textarea",placeholder:"\uBA54\uC2DC\uC9C0\uB97C \uC785\uB825\uD558\uC138\uC694.",label:"\uBA54\uC2DC\uC9C0"},null,8,["modelValue"]),d("div",Pe,[o(u)?(v(),S("div",Re,[d("div",null,[e(C,{class:"cursor-pointer",name:"play_arrow",color:"primary",size:"sm",onClick:m[3]||(m[3]=h=>o(g)(o(u)))}),_(" "+V(o(u).base),1)]),e(C,{class:"cursor-pointer q-mr-sm",name:"cancel",color:"red-10",size:"sm",onClick:m[4]||(m[4]=h=>o(y)(o(u)))})])):(v(),S("div",Ee,[e(C,{name:"warning"}),_(" \uD569\uC131\uB41C \uD30C\uC77C\uC774 \uC5C6\uC2B5\uB2C8\uB2E4. ")])),e(w,{round:"",unelevated:"",color:"primary",icon:"mic",size:"sm",onClick:te},{default:a(()=>[e(M,null,{default:a(()=>[_("\uC74C\uC131\uD569\uC131")]),_:1})]),_:1})])])]),_:1}),e(R,{align:"right"},{default:a(()=>[e(w,{round:"",flat:"",color:"red-10",icon:"cancel",onClick:o(k)},null,8,["onClick"]),e(w,{disable:!o(u),round:"",flat:"","no-caps":"",color:"primary",icon:"check_circle",onClick:m[5]||(m[5]=h=>o(b)(o(u)))},null,8,["disable"])]),_:1})]),_:1})]),_:1},512))}};var al=Ce(Be,[["__scopeId","data-v-1dcbf65b"]]);const tl=f=>{let $=[];for(let p of f){let k=W.value.findIndex(b=>b.deviceId===p.deviceId);if(k!==-1){const{ZoneStatus:b,name:g}=W.value[k];if(p.value&&p.value.length)if(p.value.length===b.length)$.push(`${g} - ALL`);else{let n=p.value.map(c=>c.name||c.Zone);$.push(`${g} - ${n.join(", ")}`)}}}return $};export{al as D,el as _,ll as a,tl as f};
