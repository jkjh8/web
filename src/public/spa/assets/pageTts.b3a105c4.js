import{c as H,z as u,G as y,C as n,j as e,Q as w,bd as C,r as I,b as J,aL as ae,bt as q,A as U,B as a,O as K,R as T,J as $,aO as W,D as g,F as D,aF as X,I as z,P as Y,M as h,bL as oe,aP as le,v as B,o as ee,bM as E,H as M,k as ne,aJ as O,U as Q}from"./index.186a5e78.js";import{Q as ie}from"./QBadge.b1ae3087.js";import{b as A,c as R,Q as re}from"./QSelect.eefc60fe.js";import{a as te,b as P,Q as Z}from"./QTable.6632cdbf.js";import{Q as de}from"./QExpansionItem.3f0fca0f.js";import{u as F}from"./use-dialog-plugin-component.830234ac.js";import{f as ce,a as ue,Q as me,b as S,c as L}from"./useFiles.d1d5fca1.js";import{Q as G}from"./QTr.aa542b9e.js";import{f as pe}from"./format.cbf00d5d.js";import{u as N}from"./usePlayer.732e3406.js";const fe={class:"row no-wrap justify-between items-center"},ve={class:"row no-wrap justify-start items-center q-gutter-x-sm"},ye=n("div",{class:"card-name"},"\uCC60\uC784",-1),nt={__name:"pagePreamble",props:["preamble"],emits:["update:value"],setup(c,{emit:b}){const _=c,m=b,r=H({get(){return _.preamble==="Chime ascending triple.wav"},set(){return _.preamble?m("update:value",""):m("update:value","Chime ascending triple.wav")}});return(x,o)=>(u(),y("div",fe,[n("div",ve,[e(w,{name:"notifications",color:"primary",size:"sm"}),ye]),e(C,{modelValue:r.value,"onUpdate:modelValue":o[0]||(o[0]=i=>r.value=i)},null,8,["modelValue"])]))}},_e={class:"row no-wrap items-center q-gutter-x-md"},ge=n("div",{class:"dialog-name"},"\uBC29\uC1A1\uAD6C\uAC04\uC120\uD0DD",-1),we={class:"dialog-caption"},he={class:"q-pa-sm"},be={class:"q-px-sm"},xe={__name:"selectBrocastZones",props:["sel"],emits:[...F.emits],setup(c,{emit:b}){const{dialogRef:_,onDialogCancel:m,onDialogHide:r,onDialogOK:x}=F(),o=c,i=I({}),p=I([]),f=H(()=>{let t=0;for(let l in i.value)t+=i.value[l].length;return t}),s=(t,l,d)=>{t?i.value[l.deviceId]=[...l.ZoneStatus]:i.value[l.deviceId]=[]},k=(t,l,d)=>{t&&t.length?t.length===l.ZoneStatus.length?p.value[d]=!0:p.value[d]=null:p.value[d]=!1},j=()=>{let t=[];for(let l in i.value)i.value[l].length&&t.push({deviceId:l,ipaddress:q.value[q.value.findIndex(d=>d.deviceId===l)].ipaddress,value:i.value[l]});x(t)};return J(async()=>{await ae();for(let t=0;t<q.value.length;t++){let l=q.value[t].deviceId,d=o.sel.findIndex(V=>V.deviceId===l);d!==-1?(i.value[l]=[...o.sel[d].value],i.value[l].length===q.value[t].ZoneStatus.length?p.value[t]=!0:p.value[t]=null):(i.value[l]=[],p.value[t]=!1)}}),(t,l)=>(u(),U(K,{ref_key:"dialogRef",ref:_,persistent:""},{default:a(()=>[e(Y,{style:{"max-width":"900px",width:"80%","min-width":"500px","border-radius":"6px"}},{default:a(()=>[e(T,null,{default:a(()=>[n("div",_e,[e(w,{name:"location_on",color:"primary",size:"1.5rem"}),n("div",null,[ge,n("div",we,$(f.value)+"\uAC1C \uBC29\uC1A1\uAD6C\uAC04 \uC120\uD0DD ",1)])])]),_:1}),e(T,null,{default:a(()=>[(u(!0),y(D,null,W(g(q),(d,V)=>(u(),y("div",{key:V,class:"q-px-md"},[e(de,{class:"q-pa-xs col-xs-6 col-sm-3 col-md-2 bg-grey-1"},{header:a(()=>[e(A,{avatar:""},{default:a(()=>[e(C,{modelValue:p.value[V],"onUpdate:modelValue":[v=>p.value[V]=v,v=>s(v,d,V)]},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(A,null,{default:a(()=>[e(R,null,{default:a(()=>[h($(d.name),1)]),_:2},1024),e(R,{caption:""},{default:a(()=>[h($(d.ipaddress),1)]),_:2},1024)]),_:2},1024)]),default:a(()=>[e(te,{rows:d.ZoneStatus,columns:[],"row-key":"Zone",selection:"multiple",selected:i.value[d.deviceId],"onUpdate:selected":[v=>i.value[d.deviceId]=v,v=>k(v,d,V)],grid:"",pagination:{rowsPerPage:0},"hide-header":"","hide-bottom":""},{item:a(v=>[n("div",{class:"q-pa-xs col-xs-6 col-sm-3 col-md-2 grid-style-transition",style:oe(v.selected?"transform: scale(0.95);":"")},[n("div",{class:le(["border",v.selected?t.$q.dark.isActive?"bg-grey-10":"bg-grey-3":""])},[n("div",he,[e(C,{dense:"",modelValue:v.selected,"onUpdate:modelValue":se=>v.selected=se,label:v.row.name?`${v.row.Zone}. ${v.row.name}`:`${v.row.Zone}. No Name`},null,8,["modelValue","onUpdate:modelValue","label"])])],2)],4)]),_:2},1032,["rows","selected","onUpdate:selected"])]),_:2},1024)]))),128))]),_:1}),e(X,{align:"right"},{default:a(()=>[n("div",be,[e(z,{round:"",flat:"",color:"red-10",icon:"cancel",onClick:g(m)},null,8,["onClick"]),e(z,{round:"",flat:"","no-caps":"",color:"primary",icon:"check_circle",onClick:j})])]),_:1})]),_:1})]),_:1},512))}},ke={class:"row no-wrap justify-between items-center"},$e={class:"row no-wrap justify-start items-center q-gutter-x-sm"},Ve=n("div",{class:"card-name"},"\uBC29\uC1A1\uAD6C\uAC04",-1),qe={key:0,class:"bg-grey-2 q-py-sm q-px-sm q-mt-sm q-gutter-x-sm row justify-start items-center",style:{"border-radius":"2px","min-height":"40px"}},ze={key:1,class:"bg-grey-2 q-pa-sm q-mt-sm row justify-start items-center",style:{"border-radius":"2px",height:"40px"}},Ce=n("span",null," \uC120\uD0DD\uB41C \uBC29\uC1A1\uAD6C\uAC04\uC774 \uC5C6\uC2B5\uB2C8\uB2E4. ",-1),Qe=[Ce],it={__name:"pageZones",props:["devices","zones"],emits:["update:zones","update:devices"],setup(c,{emit:b}){const _=B(),m=c,r=b,x=()=>{_.dialog({component:xe,componentProps:{sel:m.devices}}).onOk(o=>{r("update:devices",o),r("update:zones",E(o))})};return ee(()=>{m.devices&&m.devices.length&&r("update:zones",E(m.devices))}),(o,i)=>(u(),y("div",null,[n("div",ke,[n("div",$e,[e(w,{name:"location_on",color:"primary",size:"sm"}),Ve]),e(w,{class:"cursor-pointer",name:"add_circle",color:"primary",size:"sm",onClick:x})]),c.zones&&c.zones.length?(u(),y("div",qe,[(u(!0),y(D,null,W(c.zones,(p,f)=>(u(),U(ie,{key:f},{default:a(()=>[h($(p),1)]),_:2},1024))),128))])):(u(),y("div",ze,Qe))]))}},Se={class:"row no-wrap items-center q-gutter-x-md"},Ie=n("div",null,[n("div",{class:"dialog-name"},"\uD30C\uC77C\uC120\uD0DD")],-1),Ue={key:0},Te=["onClick"],je={key:2},Pe={__name:"selectFile",props:["file"],setup(c){const{dialogRef:b,onDialogCancel:_,onDialogOK:m}=F(),r=c,{fnPlayStart:x}=N(),o=I(25),i=I([]);return J(async()=>{await ce(),r.file&&(i.value[0]=r.file)}),(p,f)=>(u(),U(K,{ref_key:"dialogRef",ref:b,persistent:""},{default:a(()=>[e(Y,{class:"q-dialog-plugin",style:{"border-radius":"8px",width:"90%","max-width":"800px"}},{default:a(()=>[e(T,null,{default:a(()=>[n("div",Se,[e(w,{name:"save",color:"primary",size:"1.5rem"}),Ie])]),_:1}),e(T,null,{default:a(()=>[e(ue,{modelValue:o.value,"onUpdate:modelValue":f[2]||(f[2]=s=>o.value=s)},{before:a(()=>[e(me,{nodes:g(S).folders,selected:g(S).selectedFolder,"onUpdate:selected":[f[0]||(f[0]=s=>g(S).selectedFolder=s),g(L)],"node-key":"path","no-selection-unset":"","selected-color":"primary"},null,8,["nodes","selected","onUpdate:selected"])]),after:a(()=>[e(te,{columns:[{name:"name",label:"NAME",field:"name",align:"left",sortable:!0},{name:"size",label:"SIZE",field:"size",sortable:!0}],rows:g(S).files,flat:"",dense:"","row-key":"name",selection:"single",selected:i.value,"onUpdate:selected":f[1]||(f[1]=s=>i.value=s),pagination:{rowsPerPage:0},"hide-bottom":""},{header:a(s=>[e(G,{props:s},{default:a(()=>[e(P,{style:{width:"2rem"}},{default:a(()=>[e(C,{size:"22px",modelValue:s.selected,"onUpdate:modelValue":k=>s.selected=k},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(P,{key:"name",props:s},{default:a(()=>[h(" NAME ")]),_:2},1032,["props"]),e(P,{key:"size",props:s,style:{width:"2.5rem"}},{default:a(()=>[h(" SIZE ")]),_:2},1032,["props"])]),_:2},1032,["props"])]),body:a(s=>[e(G,{props:s},{default:a(()=>[e(Z,{style:{width:"2rem"}},{default:a(()=>[s.row.type!=="folder"?(u(),U(C,{key:0,size:"22px",modelValue:s.selected,"onUpdate:modelValue":k=>s.selected=k},null,8,["modelValue","onUpdate:modelValue"])):M("",!0)]),_:2},1024),e(Z,{key:"name",props:s},{default:a(()=>[s.row.type==="folder"?(u(),y("span",Ue,[e(w,{name:"folder_open",color:"primary",size:"16px"})])):M("",!0),s.row.type==="folder"?(u(),y("span",{key:1,class:"q-ml-xs cursor-pointer",onClick:k=>g(L)(s.row.fullpath)},$(s.row.name),9,Te)):(u(),y("span",je,[h($(s.row.name)+" ",1),e(z,{flat:"",round:"",size:"xs",color:"primary",icon:"play_arrow",onClick:k=>g(x)(s.row)},null,8,["onClick"])]))]),_:2},1032,["props"]),e(Z,{key:"size",props:s,style:{width:"2.5rem"}},{default:a(()=>[h($(s.row.type!=="folder"?g(pe).humanStorageSize(s.row.size):""),1)]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","selected"])]),_:1},8,["modelValue"])]),_:1}),e(X,{align:"right"},{default:a(()=>[e(z,{round:"",flat:"",color:"red-10",icon:"cancel",onClick:g(_)},null,8,["onClick"]),e(z,{round:"",flat:"","no-caps":"",color:"primary",icon:"check_circle",onClick:f[3]||(f[3]=s=>g(m)(i.value))})]),_:1})]),_:1})]),_:1},512))}},Ze={class:"row no-wrap justify-between items-center"},Fe={class:"row no-wrap justify-start items-center q-gutter-x-sm"},De=n("div",{class:"card-name"},"\uD30C\uC77C",-1),Be={key:0,class:"bg-grey-2 q-pa-sm q-mt-sm q-gutter-x-sm row no-wrap justify-between items-center",style:{"border-radius":"2px","min-height":"40px"}},Ne={key:1,class:"bg-grey-2 q-pa-sm q-mt-sm row justify-start items-center",style:{"border-radius":"2px",height:"40px"}},Ee=n("span",null," \uC120\uD0DD\uB41C \uD30C\uC77C\uC774 \uC5C6\uC2B5\uB2C8\uB2E4. ",-1),Me=[Ee],rt={__name:"pageFile",props:["file"],emits:["update:value"],setup(c,{emit:b}){const _=c,m=b,r=B(),{fnPlayStart:x}=N(),o=()=>{r.dialog({component:Pe,componentProps:{file:_.file}}).onOk(i=>{m("update:value",i[0])})};return(i,p)=>(u(),y(D,null,[n("div",Ze,[n("div",Fe,[e(w,{name:"save",color:"primary",size:"sm"}),De]),e(w,{class:"cursor-pointer",name:"add_circle",color:"primary",size:"sm",onClick:o})]),c.file?(u(),y("div",Be,[n("div",null,[e(w,{class:"cursor-pointer",name:"play_arrow",color:"primary",size:"xs",onClick:p[0]||(p[0]=f=>g(x)(c.file))}),h(" "+$(c.file.base),1)]),e(w,{class:"cursor-pointer q-mr-sm",name:"cancel",color:"red-10",size:"sm",onClick:p[1]||(p[1]=f=>m("update:value",null))})])):(u(),y("div",Ne,Me))],64))}},Oe={class:"col q-gutter-y-sm"},Ae={class:"row no-wrap justify-between items-center"},Re={class:"row no-wrap justify-between items-center q-gutter-x-sm"},Le=n("div",{class:"card-name"},"\uBA54\uC2DC\uC9C0",-1),Ge={class:"row no-wrap justify-between items-center"},He={key:0,class:"row no-wrap justify-between items-center q-gutter-x-sm"},Je={key:1,class:"text-red-10 row items-center"},dt={__name:"pageTts",props:["file"],emits:["update:value"],setup(c,{emit:b}){const _=c,m=b,r=B(),{fnPlayStart:x}=N(),o=ne({voices:[],voice:"",rate:200,text:""}),i=async()=>{if(!o.voice)return s();if(!o.text)return k();try{r.loading.show(),_.file&&await Q.delete("/broadcast/tts",{data:{file:_.file}});const t=await Q.put("/broadcast/tts",{...o});m("update:value",t.data.value.file)}catch(t){console.error(t)}finally{r.loading.hide()}},p=async()=>{r.loading.show();try{_.file&&(await Q.delete("/broadcast/tts",{data:{file:_.file}}),m("update:value",null))}catch(t){console.error(t)}finally{r.loading.hide()}},f=()=>{r.notify({type:"negative",icon:"error",message:"TTS \uC5D4\uC9C4 \uC624\uB958",caption:"\uC624\uB958\uAC00 \uACC4\uC18D\uB418\uBA74 \uAD00\uB9AC\uC790\uC5D0\uAC8C \uBB38\uC758 \uD574\uC8FC\uC138\uC694.",position:"top",timeout:3e3})},s=()=>{r.notify({type:"warning",icon:"warning",message:"TTS \uC74C\uC131\uC744 \uC120\uD0DD\uD574 \uC8FC\uC138\uC694.",caption:"\uC74C\uC131 \uD569\uC131\uC744 \uC704\uD574\uC11C \uC74C\uC131\uC744 \uC120\uD0DD\uD574 \uC8FC\uC138\uC694",position:"top",timeout:3e3})},k=()=>{r.notify({type:"warning",icon:"warning",message:"TTS \uBA54\uC2DC\uC9C0\uB97C \uC785\uB825\uD574 \uC8FC\uC138\uC694.",caption:"\uC74C\uC131 \uD569\uC131\uC744 \uC704\uD574\uC11C TTS \uBA54\uC2DC\uC9C0\uB97C \uC785\uB825\uD574 \uC8FC\uC138\uC694",position:"top",timeout:3e3})},j=async()=>{try{r.loading.show();const t=await Q.get("/broadcast/tts");o.voices=t.data.value.voices,o.rate=t.data.value.rate}catch(t){console.error(t),f()}finally{r.loading.hide()}};return ee(async()=>{r.loading.show();try{m("update:value",null),await j()}catch(t){console.error(t)}finally{r.loading.hide()}}),(t,l)=>(u(),y("div",Oe,[n("div",Ae,[n("div",Re,[e(w,{name:"volume_up",color:"primary",size:"sm"}),Le])]),e(re,{options:o.voices,modelValue:o.voice,"onUpdate:modelValue":l[0]||(l[0]=d=>o.voice=d),"option-value":"id","option-label":"name",filled:"",dense:"",label:"\uC74C\uC131"},null,8,["options","modelValue"]),e(O,{modelValue:o.rate,"onUpdate:modelValue":l[1]||(l[1]=d=>o.rate=d),type:"number",filled:"",dense:"",label:"\uC74C\uC131\uC18D\uB3C4"},null,8,["modelValue"]),e(O,{modelValue:o.text,"onUpdate:modelValue":l[2]||(l[2]=d=>o.text=d),filled:"",type:"textarea",placeholder:"\uBA54\uC2DC\uC9C0\uB97C \uC785\uB825\uD558\uC138\uC694.",label:"\uBA54\uC2DC\uC9C0"},null,8,["modelValue"]),n("div",Ge,[c.file?(u(),y("div",He,[n("div",null,[e(w,{class:"cursor-pointer",name:"play_arrow",color:"primary",size:"sm",onClick:l[3]||(l[3]=d=>g(x)(c.file))}),h(" "+$(c.file.base),1)]),e(w,{class:"cursor-pointer q-mr-sm",name:"cancel",color:"red-10",size:"sm",onClick:p})])):(u(),y("div",Je,[e(w,{name:"warning"}),h(" \uD569\uC131\uB41C \uD30C\uC77C\uC774 \uC5C6\uC2B5\uB2C8\uB2E4. ")])),e(z,{rounded:"",unelevated:"",color:"primary",onClick:i},{default:a(()=>[h("\uC74C\uC131 \uD569\uC131")]),_:1})])]))}};export{nt as _,it as a,rt as b,dt as c};
