import{r as Q,b as U,z as a,A as z,B as o,j as t,P as B,R as V,C as r,Q as d,D as s,bd as $,M as f,H as q,G as c,J as g,I as x,aF as D,O as N,v as T,F as j}from"./index.e0d07856.js";import{f as E,a as M,Q as A,b as w,c as F}from"./useFiles.a2a90146.js";import{a as I,b,Q as C}from"./QTable.34f978b0.js";import{Q as S}from"./QTr.dbd5b529.js";import{u as R}from"./use-dialog-plugin-component.120c15cd.js";import{f as O}from"./format.cbf00d5d.js";import{u as P}from"./usePlayer.2a62ca33.js";const Z={class:"row no-wrap items-center q-gutter-x-md"},G=r("div",null,[r("div",{class:"dialog-name"},"\uD30C\uC77C\uC120\uD0DD")],-1),H={key:0},J=["onClick"],K={key:2},L={__name:"selectFile",props:["file"],setup(i){const{dialogRef:k,onDialogCancel:v,onDialogOK:p}=R(),y=i,{fnPlayStart:h}=P(),_=Q(25),n=Q([]);return U(async()=>{await E(),y.file&&(n.value[0]=y.file)}),(m,l)=>(a(),z(N,{ref_key:"dialogRef",ref:k,persistent:""},{default:o(()=>[t(B,{class:"q-dialog-plugin",style:{"border-radius":"8px",width:"90%","max-width":"800px"}},{default:o(()=>[t(V,null,{default:o(()=>[r("div",Z,[t(d,{name:"save",color:"primary",size:"1.5rem"}),G])]),_:1}),t(V,null,{default:o(()=>[t(M,{modelValue:_.value,"onUpdate:modelValue":l[2]||(l[2]=e=>_.value=e)},{before:o(()=>[t(A,{nodes:s(w).folders,selected:s(w).selectedFolder,"onUpdate:selected":[l[0]||(l[0]=e=>s(w).selectedFolder=e),s(F)],"node-key":"path","no-selection-unset":"","selected-color":"primary"},null,8,["nodes","selected","onUpdate:selected"])]),after:o(()=>[t(I,{columns:[{name:"name",label:"NAME",field:"name",align:"left",sortable:!0},{name:"size",label:"SIZE",field:"size",sortable:!0}],rows:s(w).files,flat:"",dense:"","row-key":"name",selection:"single",selected:n.value,"onUpdate:selected":l[1]||(l[1]=e=>n.value=e),pagination:{rowsPerPage:0},"hide-bottom":""},{header:o(e=>[t(S,{props:e},{default:o(()=>[t(b,{style:{width:"2rem"}},{default:o(()=>[t($,{size:"22px",modelValue:e.selected,"onUpdate:modelValue":u=>e.selected=u},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(b,{key:"name",props:e},{default:o(()=>[f(" NAME ")]),_:2},1032,["props"]),t(b,{key:"size",props:e,style:{width:"2.5rem"}},{default:o(()=>[f(" SIZE ")]),_:2},1032,["props"])]),_:2},1032,["props"])]),body:o(e=>[t(S,{props:e},{default:o(()=>[t(C,{style:{width:"2rem"}},{default:o(()=>[e.row.type!=="folder"?(a(),z($,{key:0,size:"22px",modelValue:e.selected,"onUpdate:modelValue":u=>e.selected=u},null,8,["modelValue","onUpdate:modelValue"])):q("",!0)]),_:2},1024),t(C,{key:"name",props:e},{default:o(()=>[e.row.type==="folder"?(a(),c("span",H,[t(d,{name:"folder_open",color:"primary",size:"16px"})])):q("",!0),e.row.type==="folder"?(a(),c("span",{key:1,class:"q-ml-xs cursor-pointer",onClick:u=>s(F)(e.row.fullpath)},g(e.row.name),9,J)):(a(),c("span",K,[f(g(e.row.name)+" ",1),t(x,{flat:"",round:"",size:"xs",color:"primary",icon:"play_arrow",onClick:u=>s(h)(e.row)},null,8,["onClick"])]))]),_:2},1032,["props"]),t(C,{key:"size",props:e,style:{width:"2.5rem"}},{default:o(()=>[f(g(e.row.type!=="folder"?s(O).humanStorageSize(e.row.size):""),1)]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows","selected"])]),_:1},8,["modelValue"])]),_:1}),t(D,{align:"right"},{default:o(()=>[t(x,{round:"",flat:"",color:"red-10",icon:"cancel",onClick:s(v)},null,8,["onClick"]),t(x,{round:"",flat:"","no-caps":"",color:"primary",icon:"check_circle",onClick:l[3]||(l[3]=e=>s(p)(n.value))})]),_:1})]),_:1})]),_:1},512))}},W={class:"row no-wrap justify-between items-center"},X={class:"row no-wrap justify-start items-center q-gutter-x-sm"},Y=r("div",{class:"card-name"},"\uD30C\uC77C",-1),ee={key:0,class:"bg-grey-2 q-pa-sm q-mt-sm q-gutter-x-sm row no-wrap justify-between items-center",style:{"border-radius":"2px","min-height":"40px"}},te={key:1,class:"bg-grey-2 q-pa-sm q-mt-sm row justify-start items-center",style:{"border-radius":"2px",height:"40px"}},oe=r("span",null," \uC120\uD0DD\uB41C \uD30C\uC77C\uC774 \uC5C6\uC2B5\uB2C8\uB2E4. ",-1),se=[oe],me={__name:"pageFile",props:["file"],emits:["update:value"],setup(i,{emit:k}){const v=i,p=k,y=T(),{fnPlayStart:h}=P(),_=()=>{y.dialog({component:L,componentProps:{file:v.file}}).onOk(n=>{p("update:value",n[0])})};return(n,m)=>(a(),c(j,null,[r("div",W,[r("div",X,[t(d,{name:"save",color:"primary",size:"sm"}),Y]),t(d,{class:"cursor-pointer",name:"add_circle",color:"primary",size:"sm",onClick:_})]),i.file?(a(),c("div",ee,[r("div",null,[t(d,{class:"cursor-pointer",name:"play_arrow",color:"primary",size:"xs",onClick:m[0]||(m[0]=l=>s(h)(i.file))}),f(" "+g(i.file.base),1)]),t(d,{class:"cursor-pointer q-mr-sm",name:"cancel",color:"red-10",size:"sm",onClick:m[1]||(m[1]=l=>p("update:value",null))})])):(a(),c("div",te,se))],64))}};export{me as _};
